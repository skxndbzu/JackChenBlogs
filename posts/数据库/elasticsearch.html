<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.50" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/elasticsearch.html"><meta property="og:site_name" content="È∫ªËä±ÁöÑÂ∞èÁ´ô"><meta property="og:title" content="elasticsearch"><meta property="og:description" content="elasticsearch 1.ÂàùËØÜelasticsearch 1.1.‰∫ÜËß£ES 1.1.1.elasticsearchÁöÑ‰ΩúÁî® elasticsearchÊòØ‰∏ÄÊ¨æÈùûÂ∏∏Âº∫Â§ßÁöÑÂºÄÊ∫êÊêúÁ¥¢ÂºïÊìéÔºåÂÖ∑Â§áÈùûÂ∏∏Â§öÂº∫Â§ßÂäüËÉΩÔºåÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠Âø´ÈÄüÊâæÂà∞ÈúÄË¶ÅÁöÑÂÜÖÂÆπ ‰æãÂ¶ÇÔºö Âú®GitHubÊêúÁ¥¢‰ª£Á†Å image-20210720193623245image-20210720..."><meta property="og:type" content="article"><meta property="og:image" content="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193623245.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-07-20T08:44:09.000Z"><meta property="article:author" content="Jack-Chen"><meta property="article:tag" content="Á¥¢ÂºïÂ∫ì"><meta property="article:tag" content="Ê®°Á≥äÊü•ËØ¢"><meta property="article:published_time" content="2023-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2024-07-20T08:44:09.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"elasticsearch","image":["https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193623245.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193633483.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193641907.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193648044.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720194008781.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720194230265.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720194547780.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195001221.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195142535.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195306484.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195531539.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720200457207.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720201115192.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720202707797.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203022172.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203534945.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203805350.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203805350.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720211019329.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720212357390.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720212123420.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720212933362.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720213345003.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720213634918.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720214555863.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720220400297.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720220503411.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720220647541.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720222110126.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720222221516.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720223049408.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720230027240.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720230811674.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720231040875.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720232105943.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720232431383.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721165326938.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721170455419.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721170720691.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721171655308.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721171838378.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721172307172.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721172645103.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721172654880.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/DKV9HZbVS6.gif","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/vZrdKAh19C.gif","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721175443234.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721182031475.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721190152134.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721190416214.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721190907320.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721191144560.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721191544750.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721193152520.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721193458182.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721193822848.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721194744183.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721195728306.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721200214690.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721200643029.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721201003229.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721202705030.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721203349633.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721203657850.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721203950559.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215640790.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215729236.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721214221057.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215923060.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215843099.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721220305140.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721220927286.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721221121266.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721221744883.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721222057212.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721223159598.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721223859419.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721224033789.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721224112708.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722091940726.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722092051994.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722092935453.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722093414542.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722093642382.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722095227059.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722095902314.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100040674.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722095648542.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100613966.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100838604.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100947292.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722101908062.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721191544750.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722102850818.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723171948228.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723172404836.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723172917636.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723173057733.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723173215728.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723192605566.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723193730799.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723203915982.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723204936367.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723205932746.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723205722303.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723210126506.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723210427878.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723211829150.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723213546183.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723213759922.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723213917524.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723214021062.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723214758392.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723214931869.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723215140735.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723215518541.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723220237930.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723220354464.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723220511090.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723215850307.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723221843816.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20200104124440086-5602723.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20200104124551912.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723222732427.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723222812619.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223008967.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223629142.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223804995.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223845754.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723224000555.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225006058.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225034637.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225112029.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225227928.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225342120.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723224354904.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225436084.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225809848.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225945963.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723230020574.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723230055974.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723230216642.png"],"datePublished":"2023-01-01T00:00:00.000Z","dateModified":"2024-07-20T08:44:09.000Z","author":[{"@type":"Person","name":"Jack-Chen","url":"https://chemnminghe.top"}]}</script><title>elasticsearch | È∫ªËä±ÁöÑÂ∞èÁ´ô</title><meta name="description" content="elasticsearch 1.ÂàùËØÜelasticsearch 1.1.‰∫ÜËß£ES 1.1.1.elasticsearchÁöÑ‰ΩúÁî® elasticsearchÊòØ‰∏ÄÊ¨æÈùûÂ∏∏Âº∫Â§ßÁöÑÂºÄÊ∫êÊêúÁ¥¢ÂºïÊìéÔºåÂÖ∑Â§áÈùûÂ∏∏Â§öÂº∫Â§ßÂäüËÉΩÔºåÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠Âø´ÈÄüÊâæÂà∞ÈúÄË¶ÅÁöÑÂÜÖÂÆπ ‰æãÂ¶ÇÔºö Âú®GitHubÊêúÁ¥¢‰ª£Á†Å image-20210720193623245image-20210720...">
    <link rel="preload" href="/assets/style-Tnuk6l9P.css" as="style"><link rel="stylesheet" href="/assets/style-Tnuk6l9P.css">
    <link rel="modulepreload" href="/assets/app-DIfhtWs6.js"><link rel="modulepreload" href="/assets/elasticsearch.html-jhB4NAER.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-BgP89GEm.js" as="script"><link rel="prefetch" href="/assets/intro.html-CPWWm5tV.js" as="script"><link rel="prefetch" href="/assets/index.html-BA-u3-gv.js" as="script"><link rel="prefetch" href="/assets/index.html-Bol0S3pn.js" as="script"><link rel="prefetch" href="/assets/page.html-x4dXdqAN.js" as="script"><link rel="prefetch" href="/assets/Âåó‰∫¨‰∏≠ÁßëËΩØ.html-DHFGv8yR.js" as="script"><link rel="prefetch" href="/assets/Âåó‰∫¨Èë´‰∏áÂÆ∂ÁßëÊäÄ.html-u5vx102K.js" as="script"><link rel="prefetch" href="/assets/Âçó‰∫¨‰∏≠ÁßëËΩØ.html-C6TE6oaE.js" as="script"><link rel="prefetch" href="/assets/Â§©Ê¥•ÂáΩÊï∞ËßÜÁïå.html-2X2NRn8p.js" as="script"><link rel="prefetch" href="/assets/ÂÆâÁ°ï‰ø°ÊÅØ(‰∏úÂåóÈÉ®).html-DOrjfiPl.js" as="script"><link rel="prefetch" href="/assets/ÁîòËÇÉ‰∏≠Â∑•ÂõΩÈôÖ.html-BdJV_m_K.js" as="script"><link rel="prefetch" href="/assets/index.html-gkwVZdrS.js" as="script"><link rel="prefetch" href="/assets/index.html-Vy74TJN-.js" as="script"><link rel="prefetch" href="/assets/disable.html-CA5NysMK.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-DSbR6TuP.js" as="script"><link rel="prefetch" href="/assets/layout.html-B4dmFmmh.js" as="script"><link rel="prefetch" href="/assets/markdown.html-BBwVi36R.js" as="script"><link rel="prefetch" href="/assets/page.html-OobTV-f3.js" as="script"><link rel="prefetch" href="/assets/JUC.html-BHpYvfHw.js" as="script"><link rel="prefetch" href="/assets/JVM.html-DZgVmp8E.js" as="script"><link rel="prefetch" href="/assets/JavaSE.html-CvjX1POc.js" as="script"><link rel="prefetch" href="/assets/JavaWeb.html-BT6QmX-_.js" as="script"><link rel="prefetch" href="/assets/vue.html-Ci3MA_Om.js" as="script"><link rel="prefetch" href="/assets/Spring.html-CyMda6Qo.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-CluIqpAj.js" as="script"><link rel="prefetch" href="/assets/SpringMVC.html-D3GtcybD.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-BKmdvv7Z.js" as="script"><link rel="prefetch" href="/assets/Docker.html-CUNKwefM.js" as="script"><link rel="prefetch" href="/assets/Git.html-Bmbtl1q1.js" as="script"><link rel="prefetch" href="/assets/Gradle.html-BTPQr1vT.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-Bg_ymiFO.js" as="script"><link rel="prefetch" href="/assets/maven.html-D_WyUCcD.js" as="script"><link rel="prefetch" href="/assets/2.html-CS_iaREK.js" as="script"><link rel="prefetch" href="/assets/Dubbo.html-Ca7DOMVf.js" as="script"><link rel="prefetch" href="/assets/zookeeper.html-CvJn1tJb.js" as="script"><link rel="prefetch" href="/assets/2.html-BVulAVnq.js" as="script"><link rel="prefetch" href="/assets/3.html-B03q_hZ-.js" as="script"><link rel="prefetch" href="/assets/È°πÁõÆ‰ªãÁªç.html-DeuErqKt.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-DCbI_GoL.js" as="script"><link rel="prefetch" href="/assets/RocketMQ.html-BAuZ_aD6.js" as="script"><link rel="prefetch" href="/assets/1.html-Ci-Tvw3x.js" as="script"><link rel="prefetch" href="/assets/2.html-BIs7LkMa.js" as="script"><link rel="prefetch" href="/assets/3.html-C1D4G5_R.js" as="script"><link rel="prefetch" href="/assets/Linux.html-DwEay6n4.js" as="script"><link rel="prefetch" href="/assets/Êìç‰ΩúÁ≥ªÁªü.html-DaSFcgWt.js" as="script"><link rel="prefetch" href="/assets/ËÆ°ÁÆóÊú∫ÁΩëÁªú.html-y7dGXoqn.js" as="script"><link rel="prefetch" href="/assets/1.html-CbN1mFqp.js" as="script"><link rel="prefetch" href="/assets/2.html-Dk-01vu6.js" as="script"><link rel="prefetch" href="/assets/3.html-DhLuB-p_.js" as="script"><link rel="prefetch" href="/assets/1.html-DeOWN7YD.js" as="script"><link rel="prefetch" href="/assets/2.html-DeFt3gdO.js" as="script"><link rel="prefetch" href="/assets/3.html-Ct1V3wd4.js" as="script"><link rel="prefetch" href="/assets/1.html-CQAXiEM4.js" as="script"><link rel="prefetch" href="/assets/2.html-C03wKpcS.js" as="script"><link rel="prefetch" href="/assets/3.html-Bngdzyj3.js" as="script"><link rel="prefetch" href="/assets/ÂéüÁêÜÁØá.html-DMRXZTa_.js" as="script"><link rel="prefetch" href="/assets/Âü∫Á°ÄÁØá.html-Dvt7cNO6.js" as="script"><link rel="prefetch" href="/assets/ÂÆûÊàòÁØá.html-D5EwZVB-.js" as="script"><link rel="prefetch" href="/assets/È´òÁ∫ßÁØá.html-CgD-zEHA.js" as="script"><link rel="prefetch" href="/assets/404.html-DFzzT_i8.js" as="script"><link rel="prefetch" href="/assets/index.html-C-xdobwP.js" as="script"><link rel="prefetch" href="/assets/index.html-DCmayMQl.js" as="script"><link rel="prefetch" href="/assets/index.html-VG2F-U3H.js" as="script"><link rel="prefetch" href="/assets/index.html-C2yKnQO3.js" as="script"><link rel="prefetch" href="/assets/index.html-Cws6HWu0.js" as="script"><link rel="prefetch" href="/assets/index.html-rXRxMsNV.js" as="script"><link rel="prefetch" href="/assets/index.html-BaMr3vcO.js" as="script"><link rel="prefetch" href="/assets/index.html-Pv843Qyw.js" as="script"><link rel="prefetch" href="/assets/index.html-P3kTIYgl.js" as="script"><link rel="prefetch" href="/assets/index.html-DMsMD_PV.js" as="script"><link rel="prefetch" href="/assets/index.html-CcqTzGAW.js" as="script"><link rel="prefetch" href="/assets/index.html-DQsEwVPy.js" as="script"><link rel="prefetch" href="/assets/index.html-D4wq5ZY2.js" as="script"><link rel="prefetch" href="/assets/index.html-BesxCHi-.js" as="script"><link rel="prefetch" href="/assets/index.html-BnSRXvrW.js" as="script"><link rel="prefetch" href="/assets/index.html-CfwSJVFL.js" as="script"><link rel="prefetch" href="/assets/index.html-D1QgKrmV.js" as="script"><link rel="prefetch" href="/assets/index.html-CAV-UFUk.js" as="script"><link rel="prefetch" href="/assets/index.html-CjDfU9di.js" as="script"><link rel="prefetch" href="/assets/index.html-CM0ZUiuJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DzyTfdoH.js" as="script"><link rel="prefetch" href="/assets/index.html-TIhcFXT_.js" as="script"><link rel="prefetch" href="/assets/index.html-BOzB57bl.js" as="script"><link rel="prefetch" href="/assets/index.html-DaGgjI41.js" as="script"><link rel="prefetch" href="/assets/index.html-B933fmFx.js" as="script"><link rel="prefetch" href="/assets/index.html-DcbVHb3D.js" as="script"><link rel="prefetch" href="/assets/index.html-DHLlk-XS.js" as="script"><link rel="prefetch" href="/assets/index.html-COmpcD73.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr8SfhjB.js" as="script"><link rel="prefetch" href="/assets/index.html-CeKg0Nsg.js" as="script"><link rel="prefetch" href="/assets/index.html-DWzxQWjc.js" as="script"><link rel="prefetch" href="/assets/index.html-NUj_gb-E.js" as="script"><link rel="prefetch" href="/assets/index.html-CWLjm0O_.js" as="script"><link rel="prefetch" href="/assets/index.html-DOvOYDNg.js" as="script"><link rel="prefetch" href="/assets/index.html-shGaeKUA.js" as="script"><link rel="prefetch" href="/assets/index.html-DhU8SUds.js" as="script"><link rel="prefetch" href="/assets/index.html-DmydSMDK.js" as="script"><link rel="prefetch" href="/assets/index.html-BSD6X9pF.js" as="script"><link rel="prefetch" href="/assets/index.html-r42KVPAJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BCAx-Y0X.js" as="script"><link rel="prefetch" href="/assets/index.html-DwwQZoVJ.js" as="script"><link rel="prefetch" href="/assets/index.html-C-uND38j.js" as="script"><link rel="prefetch" href="/assets/index.html-DgqwFQpR.js" as="script"><link rel="prefetch" href="/assets/index.html-CpE6jW68.js" as="script"><link rel="prefetch" href="/assets/index.html-DxPx4yj5.js" as="script"><link rel="prefetch" href="/assets/index.html-Bw5wrmnE.js" as="script"><link rel="prefetch" href="/assets/index.html-CbSVz722.js" as="script"><link rel="prefetch" href="/assets/index.html-CrO8KDkI.js" as="script"><link rel="prefetch" href="/assets/index.html-BFlDdxD8.js" as="script"><link rel="prefetch" href="/assets/index.html-w_F-geF8.js" as="script"><link rel="prefetch" href="/assets/index.html-CS1lFCkF.js" as="script"><link rel="prefetch" href="/assets/index.html-DiOU94xp.js" as="script"><link rel="prefetch" href="/assets/index.html-DhjS7dgm.js" as="script"><link rel="prefetch" href="/assets/index.html-D5D7spBM.js" as="script"><link rel="prefetch" href="/assets/index.html-aaL0x_OW.js" as="script"><link rel="prefetch" href="/assets/index.html-DHQAEaMa.js" as="script"><link rel="prefetch" href="/assets/index.html-CCjn8ryi.js" as="script"><link rel="prefetch" href="/assets/index.html-Bge6CkDE.js" as="script"><link rel="prefetch" href="/assets/index.html-CO1h2KW0.js" as="script"><link rel="prefetch" href="/assets/index.html-CxwOAkC4.js" as="script"><link rel="prefetch" href="/assets/index.html-DWKl_5a1.js" as="script"><link rel="prefetch" href="/assets/index.html-C4uU5xaE.js" as="script"><link rel="prefetch" href="/assets/index.html-DuhZnQYG.js" as="script"><link rel="prefetch" href="/assets/index.html-DzaWOHPr.js" as="script"><link rel="prefetch" href="/assets/index.html-B7p3HRCB.js" as="script"><link rel="prefetch" href="/assets/index.html-DQXgCKRB.js" as="script"><link rel="prefetch" href="/assets/index.html-CTvCW5j3.js" as="script"><link rel="prefetch" href="/assets/index.html-DaRXsMWH.js" as="script"><link rel="prefetch" href="/assets/index.html-VuztasKy.js" as="script"><link rel="prefetch" href="/assets/index.html-Cpmmd5xl.js" as="script"><link rel="prefetch" href="/assets/index.html-OilKZJWm.js" as="script"><link rel="prefetch" href="/assets/index.html-B9n9ZyXS.js" as="script"><link rel="prefetch" href="/assets/index.html-DLitEf6W.js" as="script"><link rel="prefetch" href="/assets/index.html-CbGOUiKq.js" as="script"><link rel="prefetch" href="/assets/index.html-D_bm0ppb.js" as="script"><link rel="prefetch" href="/assets/index.html-CXGDhy1J.js" as="script"><link rel="prefetch" href="/assets/index.html-B4IghD3l.js" as="script"><link rel="prefetch" href="/assets/index.html-BktKm8Pn.js" as="script"><link rel="prefetch" href="/assets/index.html-BKwpivH6.js" as="script"><link rel="prefetch" href="/assets/index.html-fk5dpyDB.js" as="script"><link rel="prefetch" href="/assets/index.html-C26JoPVH.js" as="script"><link rel="prefetch" href="/assets/index.html-CLzTlDHD.js" as="script"><link rel="prefetch" href="/assets/index.html-CjSRGckL.js" as="script"><link rel="prefetch" href="/assets/index.html-AEU_-rzO.js" as="script"><link rel="prefetch" href="/assets/index.html-Ay6N8muh.js" as="script"><link rel="prefetch" href="/assets/index.html-CNllM5L3.js" as="script"><link rel="prefetch" href="/assets/index.html-CzqMPKN7.js" as="script"><link rel="prefetch" href="/assets/index.html-BcHx_roQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CZSgyJo8.js" as="script"><link rel="prefetch" href="/assets/index.html-DL9Mqed8.js" as="script"><link rel="prefetch" href="/assets/index.html-LZgZhvlG.js" as="script"><link rel="prefetch" href="/assets/index.html-CyGGcb14.js" as="script"><link rel="prefetch" href="/assets/index.html-Bf4y2ks7.js" as="script"><link rel="prefetch" href="/assets/index.html-DNJX5V-9.js" as="script"><link rel="prefetch" href="/assets/index.html-DmyiUwkd.js" as="script"><link rel="prefetch" href="/assets/index.html-mIbvu8iR.js" as="script"><link rel="prefetch" href="/assets/index.html-CcHu3ZcB.js" as="script"><link rel="prefetch" href="/assets/index.html-D0LwP2z4.js" as="script"><link rel="prefetch" href="/assets/index.html-qEijYiNd.js" as="script"><link rel="prefetch" href="/assets/index.html-Br7rtkdU.js" as="script"><link rel="prefetch" href="/assets/index.html-D15NdAHh.js" as="script"><link rel="prefetch" href="/assets/index.html-BbCvs1_t.js" as="script"><link rel="prefetch" href="/assets/index.html-fW74kQNn.js" as="script"><link rel="prefetch" href="/assets/index.html-D7CjTrbk.js" as="script"><link rel="prefetch" href="/assets/index.html-CarNeXu0.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu3xfHig.js" as="script"><link rel="prefetch" href="/assets/index.html-CygwTM_W.js" as="script"><link rel="prefetch" href="/assets/index.html-B0x_2-S_.js" as="script"><link rel="prefetch" href="/assets/index.html-CxCJcdFZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Dn-xRXj0.js" as="script"><link rel="prefetch" href="/assets/index.html-CKSPNmVq.js" as="script"><link rel="prefetch" href="/assets/index.html-BKfQvD_q.js" as="script"><link rel="prefetch" href="/assets/index.html-D8Uo8i2P.js" as="script"><link rel="prefetch" href="/assets/index.html-D4DMQJTw.js" as="script"><link rel="prefetch" href="/assets/index.html-DcG632Zt.js" as="script"><link rel="prefetch" href="/assets/index.html-Uyaq7VLa.js" as="script"><link rel="prefetch" href="/assets/index.html-CCVEncXE.js" as="script"><link rel="prefetch" href="/assets/index.html-CQL0T_CS.js" as="script"><link rel="prefetch" href="/assets/index.html-Cw5s4HgM.js" as="script"><link rel="prefetch" href="/assets/index.html-DKPt4Fb5.js" as="script"><link rel="prefetch" href="/assets/index.html-C4nyuruX.js" as="script"><link rel="prefetch" href="/assets/index.html-D-S2LYAy.js" as="script"><link rel="prefetch" href="/assets/index.html-BtRtLOnq.js" as="script"><link rel="prefetch" href="/assets/index.html-Dq-hoqlh.js" as="script"><link rel="prefetch" href="/assets/index.html-BhVFFR2x.js" as="script"><link rel="prefetch" href="/assets/index.html-xTYYhsZN.js" as="script"><link rel="prefetch" href="/assets/index.html-77DKiDBw.js" as="script"><link rel="prefetch" href="/assets/index.html-BTgY_dB3.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Ë∑≥Ëá≥‰∏ªË¶ÅÂÖßÂÆπ</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/touxiang/vue-color-avatar3.png" alt><!----><span class="vp-site-name hide-in-pad">È∫ªËä±ÁöÑÂ∞èÁ´ô</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="È¶ñÈ°µ"><!--[--><span class="font-icon icon iconfont icon-shouye" style=""></span><!--]-->È¶ñÈ°µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/posts/" aria-label="Â≠¶‰π†Á¨îËÆ∞"><!--[--><span class="font-icon icon iconfont icon-xuexibiji" style=""></span><!--]-->Â≠¶‰π†Á¨îËÆ∞<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/interviewExperience/" aria-label="Èù¢ËØï‰∏ìÊ†è"><!--[--><span class="font-icon icon iconfont icon-flow-interview" style=""></span><!--]-->Èù¢ËØï‰∏ìÊ†è<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/softwareTutorial/" aria-label="ËΩØ‰ª∂ÊïôÁ®ã"><!--[--><span class="font-icon icon iconfont icon-ruanjianjiaocheng1" style=""></span><!--]-->ËΩØ‰ª∂ÊïôÁ®ã<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/aboutMe/" aria-label="ÂÖ≥‰∫éÊàë"><!--[--><span class="font-icon icon iconfont icon-guanyuzuozhe" style=""></span><!--]-->ÂÖ≥‰∫éÊàë<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/skxndbzu/JackChenBlogs" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="È¶ñÈ°µ"><!--[--><span class="font-icon icon iconfont icon-shouye" style=""></span><!--]-->È¶ñÈ°µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-meiribikan" style=""></span><span class="vp-sidebar-title">ÂøÖÁúã</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-zhenrenmianshi" style=""></span><span class="vp-sidebar-title">Èù¢ËØï‰∏ìÊ†è</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-application--web" style=""></span><span class="vp-sidebar-title">ËÆ°ÁÆóÊú∫Âü∫Á°Ä</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-xitongsheji" style=""></span><span class="vp-sidebar-title">Á≥ªÁªüËÆæËÆ°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon iconfont icon-jurassic_data" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="Êï∞ÊçÆÂ∫ì"><!---->Êï∞ÊçÆÂ∫ì<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/elasticsearch.html" aria-label="elasticsearch"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->elasticsearch<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" aria-label="MySQL"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->MySQL<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Redis</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-kaifagongju" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/developmentTool/" aria-label="ÂºÄÂèëÂ∑•ÂÖ∑"><!---->ÂºÄÂèëÂ∑•ÂÖ∑<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-yemiankuangjia_o" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="Â∏∏Áî®Ê°ÜÊû∂"><!---->Â∏∏Áî®Ê°ÜÊû∂<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-yemiankuangjia_o" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="ÂæÆÊúçÂä°Êû∂ÊûÑ"><!---->ÂæÆÊúçÂä°Êû∂ÊûÑ<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-qianduan" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="ÂâçÁ´Ø"><!---->ÂâçÁ´Ø<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-qianduan" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="Ê∂àÊÅØ‰∏≠Èó¥‰ª∂"><!---->Ê∂àÊÅØ‰∏≠Èó¥‰ª∂<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="‰ªãÁªçÈ°µ"><!--[--><span class="font-icon icon iconfont icon-fenxiangdingqijieshao" style=""></span><!--]-->‰ªãÁªçÈ°µ<!----></a></li><li><a class="auto-link external-link vp-sidebar-link" href="https://plugin-md-enhance.vuejs.press/zh/guide/content/revealjs/demo.html" aria-label="ÂπªÁÅØÁâá" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-huandengpian-04" style=""></span><!--]-->ÂπªÁÅØÁâá<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>elasticsearch</h1><div class="page-info"><span class="page-author-info" aria-label="‰ΩúËÄÖüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://chemnminghe.top" target="_blank" rel="noopener noreferrer">Jack-Chen</a></span><span property="author" content="Jack-Chen"></span></span><!----><span class="page-date-info" aria-label="ÂÜô‰ΩúÊó•ÊúüüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-01-01T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="ÈòÖËØªÊó∂Èó¥‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>Â§ßÁ∫¶ 75 ÂàÜÈíü</span><meta property="timeRequired" content="PT75M"></span><span class="page-category-info" aria-label="ÂàÜÁ±ªüåà" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color0 clickable" role="navigation">elasticsearch</span><!--]--><meta property="articleSection" content="elasticsearch"></span><span class="page-tag-info" aria-label="Ê†áÁ≠æüè∑" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color6 clickable" role="navigation">Á¥¢ÂºïÂ∫ì</span><span class="page-tag-item color7 clickable" role="navigation">Ê®°Á≥äÊü•ËØ¢</span><!--]--><meta property="keywords" content="Á¥¢ÂºïÂ∫ì,Ê®°Á≥äÊü•ËØ¢"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">Ê≠§È°µÂÜÖÂÆπ<button type="button" class="print-button" title="ÊâìÂç∞"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-1-‰∫ÜËß£es">1.1.‰∫ÜËß£ES</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-1-elasticsearchÁöÑ‰ΩúÁî®">1.1.1.elasticsearchÁöÑ‰ΩúÁî®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-2-elkÊäÄÊúØÊ†à">1.1.2.ELKÊäÄÊúØÊ†à</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-3-elasticsearchÂíålucene">1.1.3.elasticsearchÂíålucene</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-4-‰∏∫‰ªÄ‰πà‰∏çÊòØÂÖ∂‰ªñÊêúÁ¥¢ÊäÄÊúØ">1.1.4.‰∏∫‰ªÄ‰πà‰∏çÊòØÂÖ∂‰ªñÊêúÁ¥¢ÊäÄÊúØÔºü</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-5-ÊÄªÁªì">1.1.5.ÊÄªÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-2-ÂÄíÊéíÁ¥¢Âºï">1.2.ÂÄíÊéíÁ¥¢Âºï</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-1-Ê≠£ÂêëÁ¥¢Âºï">1.2.1.Ê≠£ÂêëÁ¥¢Âºï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-2-ÂÄíÊéíÁ¥¢Âºï">1.2.2.ÂÄíÊéíÁ¥¢Âºï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-3-Ê≠£ÂêëÂíåÂÄíÊéí">1.2.3.Ê≠£ÂêëÂíåÂÄíÊéí</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-3-esÁöÑ‰∏Ä‰∫õÊ¶ÇÂøµ">1.3.esÁöÑ‰∏Ä‰∫õÊ¶ÇÂøµ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-1-ÊñáÊ°£ÂíåÂ≠óÊÆµ">1.3.1.ÊñáÊ°£ÂíåÂ≠óÊÆµ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-2-Á¥¢ÂºïÂíåÊò†Â∞Ñ">1.3.2.Á¥¢ÂºïÂíåÊò†Â∞Ñ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-3-mysql‰∏éelasticsearch">1.3.3.mysql‰∏éelasticsearch</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-4-ÂÆâË£Öes„ÄÅkibana">1.4.ÂÆâË£Öes„ÄÅkibana</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-1-ÂÆâË£Ö">1.4.1.ÂÆâË£Ö</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-2-ÂàÜËØçÂô®">1.4.2.ÂàÜËØçÂô®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-3-ÊÄªÁªì">1.4.3.ÊÄªÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1-mappingÊò†Â∞ÑÂ±ûÊÄß">2.1.mappingÊò†Â∞ÑÂ±ûÊÄß</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2-Á¥¢ÂºïÂ∫ìÁöÑcrud">2.2.Á¥¢ÂºïÂ∫ìÁöÑCRUD</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-1-ÂàõÂª∫Á¥¢ÂºïÂ∫ìÂíåÊò†Â∞Ñ">2.2.1.ÂàõÂª∫Á¥¢ÂºïÂ∫ìÂíåÊò†Â∞Ñ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-2-Êü•ËØ¢Á¥¢ÂºïÂ∫ì">2.2.2.Êü•ËØ¢Á¥¢ÂºïÂ∫ì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-3-‰øÆÊîπÁ¥¢ÂºïÂ∫ì">2.2.3.‰øÆÊîπÁ¥¢ÂºïÂ∫ì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-4-Âà†Èô§Á¥¢ÂºïÂ∫ì">2.2.4.Âà†Èô§Á¥¢ÂºïÂ∫ì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-5-ÊÄªÁªì">2.2.5.ÊÄªÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1-Êñ∞Â¢ûÊñáÊ°£">3.1.Êñ∞Â¢ûÊñáÊ°£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2-Êü•ËØ¢ÊñáÊ°£">3.2.Êü•ËØ¢ÊñáÊ°£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-3-Âà†Èô§ÊñáÊ°£">3.3.Âà†Èô§ÊñáÊ°£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-4-‰øÆÊîπÊñáÊ°£">3.4.‰øÆÊîπÊñáÊ°£</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-4-1-ÂÖ®Èáè‰øÆÊîπ">3.4.1.ÂÖ®Èáè‰øÆÊîπ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-4-2-Â¢ûÈáè‰øÆÊîπ">3.4.2.Â¢ûÈáè‰øÆÊîπ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-5-ÊÄªÁªì">3.5.ÊÄªÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-0-ÂØºÂÖ•demoÂ∑•Á®ã">4.0.ÂØºÂÖ•DemoÂ∑•Á®ã</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-0-1-ÂØºÂÖ•Êï∞ÊçÆ">4.0.1.ÂØºÂÖ•Êï∞ÊçÆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-0-2-ÂØºÂÖ•È°πÁõÆ">4.0.2.ÂØºÂÖ•È°πÁõÆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-0-3-mappingÊò†Â∞ÑÂàÜÊûê">4.0.3.mappingÊò†Â∞ÑÂàÜÊûê</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-0-4-ÂàùÂßãÂåñrestclient">4.0.4.ÂàùÂßãÂåñRestClient</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-1-ÂàõÂª∫Á¥¢ÂºïÂ∫ì">4.1.ÂàõÂª∫Á¥¢ÂºïÂ∫ì</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-1-‰ª£Á†ÅËß£ËØª">4.1.1.‰ª£Á†ÅËß£ËØª</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-2-ÂÆåÊï¥Á§∫‰æã">4.1.2.ÂÆåÊï¥Á§∫‰æã</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-2-Âà†Èô§Á¥¢ÂºïÂ∫ì">4.2.Âà†Èô§Á¥¢ÂºïÂ∫ì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-3-Âà§Êñ≠Á¥¢ÂºïÂ∫ìÊòØÂê¶Â≠òÂú®">4.3.Âà§Êñ≠Á¥¢ÂºïÂ∫ìÊòØÂê¶Â≠òÂú®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-4-ÊÄªÁªì">4.4.ÊÄªÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-1-Êñ∞Â¢ûÊñáÊ°£">5.1.Êñ∞Â¢ûÊñáÊ°£</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-1-1-Á¥¢ÂºïÂ∫ìÂÆû‰ΩìÁ±ª">5.1.1.Á¥¢ÂºïÂ∫ìÂÆû‰ΩìÁ±ª</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-1-2-ËØ≠Ê≥ïËØ¥Êòé">5.1.2.ËØ≠Ê≥ïËØ¥Êòé</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-1-3-ÂÆåÊï¥‰ª£Á†Å">5.1.3.ÂÆåÊï¥‰ª£Á†Å</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-2-Êü•ËØ¢ÊñáÊ°£">5.2.Êü•ËØ¢ÊñáÊ°£</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-2-1-ËØ≠Ê≥ïËØ¥Êòé">5.2.1.ËØ≠Ê≥ïËØ¥Êòé</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-2-2-ÂÆåÊï¥‰ª£Á†Å">5.2.2.ÂÆåÊï¥‰ª£Á†Å</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-3-Âà†Èô§ÊñáÊ°£">5.3.Âà†Èô§ÊñáÊ°£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-4-‰øÆÊîπÊñáÊ°£">5.4.‰øÆÊîπÊñáÊ°£</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-4-1-ËØ≠Ê≥ïËØ¥Êòé">5.4.1.ËØ≠Ê≥ïËØ¥Êòé</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-4-2-ÂÆåÊï¥‰ª£Á†Å">5.4.2.ÂÆåÊï¥‰ª£Á†Å</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-5-ÊâπÈáèÂØºÂÖ•ÊñáÊ°£">5.5.ÊâπÈáèÂØºÂÖ•ÊñáÊ°£</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-5-1-ËØ≠Ê≥ïËØ¥Êòé">5.5.1.ËØ≠Ê≥ïËØ¥Êòé</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-5-2-ÂÆåÊï¥‰ª£Á†Å">5.5.2.ÂÆåÊï¥‰ª£Á†Å</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-6-Â∞èÁªì">5.6.Â∞èÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-1-dslÊü•ËØ¢ÂàÜÁ±ª">1.1.DSLÊü•ËØ¢ÂàÜÁ±ª</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-2-ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢">1.2.ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-1-‰ΩøÁî®Âú∫ÊôØ">1.2.1.‰ΩøÁî®Âú∫ÊôØ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-2-Âü∫Êú¨ËØ≠Ê≥ï">1.2.2.Âü∫Êú¨ËØ≠Ê≥ï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-3-Á§∫‰æã">1.2.3.Á§∫‰æã</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-4-ÊÄªÁªì">1.2.4.ÊÄªÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-3-Á≤æÂáÜÊü•ËØ¢">1.3.Á≤æÂáÜÊü•ËØ¢</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-1-termÊü•ËØ¢">1.3.1.termÊü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-2-rangeÊü•ËØ¢">1.3.2.rangeÊü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-3-ÊÄªÁªì">1.3.3.ÊÄªÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-4-Âú∞ÁêÜÂùêÊ†áÊü•ËØ¢">1.4.Âú∞ÁêÜÂùêÊ†áÊü•ËØ¢</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-1-Áü©ÂΩ¢ËåÉÂõ¥Êü•ËØ¢">1.4.1.Áü©ÂΩ¢ËåÉÂõ¥Êü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-2-ÈôÑËøëÊü•ËØ¢">1.4.2.ÈôÑËøëÊü•ËØ¢</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-5-Â§çÂêàÊü•ËØ¢">1.5.Â§çÂêàÊü•ËØ¢</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-5-1-Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜ">1.5.1.Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-5-2-ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢">1.5.2.ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-5-3-Â∏ÉÂ∞îÊü•ËØ¢">1.5.3.Â∏ÉÂ∞îÊü•ËØ¢</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1-ÊéíÂ∫è">2.1.ÊéíÂ∫è</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-1-1-ÊôÆÈÄöÂ≠óÊÆµÊéíÂ∫è">2.1.1.ÊôÆÈÄöÂ≠óÊÆµÊéíÂ∫è</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-1-2-Âú∞ÁêÜÂùêÊ†áÊéíÂ∫è">2.1.2.Âú∞ÁêÜÂùêÊ†áÊéíÂ∫è</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2-ÂàÜÈ°µ">2.2.ÂàÜÈ°µ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-1-Âü∫Êú¨ÁöÑÂàÜÈ°µ">2.2.1.Âü∫Êú¨ÁöÑÂàÜÈ°µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-2-Ê∑±Â∫¶ÂàÜÈ°µÈóÆÈ¢ò">2.2.2.Ê∑±Â∫¶ÂàÜÈ°µÈóÆÈ¢ò</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-3-Â∞èÁªì">2.2.3.Â∞èÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3-È´ò‰∫Æ">2.3.È´ò‰∫Æ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-1-È´ò‰∫ÆÂéüÁêÜ">2.3.1.È´ò‰∫ÆÂéüÁêÜ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-2-ÂÆûÁé∞È´ò‰∫Æ">2.3.2.ÂÆûÁé∞È´ò‰∫Æ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4-ÊÄªÁªì">2.4.ÊÄªÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1-Âø´ÈÄüÂÖ•Èó®">3.1.Âø´ÈÄüÂÖ•Èó®</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-1-ÂèëËµ∑Êü•ËØ¢ËØ∑Ê±Ç">3.1.1.ÂèëËµ∑Êü•ËØ¢ËØ∑Ê±Ç</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-2-Ëß£ÊûêÂìçÂ∫î">3.1.2.Ëß£ÊûêÂìçÂ∫î</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-3-ÂÆåÊï¥‰ª£Á†Å">3.1.3.ÂÆåÊï¥‰ª£Á†Å</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-4-Â∞èÁªì">3.1.4.Â∞èÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2-matchÊü•ËØ¢">3.2.matchÊü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-3-Á≤æÁ°ÆÊü•ËØ¢">3.3.Á≤æÁ°ÆÊü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-4-Â∏ÉÂ∞îÊü•ËØ¢">3.4.Â∏ÉÂ∞îÊü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-5-ÊéíÂ∫è„ÄÅÂàÜÈ°µ">3.5.ÊéíÂ∫è„ÄÅÂàÜÈ°µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-6-È´ò‰∫Æ">3.6.È´ò‰∫Æ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-6-1-È´ò‰∫ÆËØ∑Ê±ÇÊûÑÂª∫">3.6.1.È´ò‰∫ÆËØ∑Ê±ÇÊûÑÂª∫</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-6-2-È´ò‰∫ÆÁªìÊûúËß£Êûê">3.6.2.È´ò‰∫ÆÁªìÊûúËß£Êûê</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-1-ÈÖíÂ∫óÊêúÁ¥¢ÂíåÂàÜÈ°µ">4.1.ÈÖíÂ∫óÊêúÁ¥¢ÂíåÂàÜÈ°µ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-1-ÈúÄÊ±ÇÂàÜÊûê">4.1.1.ÈúÄÊ±ÇÂàÜÊûê</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-2-ÂÆö‰πâÂÆû‰ΩìÁ±ª">4.1.2.ÂÆö‰πâÂÆû‰ΩìÁ±ª</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-3-ÂÆö‰πâcontroller">4.1.3.ÂÆö‰πâcontroller</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-4-ÂÆûÁé∞ÊêúÁ¥¢‰∏öÂä°">4.1.4.ÂÆûÁé∞ÊêúÁ¥¢‰∏öÂä°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-2-ÈÖíÂ∫óÁªìÊûúËøáÊª§">4.2.ÈÖíÂ∫óÁªìÊûúËøáÊª§</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-1-ÈúÄÊ±ÇÂàÜÊûê">4.2.1.ÈúÄÊ±ÇÂàÜÊûê</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-2-‰øÆÊîπÂÆû‰ΩìÁ±ª">4.2.2.‰øÆÊîπÂÆû‰ΩìÁ±ª</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-3-‰øÆÊîπÊêúÁ¥¢‰∏öÂä°">4.2.3.‰øÆÊîπÊêúÁ¥¢‰∏öÂä°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-3-ÊàëÂë®ËæπÁöÑÈÖíÂ∫ó">4.3.ÊàëÂë®ËæπÁöÑÈÖíÂ∫ó</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-1-ÈúÄÊ±ÇÂàÜÊûê">4.3.1.ÈúÄÊ±ÇÂàÜÊûê</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-2-‰øÆÊîπÂÆû‰ΩìÁ±ª">4.3.2.‰øÆÊîπÂÆû‰ΩìÁ±ª</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-3-Ë∑ùÁ¶ªÊéíÂ∫èapi">4.3.3.Ë∑ùÁ¶ªÊéíÂ∫èAPI</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-4-Ê∑ªÂä†Ë∑ùÁ¶ªÊéíÂ∫è">4.3.4.Ê∑ªÂä†Ë∑ùÁ¶ªÊéíÂ∫è</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-5-ÊéíÂ∫èË∑ùÁ¶ªÊòæÁ§∫">4.3.5.ÊéíÂ∫èË∑ùÁ¶ªÊòæÁ§∫</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-4-ÈÖíÂ∫óÁ´û‰ª∑ÊéíÂêç">4.4.ÈÖíÂ∫óÁ´û‰ª∑ÊéíÂêç</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-4-1-ÈúÄÊ±ÇÂàÜÊûê">4.4.1.ÈúÄÊ±ÇÂàÜÊûê</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-4-2-‰øÆÊîπhoteldocÂÆû‰Ωì">4.4.2.‰øÆÊîπHotelDocÂÆû‰Ωì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-4-3-Ê∑ªÂä†ÂπøÂëäÊ†áËÆ∞">4.4.3.Ê∑ªÂä†ÂπøÂëäÊ†áËÆ∞</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-4-4-Ê∑ªÂä†ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢">4.4.4.Ê∑ªÂä†ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-1-ËÅöÂêàÁöÑÁßçÁ±ª">1.1.ËÅöÂêàÁöÑÁßçÁ±ª</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-2-dslÂÆûÁé∞ËÅöÂêà">1.2.DSLÂÆûÁé∞ËÅöÂêà</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-1-bucketËÅöÂêàËØ≠Ê≥ï">1.2.1.BucketËÅöÂêàËØ≠Ê≥ï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-2-ËÅöÂêàÁªìÊûúÊéíÂ∫è">1.2.2.ËÅöÂêàÁªìÊûúÊéíÂ∫è</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-3-ÈôêÂÆöËÅöÂêàËåÉÂõ¥">1.2.3.ÈôêÂÆöËÅöÂêàËåÉÂõ¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-4-metricËÅöÂêàËØ≠Ê≥ï">1.2.4.MetricËÅöÂêàËØ≠Ê≥ï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-5-Â∞èÁªì">1.2.5.Â∞èÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-3-restapiÂÆûÁé∞ËÅöÂêà">1.3.RestAPIÂÆûÁé∞ËÅöÂêà</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-1-apiËØ≠Ê≥ï">1.3.1.APIËØ≠Ê≥ï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-2-‰∏öÂä°ÈúÄÊ±Ç">1.3.2.‰∏öÂä°ÈúÄÊ±Ç</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-3-‰∏öÂä°ÂÆûÁé∞">1.3.3.‰∏öÂä°ÂÆûÁé∞</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1-ÊãºÈü≥ÂàÜËØçÂô®">2.1.ÊãºÈü≥ÂàÜËØçÂô®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2-Ëá™ÂÆö‰πâÂàÜËØçÂô®">2.2.Ëá™ÂÆö‰πâÂàÜËØçÂô®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3-Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢">2.3.Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4-ÂÆûÁé∞ÈÖíÂ∫óÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®">2.4.ÂÆûÁé∞ÈÖíÂ∫óÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-1-‰øÆÊîπÈÖíÂ∫óÊò†Â∞ÑÁªìÊûÑ">2.4.1.‰øÆÊîπÈÖíÂ∫óÊò†Â∞ÑÁªìÊûÑ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-2-‰øÆÊîπhoteldocÂÆû‰Ωì">2.4.2.‰øÆÊîπHotelDocÂÆû‰Ωì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-3-ÈáçÊñ∞ÂØºÂÖ•">2.4.3.ÈáçÊñ∞ÂØºÂÖ•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-4-Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢ÁöÑjavaapi">2.4.4.Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢ÁöÑJavaAPI</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-5-ÂÆûÁé∞ÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®">2.4.5.ÂÆûÁé∞ÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1-ÊÄùË∑ØÂàÜÊûê">3.1.ÊÄùË∑ØÂàÜÊûê</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-1-ÂêåÊ≠•Ë∞ÉÁî®">3.1.1.ÂêåÊ≠•Ë∞ÉÁî®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-2-ÂºÇÊ≠•ÈÄöÁü•">3.1.2.ÂºÇÊ≠•ÈÄöÁü•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-3-ÁõëÂê¨binlog">3.1.3.ÁõëÂê¨binlog</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-4-ÈÄâÊã©">3.1.4.ÈÄâÊã©</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2-ÂÆûÁé∞Êï∞ÊçÆÂêåÊ≠•">3.2.ÂÆûÁé∞Êï∞ÊçÆÂêåÊ≠•</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-1-ÊÄùË∑Ø">3.2.1.ÊÄùË∑Ø</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-2-ÂØºÂÖ•demo">3.2.2.ÂØºÂÖ•demo</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-3-Â£∞Êòé‰∫§Êç¢Êú∫„ÄÅÈòüÂàó">3.2.3.Â£∞Êòé‰∫§Êç¢Êú∫„ÄÅÈòüÂàó</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-4-ÂèëÈÄÅmqÊ∂àÊÅØ">3.2.4.ÂèëÈÄÅMQÊ∂àÊÅØ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-5-Êé•Êî∂mqÊ∂àÊÅØ">3.2.5.Êé•Êî∂MQÊ∂àÊÅØ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-1-Êê≠Âª∫esÈõÜÁæ§">4.1.Êê≠Âª∫ESÈõÜÁæ§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-2-ÈõÜÁæ§ËÑëË£ÇÈóÆÈ¢ò">4.2.ÈõÜÁæ§ËÑëË£ÇÈóÆÈ¢ò</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-1-ÈõÜÁæ§ËÅåË¥£ÂàíÂàÜ">4.2.1.ÈõÜÁæ§ËÅåË¥£ÂàíÂàÜ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-2-ËÑëË£ÇÈóÆÈ¢ò">4.2.2.ËÑëË£ÇÈóÆÈ¢ò</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-3-Â∞èÁªì">4.2.3.Â∞èÁªì</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-3-ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®">4.3.ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-1-ÂàÜÁâáÂ≠òÂÇ®ÊµãËØï">4.3.1.ÂàÜÁâáÂ≠òÂÇ®ÊµãËØï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-2-ÂàÜÁâáÂ≠òÂÇ®ÂéüÁêÜ">4.3.2.ÂàÜÁâáÂ≠òÂÇ®ÂéüÁêÜ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-4-ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÊü•ËØ¢">4.4.ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÊü•ËØ¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-5-ÈõÜÁæ§ÊïÖÈöúËΩ¨Áßª">4.5.ÈõÜÁæ§ÊïÖÈöúËΩ¨Áßª</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch"><span>elasticsearch</span></a></h1><h1 id="_1-ÂàùËØÜelasticsearch" tabindex="-1"><a class="header-anchor" href="#_1-ÂàùËØÜelasticsearch"><span>1.ÂàùËØÜelasticsearch</span></a></h1><h2 id="_1-1-‰∫ÜËß£es" tabindex="-1"><a class="header-anchor" href="#_1-1-‰∫ÜËß£es"><span>1.1.‰∫ÜËß£ES</span></a></h2><h3 id="_1-1-1-elasticsearchÁöÑ‰ΩúÁî®" tabindex="-1"><a class="header-anchor" href="#_1-1-1-elasticsearchÁöÑ‰ΩúÁî®"><span>1.1.1.elasticsearchÁöÑ‰ΩúÁî®</span></a></h3><p>elasticsearchÊòØ‰∏ÄÊ¨æÈùûÂ∏∏Âº∫Â§ßÁöÑÂºÄÊ∫êÊêúÁ¥¢ÂºïÊìéÔºåÂÖ∑Â§áÈùûÂ∏∏Â§öÂº∫Â§ßÂäüËÉΩÔºåÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠Âø´ÈÄüÊâæÂà∞ÈúÄË¶ÅÁöÑÂÜÖÂÆπ</p><p>‰æãÂ¶ÇÔºö</p><ul><li><p>Âú®GitHubÊêúÁ¥¢‰ª£Á†Å</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193623245.png" alt="image-20210720193623245" tabindex="0" loading="lazy"><figcaption>image-20210720193623245</figcaption></figure></li><li><p>Âú®ÁîµÂïÜÁΩëÁ´ôÊêúÁ¥¢ÂïÜÂìÅ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193633483.png" alt="image-20210720193633483" tabindex="0" loading="lazy"><figcaption>image-20210720193633483</figcaption></figure></li><li><p>Âú®ÁôæÂ∫¶ÊêúÁ¥¢Á≠îÊ°à</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193641907.png" alt="image-20210720193641907" tabindex="0" loading="lazy"><figcaption>image-20210720193641907</figcaption></figure></li><li><p>Âú®ÊâìËΩ¶ËΩØ‰ª∂ÊêúÁ¥¢ÈôÑËøëÁöÑËΩ¶</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720193648044.png" alt="image-20210720193648044" tabindex="0" loading="lazy"><figcaption>image-20210720193648044</figcaption></figure></li></ul><h3 id="_1-1-2-elkÊäÄÊúØÊ†à" tabindex="-1"><a class="header-anchor" href="#_1-1-2-elkÊäÄÊúØÊ†à"><span>1.1.2.ELKÊäÄÊúØÊ†à</span></a></h3><p>elasticsearchÁªìÂêàkibana„ÄÅLogstash„ÄÅBeatsÔºå‰πüÂ∞±ÊòØelastic stackÔºàELKÔºâ„ÄÇË¢´ÂπøÊ≥õÂ∫îÁî®Âú®Êó•ÂøóÊï∞ÊçÆÂàÜÊûê„ÄÅÂÆûÊó∂ÁõëÊéßÁ≠âÈ¢ÜÂüüÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720194008781.png" alt="image-20210720194008781" tabindex="0" loading="lazy"><figcaption>image-20210720194008781</figcaption></figure><p>ËÄåelasticsearchÊòØelastic stackÁöÑÊ†∏ÂøÉÔºåË¥üË¥£Â≠òÂÇ®„ÄÅÊêúÁ¥¢„ÄÅÂàÜÊûêÊï∞ÊçÆ„ÄÇ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720194230265.png" alt="image-20210720194230265" tabindex="0" loading="lazy"><figcaption>image-20210720194230265</figcaption></figure><h3 id="_1-1-3-elasticsearchÂíålucene" tabindex="-1"><a class="header-anchor" href="#_1-1-3-elasticsearchÂíålucene"><span>1.1.3.elasticsearchÂíålucene</span></a></h3><p>elasticsearchÂ∫ïÂ±ÇÊòØÂü∫‰∫é<strong>lucene</strong>Êù•ÂÆûÁé∞ÁöÑ„ÄÇ</p><p><strong>Lucene</strong>ÊòØ‰∏Ä‰∏™JavaËØ≠Ë®ÄÁöÑÊêúÁ¥¢ÂºïÊìéÁ±ªÂ∫ìÔºåÊòØApacheÂÖ¨Âè∏ÁöÑÈ°∂Á∫ßÈ°πÁõÆÔºåÁî±DougCutting‰∫é1999Âπ¥Á†îÂèë„ÄÇÂÆòÁΩëÂú∞ÂùÄÔºöhttps://lucene.apache.org/ „ÄÇ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720194547780.png" alt="image-20210720194547780" tabindex="0" loading="lazy"><figcaption>image-20210720194547780</figcaption></figure><p><strong>elasticsearch</strong>ÁöÑÂèëÂ±ïÂéÜÂè≤Ôºö</p><ul><li>2004Âπ¥Shay BanonÂü∫‰∫éLuceneÂºÄÂèë‰∫ÜCompass</li><li>2010Âπ¥Shay Banon ÈáçÂÜô‰∫ÜCompassÔºåÂèñÂêç‰∏∫Elasticsearch„ÄÇ</li></ul><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195001221.png" alt="image-20210720195001221" tabindex="0" loading="lazy"><figcaption>image-20210720195001221</figcaption></figure><h3 id="_1-1-4-‰∏∫‰ªÄ‰πà‰∏çÊòØÂÖ∂‰ªñÊêúÁ¥¢ÊäÄÊúØ" tabindex="-1"><a class="header-anchor" href="#_1-1-4-‰∏∫‰ªÄ‰πà‰∏çÊòØÂÖ∂‰ªñÊêúÁ¥¢ÊäÄÊúØ"><span>1.1.4.‰∏∫‰ªÄ‰πà‰∏çÊòØÂÖ∂‰ªñÊêúÁ¥¢ÊäÄÊúØÔºü</span></a></h3><p>ÁõÆÂâçÊØîËæÉÁü•ÂêçÁöÑÊêúÁ¥¢ÂºïÊìéÊäÄÊúØÊéíÂêçÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195142535.png" alt="image-20210720195142535" tabindex="0" loading="lazy"><figcaption>image-20210720195142535</figcaption></figure><p>ËôΩÁÑ∂Âú®Êó©ÊúüÔºåApache SolrÊòØÊúÄ‰∏ªË¶ÅÁöÑÊêúÁ¥¢ÂºïÊìéÊäÄÊúØÔºå‰ΩÜÈöèÁùÄÂèëÂ±ïelasticsearchÂ∑≤ÁªèÊ∏êÊ∏êË∂ÖË∂ä‰∫ÜSolrÔºåÁã¨Âç†È≥åÂ§¥Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195306484.png" alt="image-20210720195306484" tabindex="0" loading="lazy"><figcaption>image-20210720195306484</figcaption></figure><h3 id="_1-1-5-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_1-1-5-ÊÄªÁªì"><span>1.1.5.ÊÄªÁªì</span></a></h3><p>‰ªÄ‰πàÊòØelasticsearchÔºü</p><ul><li>‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìéÔºåÂèØ‰ª•Áî®Êù•ÂÆûÁé∞ÊêúÁ¥¢„ÄÅÊó•ÂøóÁªüËÆ°„ÄÅÂàÜÊûê„ÄÅÁ≥ªÁªüÁõëÊéßÁ≠âÂäüËÉΩ</li></ul><p>‰ªÄ‰πàÊòØelastic stackÔºàELKÔºâÔºü</p><ul><li>ÊòØ‰ª•elasticsearch‰∏∫Ê†∏ÂøÉÁöÑÊäÄÊúØÊ†àÔºåÂåÖÊã¨beats„ÄÅLogstash„ÄÅkibana„ÄÅelasticsearch</li></ul><p>‰ªÄ‰πàÊòØLuceneÔºü</p><ul><li>ÊòØApacheÁöÑÂºÄÊ∫êÊêúÁ¥¢ÂºïÊìéÁ±ªÂ∫ìÔºåÊèê‰æõ‰∫ÜÊêúÁ¥¢ÂºïÊìéÁöÑÊ†∏ÂøÉAPI</li></ul><h2 id="_1-2-ÂÄíÊéíÁ¥¢Âºï" tabindex="-1"><a class="header-anchor" href="#_1-2-ÂÄíÊéíÁ¥¢Âºï"><span>1.2.ÂÄíÊéíÁ¥¢Âºï</span></a></h2><p>ÂÄíÊéíÁ¥¢ÂºïÁöÑÊ¶ÇÂøµÊòØÂü∫‰∫éMySQLËøôÊ†∑ÁöÑÊ≠£ÂêëÁ¥¢ÂºïËÄåË®ÄÁöÑ„ÄÇ</p><h3 id="_1-2-1-Ê≠£ÂêëÁ¥¢Âºï" tabindex="-1"><a class="header-anchor" href="#_1-2-1-Ê≠£ÂêëÁ¥¢Âºï"><span>1.2.1.Ê≠£ÂêëÁ¥¢Âºï</span></a></h3><p>ÈÇ£‰πà‰ªÄ‰πàÊòØÊ≠£ÂêëÁ¥¢ÂºïÂë¢Ôºü‰æãÂ¶ÇÁªô‰∏ãË°®Ôºàtb_goodsÔºâ‰∏≠ÁöÑidÂàõÂª∫Á¥¢ÂºïÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720195531539.png" alt="image-20210720195531539" tabindex="0" loading="lazy"><figcaption>image-20210720195531539</figcaption></figure><p>Â¶ÇÊûúÊòØÊ†πÊçÆidÊü•ËØ¢ÔºåÈÇ£‰πàÁõ¥Êé•Ëµ∞Á¥¢ÂºïÔºåÊü•ËØ¢ÈÄüÂ∫¶ÈùûÂ∏∏Âø´„ÄÇ</p><p>‰ΩÜÂ¶ÇÊûúÊòØÂü∫‰∫étitleÂÅöÊ®°Á≥äÊü•ËØ¢ÔºåÂè™ËÉΩÊòØÈÄêË°åÊâ´ÊèèÊï∞ÊçÆÔºåÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><p>1ÔºâÁî®Êà∑ÊêúÁ¥¢Êï∞ÊçÆÔºåÊù°‰ª∂ÊòØtitleÁ¨¶Âêà<code>&quot;%ÊâãÊú∫%&quot;</code></p><p>2ÔºâÈÄêË°åËé∑ÂèñÊï∞ÊçÆÔºåÊØîÂ¶Çid‰∏∫1ÁöÑÊï∞ÊçÆ</p><p>3ÔºâÂà§Êñ≠Êï∞ÊçÆ‰∏≠ÁöÑtitleÊòØÂê¶Á¨¶ÂêàÁî®Êà∑ÊêúÁ¥¢Êù°‰ª∂</p><p>4ÔºâÂ¶ÇÊûúÁ¨¶ÂêàÂàôÊîæÂÖ•ÁªìÊûúÈõÜÔºå‰∏çÁ¨¶ÂêàÂàô‰∏¢ÂºÉ„ÄÇÂõûÂà∞Ê≠•È™§1</p><p>ÈÄêË°åÊâ´ÊèèÔºå‰πüÂ∞±ÊòØÂÖ®Ë°®Êâ´ÊèèÔºåÈöèÁùÄÊï∞ÊçÆÈáèÂ¢ûÂä†ÔºåÂÖ∂Êü•ËØ¢ÊïàÁéá‰πü‰ºöË∂äÊù•Ë∂ä‰Ωé„ÄÇÂΩìÊï∞ÊçÆÈáèËææÂà∞Êï∞Áôæ‰∏áÊó∂ÔºåÂ∞±ÊòØ‰∏ÄÂú∫ÁÅæÈöæ„ÄÇ</p><h3 id="_1-2-2-ÂÄíÊéíÁ¥¢Âºï" tabindex="-1"><a class="header-anchor" href="#_1-2-2-ÂÄíÊéíÁ¥¢Âºï"><span>1.2.2.ÂÄíÊéíÁ¥¢Âºï</span></a></h3><p>ÂÄíÊéíÁ¥¢Âºï‰∏≠Êúâ‰∏§‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÊ¶ÇÂøµÔºö</p><ul><li>ÊñáÊ°£Ôºà<code>Document</code>ÔºâÔºöÁî®Êù•ÊêúÁ¥¢ÁöÑÊï∞ÊçÆÔºåÂÖ∂‰∏≠ÁöÑÊØè‰∏ÄÊù°Êï∞ÊçÆÂ∞±ÊòØ‰∏Ä‰∏™ÊñáÊ°£„ÄÇ‰æãÂ¶Ç‰∏Ä‰∏™ÁΩëÈ°µ„ÄÅ‰∏Ä‰∏™ÂïÜÂìÅ‰ø°ÊÅØ</li><li>ËØçÊù°Ôºà<code>Term</code>ÔºâÔºöÂØπÊñáÊ°£Êï∞ÊçÆÊàñÁî®Êà∑ÊêúÁ¥¢Êï∞ÊçÆÔºåÂà©Áî®ÊüêÁßçÁÆóÊ≥ïÂàÜËØçÔºåÂæóÂà∞ÁöÑÂÖ∑Â§áÂê´‰πâÁöÑËØçËØ≠Â∞±ÊòØËØçÊù°„ÄÇ‰æãÂ¶ÇÔºöÊàëÊòØ‰∏≠ÂõΩ‰∫∫ÔºåÂ∞±ÂèØ‰ª•ÂàÜ‰∏∫ÔºöÊàë„ÄÅÊòØ„ÄÅ‰∏≠ÂõΩ‰∫∫„ÄÅ‰∏≠ÂõΩ„ÄÅÂõΩ‰∫∫ËøôÊ†∑ÁöÑÂá†‰∏™ËØçÊù°</li></ul><p><strong>ÂàõÂª∫ÂÄíÊéíÁ¥¢Âºï</strong>ÊòØÂØπÊ≠£ÂêëÁ¥¢ÂºïÁöÑ‰∏ÄÁßçÁâπÊÆäÂ§ÑÁêÜÔºåÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ul><li>Â∞ÜÊØè‰∏Ä‰∏™ÊñáÊ°£ÁöÑÊï∞ÊçÆÂà©Áî®ÁÆóÊ≥ïÂàÜËØçÔºåÂæóÂà∞‰∏Ä‰∏™‰∏™ËØçÊù°</li><li>ÂàõÂª∫Ë°®ÔºåÊØèË°åÊï∞ÊçÆÂåÖÊã¨ËØçÊù°„ÄÅËØçÊù°ÊâÄÂú®ÊñáÊ°£id„ÄÅ‰ΩçÁΩÆÁ≠â‰ø°ÊÅØ</li><li>Âõ†‰∏∫ËØçÊù°ÂîØ‰∏ÄÊÄßÔºåÂèØ‰ª•ÁªôËØçÊù°ÂàõÂª∫Á¥¢ÂºïÔºå‰æãÂ¶ÇhashË°®ÁªìÊûÑÁ¥¢Âºï</li></ul><p>Â¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720200457207.png" alt="image-20210720200457207" tabindex="0" loading="lazy"><figcaption>image-20210720200457207</figcaption></figure><p>ÂÄíÊéíÁ¥¢ÂºïÁöÑ<strong>ÊêúÁ¥¢ÊµÅÁ®ã</strong>Â¶Ç‰∏ãÔºà‰ª•ÊêúÁ¥¢&quot;Âçé‰∏∫ÊâãÊú∫&quot;‰∏∫‰æãÔºâÔºö</p><p>1ÔºâÁî®Êà∑ËæìÂÖ•Êù°‰ª∂<code>&quot;Âçé‰∏∫ÊâãÊú∫&quot;</code>ËøõË°åÊêúÁ¥¢„ÄÇ</p><p>2ÔºâÂØπÁî®Êà∑ËæìÂÖ•ÂÜÖÂÆπ<strong>ÂàÜËØç</strong>ÔºåÂæóÂà∞ËØçÊù°Ôºö<code>Âçé‰∏∫</code>„ÄÅ<code>ÊâãÊú∫</code>„ÄÇ</p><p>3ÔºâÊãøÁùÄËØçÊù°Âú®ÂÄíÊéíÁ¥¢Âºï‰∏≠Êü•ÊâæÔºåÂèØ‰ª•ÂæóÂà∞ÂåÖÂê´ËØçÊù°ÁöÑÊñáÊ°£idÔºö1„ÄÅ2„ÄÅ3„ÄÇ</p><p>4ÔºâÊãøÁùÄÊñáÊ°£idÂà∞Ê≠£ÂêëÁ¥¢Âºï‰∏≠Êü•ÊâæÂÖ∑‰ΩìÊñáÊ°£„ÄÇ</p><p>Â¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720201115192.png" alt="image-20210720201115192" tabindex="0" loading="lazy"><figcaption>image-20210720201115192</figcaption></figure><p>ËôΩÁÑ∂Ë¶ÅÂÖàÊü•ËØ¢ÂÄíÊéíÁ¥¢ÂºïÔºåÂÜçÊü•ËØ¢ÂÄíÊéíÁ¥¢ÂºïÔºå‰ΩÜÊòØÊó†ËÆ∫ÊòØËØçÊù°„ÄÅËøòÊòØÊñáÊ°£idÈÉΩÂª∫Á´ã‰∫ÜÁ¥¢ÂºïÔºåÊü•ËØ¢ÈÄüÂ∫¶ÈùûÂ∏∏Âø´ÔºÅÊó†ÈúÄÂÖ®Ë°®Êâ´Êèè„ÄÇ</p><h3 id="_1-2-3-Ê≠£ÂêëÂíåÂÄíÊéí" tabindex="-1"><a class="header-anchor" href="#_1-2-3-Ê≠£ÂêëÂíåÂÄíÊéí"><span>1.2.3.Ê≠£ÂêëÂíåÂÄíÊéí</span></a></h3><p>ÈÇ£‰πà‰∏∫‰ªÄ‰πà‰∏Ä‰∏™Âè´ÂÅöÊ≠£ÂêëÁ¥¢ÂºïÔºå‰∏Ä‰∏™Âè´ÂÅöÂÄíÊéíÁ¥¢ÂºïÂë¢Ôºü</p><ul><li><p><strong>Ê≠£ÂêëÁ¥¢Âºï</strong>ÊòØÊúÄ‰º†ÁªüÁöÑÔºåÊ†πÊçÆidÁ¥¢ÂºïÁöÑÊñπÂºè„ÄÇ‰ΩÜÊ†πÊçÆËØçÊù°Êü•ËØ¢Êó∂ÔºåÂøÖÈ°ªÂÖàÈÄêÊù°Ëé∑ÂèñÊØè‰∏™ÊñáÊ°£ÔºåÁÑ∂ÂêéÂà§Êñ≠ÊñáÊ°£‰∏≠ÊòØÂê¶ÂåÖÂê´ÊâÄÈúÄË¶ÅÁöÑËØçÊù°ÔºåÊòØ<strong>Ê†πÊçÆÊñáÊ°£ÊâæËØçÊù°ÁöÑËøáÁ®ã</strong>„ÄÇ</p></li><li><p>ËÄå<strong>ÂÄíÊéíÁ¥¢Âºï</strong>ÂàôÁõ∏ÂèçÔºåÊòØÂÖàÊâæÂà∞Áî®Êà∑Ë¶ÅÊêúÁ¥¢ÁöÑËØçÊù°ÔºåÊ†πÊçÆËØçÊù°ÂæóÂà∞‰øùÊä§ËØçÊù°ÁöÑÊñáÊ°£ÁöÑidÔºåÁÑ∂ÂêéÊ†πÊçÆidËé∑ÂèñÊñáÊ°£„ÄÇÊòØ<strong>Ê†πÊçÆËØçÊù°ÊâæÊñáÊ°£ÁöÑËøáÁ®ã</strong>„ÄÇ</p></li></ul><p>ÊòØ‰∏çÊòØÊÅ∞Â•ΩÂèçËøáÊù•‰∫ÜÔºü</p><p>ÈÇ£‰πà‰∏§ËÄÖÊñπÂºèÁöÑ‰ºòÁº∫ÁÇπÊòØ‰ªÄ‰πàÂë¢Ôºü</p><p><strong>Ê≠£ÂêëÁ¥¢Âºï</strong>Ôºö</p><ul><li>‰ºòÁÇπÔºö <ul><li>ÂèØ‰ª•ÁªôÂ§ö‰∏™Â≠óÊÆµÂàõÂª∫Á¥¢Âºï</li><li>Ê†πÊçÆÁ¥¢ÂºïÂ≠óÊÆµÊêúÁ¥¢„ÄÅÊéíÂ∫èÈÄüÂ∫¶ÈùûÂ∏∏Âø´</li></ul></li><li>Áº∫ÁÇπÔºö <ul><li>Ê†πÊçÆÈùûÁ¥¢ÂºïÂ≠óÊÆµÔºåÊàñËÄÖÁ¥¢ÂºïÂ≠óÊÆµ‰∏≠ÁöÑÈÉ®ÂàÜËØçÊù°Êü•ÊâæÊó∂ÔºåÂè™ËÉΩÂÖ®Ë°®Êâ´Êèè„ÄÇ</li></ul></li></ul><p><strong>ÂÄíÊéíÁ¥¢Âºï</strong>Ôºö</p><ul><li>‰ºòÁÇπÔºö <ul><li>Ê†πÊçÆËØçÊù°ÊêúÁ¥¢„ÄÅÊ®°Á≥äÊêúÁ¥¢Êó∂ÔºåÈÄüÂ∫¶ÈùûÂ∏∏Âø´</li></ul></li><li>Áº∫ÁÇπÔºö <ul><li>Âè™ËÉΩÁªôËØçÊù°ÂàõÂª∫Á¥¢ÂºïÔºåËÄå‰∏çÊòØÂ≠óÊÆµ</li><li>Êó†Ê≥ïÊ†πÊçÆÂ≠óÊÆµÂÅöÊéíÂ∫è</li></ul></li></ul><h2 id="_1-3-esÁöÑ‰∏Ä‰∫õÊ¶ÇÂøµ" tabindex="-1"><a class="header-anchor" href="#_1-3-esÁöÑ‰∏Ä‰∫õÊ¶ÇÂøµ"><span>1.3.esÁöÑ‰∏Ä‰∫õÊ¶ÇÂøµ</span></a></h2><p>elasticsearch‰∏≠ÊúâÂæàÂ§öÁã¨ÊúâÁöÑÊ¶ÇÂøµÔºå‰∏émysql‰∏≠Áï•ÊúâÂ∑ÆÂà´Ôºå‰ΩÜ‰πüÊúâÁõ∏‰ºº‰πãÂ§Ñ„ÄÇ</p><h3 id="_1-3-1-ÊñáÊ°£ÂíåÂ≠óÊÆµ" tabindex="-1"><a class="header-anchor" href="#_1-3-1-ÊñáÊ°£ÂíåÂ≠óÊÆµ"><span>1.3.1.ÊñáÊ°£ÂíåÂ≠óÊÆµ</span></a></h3><p>elasticsearchÊòØÈù¢Âêë**ÊñáÊ°£ÔºàDocumentÔºâ**Â≠òÂÇ®ÁöÑÔºåÂèØ‰ª•ÊòØÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰∏ÄÊù°ÂïÜÂìÅÊï∞ÊçÆÔºå‰∏Ä‰∏™ËÆ¢Âçï‰ø°ÊÅØ„ÄÇÊñáÊ°£Êï∞ÊçÆ‰ºöË¢´Â∫èÂàóÂåñ‰∏∫jsonÊ†ºÂºèÂêéÂ≠òÂÇ®Âú®elasticsearch‰∏≠Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720202707797.png" alt="image-20210720202707797" tabindex="0" loading="lazy"><figcaption>image-20210720202707797</figcaption></figure><p>ËÄåJsonÊñáÊ°£‰∏≠ÂæÄÂæÄÂåÖÂê´ÂæàÂ§öÁöÑ<strong>Â≠óÊÆµÔºàFieldÔºâ</strong>ÔºåÁ±ª‰ºº‰∫éÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂàó„ÄÇ</p><h3 id="_1-3-2-Á¥¢ÂºïÂíåÊò†Â∞Ñ" tabindex="-1"><a class="header-anchor" href="#_1-3-2-Á¥¢ÂºïÂíåÊò†Â∞Ñ"><span>1.3.2.Á¥¢ÂºïÂíåÊò†Â∞Ñ</span></a></h3><p><strong>Á¥¢ÂºïÔºàIndexÔºâ</strong>ÔºåÂ∞±ÊòØÁõ∏ÂêåÁ±ªÂûãÁöÑÊñáÊ°£ÁöÑÈõÜÂêà„ÄÇ</p><p>‰æãÂ¶ÇÔºö</p><ul><li>ÊâÄÊúâÁî®Êà∑ÊñáÊ°£ÔºåÂ∞±ÂèØ‰ª•ÁªÑÁªáÂú®‰∏ÄËµ∑ÔºåÁß∞‰∏∫Áî®Êà∑ÁöÑÁ¥¢ÂºïÔºõ</li><li>ÊâÄÊúâÂïÜÂìÅÁöÑÊñáÊ°£ÔºåÂèØ‰ª•ÁªÑÁªáÂú®‰∏ÄËµ∑ÔºåÁß∞‰∏∫ÂïÜÂìÅÁöÑÁ¥¢ÂºïÔºõ</li><li>ÊâÄÊúâËÆ¢ÂçïÁöÑÊñáÊ°£ÔºåÂèØ‰ª•ÁªÑÁªáÂú®‰∏ÄËµ∑ÔºåÁß∞‰∏∫ËÆ¢ÂçïÁöÑÁ¥¢ÂºïÔºõ</li></ul><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203022172.png" alt="image-20210720203022172" tabindex="0" loading="lazy"><figcaption>image-20210720203022172</figcaption></figure><p>Âõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÁ¥¢ÂºïÂΩìÂÅöÊòØÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®„ÄÇ</p><p>Êï∞ÊçÆÂ∫ìÁöÑË°®‰ºöÊúâÁ∫¶Êùü‰ø°ÊÅØÔºåÁî®Êù•ÂÆö‰πâË°®ÁöÑÁªìÊûÑ„ÄÅÂ≠óÊÆµÁöÑÂêçÁß∞„ÄÅÁ±ªÂûãÁ≠â‰ø°ÊÅØ„ÄÇÂõ†Ê≠§ÔºåÁ¥¢ÂºïÂ∫ì‰∏≠Â∞±Êúâ<strong>Êò†Â∞ÑÔºàmappingÔºâ</strong>ÔºåÊòØÁ¥¢Âºï‰∏≠ÊñáÊ°£ÁöÑÂ≠óÊÆµÁ∫¶Êùü‰ø°ÊÅØÔºåÁ±ª‰ººË°®ÁöÑÁªìÊûÑÁ∫¶Êùü„ÄÇ</p><h3 id="_1-3-3-mysql‰∏éelasticsearch" tabindex="-1"><a class="header-anchor" href="#_1-3-3-mysql‰∏éelasticsearch"><span>1.3.3.mysql‰∏éelasticsearch</span></a></h3><p>Êàë‰ª¨Áªü‰∏ÄÁöÑÊäämysql‰∏éelasticsearchÁöÑÊ¶ÇÂøµÂÅö‰∏Ä‰∏ãÂØπÊØîÔºö</p><table><thead><tr><th><strong>MySQL</strong></th><th><strong>Elasticsearch</strong></th><th><strong>ËØ¥Êòé</strong></th></tr></thead><tbody><tr><td>Table</td><td>Index</td><td>Á¥¢Âºï(index)ÔºåÂ∞±ÊòØÊñáÊ°£ÁöÑÈõÜÂêàÔºåÁ±ª‰ººÊï∞ÊçÆÂ∫ìÁöÑË°®(table)</td></tr><tr><td>Row</td><td>Document</td><td>ÊñáÊ°£ÔºàDocumentÔºâÔºåÂ∞±ÊòØ‰∏ÄÊù°Êù°ÁöÑÊï∞ÊçÆÔºåÁ±ª‰ººÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°åÔºàRowÔºâÔºåÊñáÊ°£ÈÉΩÊòØJSONÊ†ºÂºè</td></tr><tr><td>Column</td><td>Field</td><td>Â≠óÊÆµÔºàFieldÔºâÔºåÂ∞±ÊòØJSONÊñáÊ°£‰∏≠ÁöÑÂ≠óÊÆµÔºåÁ±ª‰ººÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂàóÔºàColumnÔºâ</td></tr><tr><td>Schema</td><td>Mapping</td><td>MappingÔºàÊò†Â∞ÑÔºâÊòØÁ¥¢Âºï‰∏≠ÊñáÊ°£ÁöÑÁ∫¶ÊùüÔºå‰æãÂ¶ÇÂ≠óÊÆµÁ±ªÂûãÁ∫¶Êùü„ÄÇÁ±ª‰ººÊï∞ÊçÆÂ∫ìÁöÑË°®ÁªìÊûÑÔºàSchemaÔºâ</td></tr><tr><td>SQL</td><td>DSL</td><td>DSLÊòØelasticsearchÊèê‰æõÁöÑJSONÈ£éÊ†ºÁöÑËØ∑Ê±ÇËØ≠Âè•ÔºåÁî®Êù•Êìç‰ΩúelasticsearchÔºåÂÆûÁé∞CRUD</td></tr></tbody></table><p>ÊòØ‰∏çÊòØËØ¥ÔºåÊàë‰ª¨Â≠¶‰π†‰∫ÜelasticsearchÂ∞±‰∏çÂÜçÈúÄË¶Åmysql‰∫ÜÂë¢Ôºü</p><p>Âπ∂‰∏çÊòØÂ¶ÇÊ≠§Ôºå‰∏§ËÄÖÂêÑËá™ÊúâËá™Â∑±ÁöÑÊìÖÈïøÊîØÂá∫Ôºö</p><ul><li><p>MysqlÔºöÊìÖÈïø‰∫ãÂä°Á±ªÂûãÊìç‰ΩúÔºåÂèØ‰ª•Á°Æ‰øùÊï∞ÊçÆÁöÑÂÆâÂÖ®Âíå‰∏ÄËá¥ÊÄß</p></li><li><p>ElasticsearchÔºöÊìÖÈïøÊµ∑ÈáèÊï∞ÊçÆÁöÑÊêúÁ¥¢„ÄÅÂàÜÊûê„ÄÅËÆ°ÁÆó</p></li></ul><p>Âõ†Ê≠§Âú®‰ºÅ‰∏ö‰∏≠ÔºåÂæÄÂæÄÊòØ‰∏§ËÄÖÁªìÂêà‰ΩøÁî®Ôºö</p><ul><li>ÂØπÂÆâÂÖ®ÊÄßË¶ÅÊ±ÇËæÉÈ´òÁöÑÂÜôÊìç‰ΩúÔºå‰ΩøÁî®mysqlÂÆûÁé∞</li><li>ÂØπÊü•ËØ¢ÊÄßËÉΩË¶ÅÊ±ÇËæÉÈ´òÁöÑÊêúÁ¥¢ÈúÄÊ±ÇÔºå‰ΩøÁî®elasticsearchÂÆûÁé∞</li><li>‰∏§ËÄÖÂÜçÂü∫‰∫éÊüêÁßçÊñπÂºèÔºåÂÆûÁé∞Êï∞ÊçÆÁöÑÂêåÊ≠•Ôºå‰øùËØÅ‰∏ÄËá¥ÊÄß</li></ul><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203534945.png" alt="image-20210720203534945" tabindex="0" loading="lazy"><figcaption>image-20210720203534945</figcaption></figure><h2 id="_1-4-ÂÆâË£Öes„ÄÅkibana" tabindex="-1"><a class="header-anchor" href="#_1-4-ÂÆâË£Öes„ÄÅkibana"><span>1.4.ÂÆâË£Öes„ÄÅkibana</span></a></h2><h3 id="_1-4-1-ÂÆâË£Ö" tabindex="-1"><a class="header-anchor" href="#_1-4-1-ÂÆâË£Ö"><span>1.4.1.ÂÆâË£Ö</span></a></h3><p>ÂèÇËÄÉËØæÂâçËµÑÊñôÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203805350.png" alt="image-20210720203805350" tabindex="0" loading="lazy"><figcaption>image-20210720203805350</figcaption></figure><h3 id="_1-4-2-ÂàÜËØçÂô®" tabindex="-1"><a class="header-anchor" href="#_1-4-2-ÂàÜËØçÂô®"><span>1.4.2.ÂàÜËØçÂô®</span></a></h3><p>ÂèÇËÄÉËØæÂâçËµÑÊñôÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720203805350.png" alt="image-20210720203805350" tabindex="0" loading="lazy"><figcaption>image-20210720203805350</figcaption></figure><h3 id="_1-4-3-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_1-4-3-ÊÄªÁªì"><span>1.4.3.ÊÄªÁªì</span></a></h3><p>ÂàÜËØçÂô®ÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºü</p><ul><li>ÂàõÂª∫ÂÄíÊéíÁ¥¢ÂºïÊó∂ÂØπÊñáÊ°£ÂàÜËØç</li><li>Áî®Êà∑ÊêúÁ¥¢Êó∂ÔºåÂØπËæìÂÖ•ÁöÑÂÜÖÂÆπÂàÜËØç</li></ul><p>IKÂàÜËØçÂô®ÊúâÂá†ÁßçÊ®°ÂºèÔºü</p><ul><li>ik_smartÔºöÊô∫ËÉΩÂàáÂàÜÔºåÁ≤óÁ≤íÂ∫¶</li><li>ik_max_wordÔºöÊúÄÁªÜÂàáÂàÜÔºåÁªÜÁ≤íÂ∫¶</li></ul><p>IKÂàÜËØçÂô®Â¶Ç‰ΩïÊãìÂ±ïËØçÊù°ÔºüÂ¶Ç‰ΩïÂÅúÁî®ËØçÊù°Ôºü</p><ul><li>Âà©Áî®configÁõÆÂΩïÁöÑIkAnalyzer.cfg.xmlÊñá‰ª∂Ê∑ªÂä†ÊãìÂ±ïËØçÂÖ∏ÂíåÂÅúÁî®ËØçÂÖ∏</li><li>Âú®ËØçÂÖ∏‰∏≠Ê∑ªÂä†ÊãìÂ±ïËØçÊù°ÊàñËÄÖÂÅúÁî®ËØçÊù°</li></ul><h1 id="_2-Á¥¢ÂºïÂ∫ìÊìç‰Ωú" tabindex="-1"><a class="header-anchor" href="#_2-Á¥¢ÂºïÂ∫ìÊìç‰Ωú"><span>2.Á¥¢ÂºïÂ∫ìÊìç‰Ωú</span></a></h1><p>Á¥¢ÂºïÂ∫ìÂ∞±Á±ª‰ººÊï∞ÊçÆÂ∫ìË°®ÔºåmappingÊò†Â∞ÑÂ∞±Á±ª‰ººË°®ÁöÑÁªìÊûÑ„ÄÇ</p><p>Êàë‰ª¨Ë¶ÅÂêëes‰∏≠Â≠òÂÇ®Êï∞ÊçÆÔºåÂøÖÈ°ªÂÖàÂàõÂª∫‚ÄúÂ∫ì‚ÄùÂíå‚ÄúË°®‚Äù„ÄÇ</p><h2 id="_2-1-mappingÊò†Â∞ÑÂ±ûÊÄß" tabindex="-1"><a class="header-anchor" href="#_2-1-mappingÊò†Â∞ÑÂ±ûÊÄß"><span>2.1.mappingÊò†Â∞ÑÂ±ûÊÄß</span></a></h2><p>mappingÊòØÂØπÁ¥¢ÂºïÂ∫ì‰∏≠ÊñáÊ°£ÁöÑÁ∫¶ÊùüÔºåÂ∏∏ËßÅÁöÑmappingÂ±ûÊÄßÂåÖÊã¨Ôºö</p><ul><li>typeÔºöÂ≠óÊÆµÊï∞ÊçÆÁ±ªÂûãÔºåÂ∏∏ËßÅÁöÑÁÆÄÂçïÁ±ªÂûãÊúâÔºö <ul><li>Â≠óÁ¨¶‰∏≤ÔºötextÔºàÂèØÂàÜËØçÁöÑÊñáÊú¨Ôºâ„ÄÅkeywordÔºàÁ≤æÁ°ÆÂÄºÔºå‰æãÂ¶ÇÔºöÂìÅÁâå„ÄÅÂõΩÂÆ∂„ÄÅipÂú∞ÂùÄÔºâ</li><li>Êï∞ÂÄºÔºölong„ÄÅinteger„ÄÅshort„ÄÅbyte„ÄÅdouble„ÄÅfloat„ÄÅ</li><li>Â∏ÉÂ∞îÔºöboolean</li><li>Êó•ÊúüÔºödate</li><li>ÂØπË±°Ôºöobject</li></ul></li><li>indexÔºöÊòØÂê¶ÂàõÂª∫Á¥¢ÂºïÔºåÈªòËÆ§‰∏∫true</li><li>analyzerÔºö‰ΩøÁî®Âì™ÁßçÂàÜËØçÂô®</li><li>propertiesÔºöËØ•Â≠óÊÆµÁöÑÂ≠êÂ≠óÊÆµ</li></ul><p>‰æãÂ¶Ç‰∏ãÈù¢ÁöÑjsonÊñáÊ°£Ôºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">21</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;weight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">52.1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;isMarried&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÈªëÈ©¨Á®ãÂ∫èÂëòJavaËÆ≤Â∏à&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;zy@itcast.cn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">99.1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">99.5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">98.9</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;firstName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;‰∫ë&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;lastName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Ëµµ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÂØπÂ∫îÁöÑÊØè‰∏™Â≠óÊÆµÊò†Â∞ÑÔºàmappingÔºâÔºö</p><ul><li>ageÔºöÁ±ªÂûã‰∏∫ integerÔºõÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫trueÔºõÊó†ÈúÄÂàÜËØçÂô®</li><li>weightÔºöÁ±ªÂûã‰∏∫floatÔºõÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫trueÔºõÊó†ÈúÄÂàÜËØçÂô®</li><li>isMarriedÔºöÁ±ªÂûã‰∏∫booleanÔºõÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫trueÔºõÊó†ÈúÄÂàÜËØçÂô®</li><li>infoÔºöÁ±ªÂûã‰∏∫Â≠óÁ¨¶‰∏≤ÔºåÈúÄË¶ÅÂàÜËØçÔºåÂõ†Ê≠§ÊòØtextÔºõÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫trueÔºõÂàÜËØçÂô®ÂèØ‰ª•Áî®ik_smart</li><li>emailÔºöÁ±ªÂûã‰∏∫Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØ‰∏çÈúÄË¶ÅÂàÜËØçÔºåÂõ†Ê≠§ÊòØkeywordÔºõ‰∏çÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫falseÔºõÊó†ÈúÄÂàÜËØçÂô®</li><li>scoreÔºöËôΩÁÑ∂ÊòØÊï∞ÁªÑÔºå‰ΩÜÊòØÊàë‰ª¨Âè™ÁúãÂÖÉÁ¥†ÁöÑÁ±ªÂûãÔºåÁ±ªÂûã‰∏∫floatÔºõÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫trueÔºõÊó†ÈúÄÂàÜËØçÂô®</li><li>nameÔºöÁ±ªÂûã‰∏∫objectÔºåÈúÄË¶ÅÂÆö‰πâÂ§ö‰∏™Â≠êÂ±ûÊÄß <ul><li>name.firstNameÔºõÁ±ªÂûã‰∏∫Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØ‰∏çÈúÄË¶ÅÂàÜËØçÔºåÂõ†Ê≠§ÊòØkeywordÔºõÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫trueÔºõÊó†ÈúÄÂàÜËØçÂô®</li><li>name.lastNameÔºõÁ±ªÂûã‰∏∫Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØ‰∏çÈúÄË¶ÅÂàÜËØçÔºåÂõ†Ê≠§ÊòØkeywordÔºõÂèÇ‰∏éÊêúÁ¥¢ÔºåÂõ†Ê≠§ÈúÄË¶Åindex‰∏∫trueÔºõÊó†ÈúÄÂàÜËØçÂô®</li></ul></li></ul><h2 id="_2-2-Á¥¢ÂºïÂ∫ìÁöÑcrud" tabindex="-1"><a class="header-anchor" href="#_2-2-Á¥¢ÂºïÂ∫ìÁöÑcrud"><span>2.2.Á¥¢ÂºïÂ∫ìÁöÑCRUD</span></a></h2><p>ËøôÈáåÊàë‰ª¨Áªü‰∏Ä‰ΩøÁî®KibanaÁºñÂÜôDSLÁöÑÊñπÂºèÊù•ÊºîÁ§∫„ÄÇ</p><h3 id="_2-2-1-ÂàõÂª∫Á¥¢ÂºïÂ∫ìÂíåÊò†Â∞Ñ" tabindex="-1"><a class="header-anchor" href="#_2-2-1-ÂàõÂª∫Á¥¢ÂºïÂ∫ìÂíåÊò†Â∞Ñ"><span>2.2.1.ÂàõÂª∫Á¥¢ÂºïÂ∫ìÂíåÊò†Â∞Ñ</span></a></h3><h4 id="Âü∫Êú¨ËØ≠Ê≥ï" tabindex="-1"><a class="header-anchor" href="#Âü∫Êú¨ËØ≠Ê≥ï"><span>Âü∫Êú¨ËØ≠Ê≥ïÔºö</span></a></h4><ul><li>ËØ∑Ê±ÇÊñπÂºèÔºöPUT</li><li>ËØ∑Ê±ÇË∑ØÂæÑÔºö/Á¥¢ÂºïÂ∫ìÂêçÔºåÂèØ‰ª•Ëá™ÂÆö‰πâ</li><li>ËØ∑Ê±ÇÂèÇÊï∞ÔºömappingÊò†Â∞Ñ</li></ul><p>Ê†ºÂºèÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT¬†/Á¥¢ÂºïÂ∫ìÂêçÁß∞</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;mappings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;Â≠óÊÆµÂêç&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_smart&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;Â≠óÊÆµÂêç2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;false&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;Â≠óÊÆµÂêç3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;Â≠êÂ≠óÊÆµ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // ...Áï•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="Á§∫‰æã" tabindex="-1"><a class="header-anchor" href="#Á§∫‰æã"><span>Á§∫‰æãÔºö</span></a></h4><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">PUT¬†/heima</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†&quot;mappings&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†&quot;properties&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†&quot;info&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†&quot;text&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;analyzer&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†&quot;ik_smart&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†&quot;email&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†&quot;keyword&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;index&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†&quot;falsae&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†&quot;name&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;properties&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;firstName&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">      //</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ...</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Áï•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-2-Êü•ËØ¢Á¥¢ÂºïÂ∫ì" tabindex="-1"><a class="header-anchor" href="#_2-2-2-Êü•ËØ¢Á¥¢ÂºïÂ∫ì"><span>2.2.2.Êü•ËØ¢Á¥¢ÂºïÂ∫ì</span></a></h3><p><strong>Âü∫Êú¨ËØ≠Ê≥ï</strong>Ôºö</p><ul><li><p>ËØ∑Ê±ÇÊñπÂºèÔºöGET</p></li><li><p>ËØ∑Ê±ÇË∑ØÂæÑÔºö/Á¥¢ÂºïÂ∫ìÂêç</p></li><li><p>ËØ∑Ê±ÇÂèÇÊï∞ÔºöÊó†</p></li></ul><p><strong>Ê†ºÂºè</strong>Ôºö</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>GET /Á¥¢ÂºïÂ∫ìÂêç</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Á§∫‰æã</strong>Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720211019329.png" alt="image-20210720211019329" tabindex="0" loading="lazy"><figcaption>image-20210720211019329</figcaption></figure><h3 id="_2-2-3-‰øÆÊîπÁ¥¢ÂºïÂ∫ì" tabindex="-1"><a class="header-anchor" href="#_2-2-3-‰øÆÊîπÁ¥¢ÂºïÂ∫ì"><span>2.2.3.‰øÆÊîπÁ¥¢ÂºïÂ∫ì</span></a></h3><p>ÂÄíÊéíÁ¥¢ÂºïÁªìÊûÑËôΩÁÑ∂‰∏çÂ§çÊùÇÔºå‰ΩÜÊòØ‰∏ÄÊó¶Êï∞ÊçÆÁªìÊûÑÊîπÂèòÔºàÊØîÂ¶ÇÊîπÂèò‰∫ÜÂàÜËØçÂô®ÔºâÔºåÂ∞±ÈúÄË¶ÅÈáçÊñ∞ÂàõÂª∫ÂÄíÊéíÁ¥¢ÂºïÔºåËøôÁÆÄÁõ¥ÊòØÁÅæÈöæ„ÄÇÂõ†Ê≠§Á¥¢ÂºïÂ∫ì<strong>‰∏ÄÊó¶ÂàõÂª∫ÔºåÊó†Ê≥ï‰øÆÊîπmapping</strong>„ÄÇ</p><p>ËôΩÁÑ∂Êó†Ê≥ï‰øÆÊîπmapping‰∏≠Â∑≤ÊúâÁöÑÂ≠óÊÆµÔºå‰ΩÜÊòØÂç¥ÂÖÅËÆ∏Ê∑ªÂä†Êñ∞ÁöÑÂ≠óÊÆµÂà∞mapping‰∏≠ÔºåÂõ†‰∏∫‰∏ç‰ºöÂØπÂÄíÊéíÁ¥¢Âºï‰∫ßÁîüÂΩ±Âìç„ÄÇ</p><p><strong>ËØ≠Ê≥ïËØ¥Êòé</strong>Ôºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT¬†/Á¥¢ÂºïÂ∫ìÂêç/_mapping</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;Êñ∞Â≠óÊÆµÂêç&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;integer&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Á§∫‰æã</strong>Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720212357390.png" alt="image-20210720212357390" tabindex="0" loading="lazy"><figcaption>image-20210720212357390</figcaption></figure><h3 id="_2-2-4-Âà†Èô§Á¥¢ÂºïÂ∫ì" tabindex="-1"><a class="header-anchor" href="#_2-2-4-Âà†Èô§Á¥¢ÂºïÂ∫ì"><span>2.2.4.Âà†Èô§Á¥¢ÂºïÂ∫ì</span></a></h3><p><strong>ËØ≠Ê≥ïÔºö</strong></p><ul><li><p>ËØ∑Ê±ÇÊñπÂºèÔºöDELETE</p></li><li><p>ËØ∑Ê±ÇË∑ØÂæÑÔºö/Á¥¢ÂºïÂ∫ìÂêç</p></li><li><p>ËØ∑Ê±ÇÂèÇÊï∞ÔºöÊó†</p></li></ul><p><strong>Ê†ºÂºèÔºö</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>DELETE /Á¥¢ÂºïÂ∫ìÂêç</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Âú®kibana‰∏≠ÊµãËØïÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720212123420.png" alt="image-20210720212123420" tabindex="0" loading="lazy"><figcaption>image-20210720212123420</figcaption></figure><h3 id="_2-2-5-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_2-2-5-ÊÄªÁªì"><span>2.2.5.ÊÄªÁªì</span></a></h3><p>Á¥¢ÂºïÂ∫ìÊìç‰ΩúÊúâÂì™‰∫õÔºü</p><ul><li>ÂàõÂª∫Á¥¢ÂºïÂ∫ìÔºöPUT /Á¥¢ÂºïÂ∫ìÂêç</li><li>Êü•ËØ¢Á¥¢ÂºïÂ∫ìÔºöGET /Á¥¢ÂºïÂ∫ìÂêç</li><li>Âà†Èô§Á¥¢ÂºïÂ∫ìÔºöDELETE /Á¥¢ÂºïÂ∫ìÂêç</li><li>Ê∑ªÂä†Â≠óÊÆµÔºöPUT /Á¥¢ÂºïÂ∫ìÂêç/_mapping</li></ul><h1 id="_3-ÊñáÊ°£Êìç‰Ωú" tabindex="-1"><a class="header-anchor" href="#_3-ÊñáÊ°£Êìç‰Ωú"><span>3.ÊñáÊ°£Êìç‰Ωú</span></a></h1><h2 id="_3-1-Êñ∞Â¢ûÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_3-1-Êñ∞Â¢ûÊñáÊ°£"><span>3.1.Êñ∞Â¢ûÊñáÊ°£</span></a></h2><p><strong>ËØ≠Ê≥ïÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST¬†/Á¥¢ÂºïÂ∫ìÂêç/_doc/ÊñáÊ°£id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;Â≠óÊÆµ1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÄº1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;Â≠óÊÆµ2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÄº2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;Â≠óÊÆµ3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;Â≠êÂ±ûÊÄß1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÄº3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;Â≠êÂ±ûÊÄß2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÄº4&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Á§∫‰æãÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST¬†/heima/_doc/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÈôàÈì≠Èπ§ËÆ≤Â∏à&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;zy@qq.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;firstName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;‰∫ë&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;lastName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Ëµµ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ÂìçÂ∫îÔºö</strong></p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720212933362.png" alt="image-20210720212933362" tabindex="0" loading="lazy"><figcaption>image-20210720212933362</figcaption></figure><h2 id="_3-2-Êü•ËØ¢ÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_3-2-Êü•ËØ¢ÊñáÊ°£"><span>3.2.Êü•ËØ¢ÊñáÊ°£</span></a></h2><p>Ê†πÊçÆrestÈ£éÊ†ºÔºåÊñ∞Â¢ûÊòØpostÔºåÊü•ËØ¢Â∫îËØ•ÊòØgetÔºå‰∏çËøáÊü•ËØ¢‰∏ÄËà¨ÈÉΩÈúÄË¶ÅÊù°‰ª∂ÔºåËøôÈáåÊàë‰ª¨ÊääÊñáÊ°£idÂ∏¶‰∏ä„ÄÇ</p><p><strong>ËØ≠Ê≥ïÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET /{</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">Á¥¢ÂºïÂ∫ìÂêçÁß∞</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}/_doc/{</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>ÈÄöËøákibanaÊü•ÁúãÊï∞ÊçÆÔºö</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">heima</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">_doc</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Êü•ÁúãÁªìÊûúÔºö</strong></p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720213345003.png" alt="image-20210720213345003" tabindex="0" loading="lazy"><figcaption>image-20210720213345003</figcaption></figure><h2 id="_3-3-Âà†Èô§ÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_3-3-Âà†Èô§ÊñáÊ°£"><span>3.3.Âà†Èô§ÊñáÊ°£</span></a></h2><p>Âà†Èô§‰ΩøÁî®DELETEËØ∑Ê±ÇÔºåÂêåÊ†∑ÔºåÈúÄË¶ÅÊ†πÊçÆidËøõË°åÂà†Èô§Ôºö</p><p><strong>ËØ≠Ê≥ïÔºö</strong></p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Á¥¢ÂºïÂ∫ìÂêç</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">_doc</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">idÂÄº</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Á§∫‰æãÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"># Ê†πÊçÆidÂà†Èô§Êï∞ÊçÆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">DELETE /heima/_doc/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ÁªìÊûúÔºö</strong></p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720213634918.png" alt="image-20210720213634918" tabindex="0" loading="lazy"><figcaption>image-20210720213634918</figcaption></figure><h2 id="_3-4-‰øÆÊîπÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_3-4-‰øÆÊîπÊñáÊ°£"><span>3.4.‰øÆÊîπÊñáÊ°£</span></a></h2><p>‰øÆÊîπÊúâ‰∏§ÁßçÊñπÂºèÔºö</p><ul><li>ÂÖ®Èáè‰øÆÊîπÔºöÁõ¥Êé•Ë¶ÜÁõñÂéüÊù•ÁöÑÊñáÊ°£</li><li>Â¢ûÈáè‰øÆÊîπÔºö‰øÆÊîπÊñáÊ°£‰∏≠ÁöÑÈÉ®ÂàÜÂ≠óÊÆµ</li></ul><h3 id="_3-4-1-ÂÖ®Èáè‰øÆÊîπ" tabindex="-1"><a class="header-anchor" href="#_3-4-1-ÂÖ®Èáè‰øÆÊîπ"><span>3.4.1.ÂÖ®Èáè‰øÆÊîπ</span></a></h3><p>ÂÖ®Èáè‰øÆÊîπÊòØË¶ÜÁõñÂéüÊù•ÁöÑÊñáÊ°£ÔºåÂÖ∂Êú¨Ë¥®ÊòØÔºö</p><ul><li>Ê†πÊçÆÊåáÂÆöÁöÑidÂà†Èô§ÊñáÊ°£</li><li>Êñ∞Â¢û‰∏Ä‰∏™Áõ∏ÂêåidÁöÑÊñáÊ°£</li></ul><p><strong>Ê≥®ÊÑè</strong>ÔºöÂ¶ÇÊûúÊ†πÊçÆidÂà†Èô§Êó∂Ôºåid‰∏çÂ≠òÂú®ÔºåÁ¨¨‰∫åÊ≠•ÁöÑÊñ∞Â¢û‰πü‰ºöÊâßË°åÔºå‰πüÂ∞±‰ªé‰øÆÊîπ<strong>ÂèòÊàê‰∫ÜÊñ∞Â¢ûÊìç‰Ωú</strong>‰∫Ü„ÄÇ</p><p><strong>ËØ≠Ê≥ïÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT¬†/{</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">Á¥¢ÂºïÂ∫ìÂêç</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}/_doc/ÊñáÊ°£id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;Â≠óÊÆµ1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÄº1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;Â≠óÊÆµ2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÄº2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ... Áï•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Á§∫‰æãÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT¬†/heima/_doc/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÈªëÈ©¨Á®ãÂ∫èÂëòÈ´òÁ∫ßJavaËÆ≤Â∏à&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;zy@itcast.cn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;firstName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;‰∫ë&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;lastName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Ëµµ&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-2-Â¢ûÈáè‰øÆÊîπ" tabindex="-1"><a class="header-anchor" href="#_3-4-2-Â¢ûÈáè‰øÆÊîπ"><span>3.4.2.Â¢ûÈáè‰øÆÊîπ</span></a></h3><p>Â¢ûÈáè‰øÆÊîπÊòØÂè™‰øÆÊîπÊåáÂÆöidÂåπÈÖçÁöÑÊñáÊ°£‰∏≠ÁöÑÈÉ®ÂàÜÂ≠óÊÆµ„ÄÇ</p><p><strong>ËØ≠Ê≥ïÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST¬†/{</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">Á¥¢ÂºïÂ∫ìÂêç</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}/_update/ÊñáÊ°£id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">         &quot;Â≠óÊÆµÂêç&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Êñ∞ÁöÑÂÄº&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Á§∫‰æãÔºö</strong></p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">post /heima/_update/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ZYun@qq.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_3-5-ÊÄªÁªì"><span>3.5.ÊÄªÁªì</span></a></h2><p>ÊñáÊ°£Êìç‰ΩúÊúâÂì™‰∫õÔºü</p><ul><li jsonÊñáÊ°£="">ÂàõÂª∫ÊñáÊ°£ÔºöPOST /{Á¥¢ÂºïÂ∫ìÂêç}/_doc/ÊñáÊ°£id </li><li>Êü•ËØ¢ÊñáÊ°£ÔºöGET /{Á¥¢ÂºïÂ∫ìÂêç}/_doc/ÊñáÊ°£id</li><li>Âà†Èô§ÊñáÊ°£ÔºöDELETE /{Á¥¢ÂºïÂ∫ìÂêç}/_doc/ÊñáÊ°£id</li><li>‰øÆÊîπÊñáÊ°£Ôºö <ul><li jsonÊñáÊ°£="">ÂÖ®Èáè‰øÆÊîπÔºöPUT /{Á¥¢ÂºïÂ∫ìÂêç}/_doc/ÊñáÊ°£id</li><li>Â¢ûÈáè‰øÆÊîπÔºöPOST /{Á¥¢ÂºïÂ∫ìÂêç}/_update/ÊñáÊ°£id { &quot;doc&quot;: {Â≠óÊÆµ}}</li></ul></li></ul><h1 id="_4-restapi" tabindex="-1"><a class="header-anchor" href="#_4-restapi"><span>4.RestAPI</span></a></h1><p>ESÂÆòÊñπÊèê‰æõ‰∫ÜÂêÑÁßç‰∏çÂêåËØ≠Ë®ÄÁöÑÂÆ¢Êà∑Á´ØÔºåÁî®Êù•Êìç‰ΩúES„ÄÇËøô‰∫õÂÆ¢Êà∑Á´ØÁöÑÊú¨Ë¥®Â∞±ÊòØÁªÑË£ÖDSLËØ≠Âè•ÔºåÈÄöËøáhttpËØ∑Ê±ÇÂèëÈÄÅÁªôES„ÄÇÂÆòÊñπÊñáÊ°£Âú∞ÂùÄÔºöhttps://www.elastic.co/guide/en/elasticsearch/client/index.html</p><p>ÂÖ∂‰∏≠ÁöÑJava Rest ClientÂèàÂåÖÊã¨‰∏§ÁßçÔºö</p><ul><li>Java Low Level Rest Client</li><li>Java High Level Rest Client</li></ul><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720214555863.png" alt="image-20210720214555863" tabindex="0" loading="lazy"><figcaption>image-20210720214555863</figcaption></figure><p>Êàë‰ª¨Â≠¶‰π†ÁöÑÊòØJava HighLevel Rest ClientÂÆ¢Êà∑Á´ØAPI</p><h2 id="_4-0-ÂØºÂÖ•demoÂ∑•Á®ã" tabindex="-1"><a class="header-anchor" href="#_4-0-ÂØºÂÖ•demoÂ∑•Á®ã"><span>4.0.ÂØºÂÖ•DemoÂ∑•Á®ã</span></a></h2><h3 id="_4-0-1-ÂØºÂÖ•Êï∞ÊçÆ" tabindex="-1"><a class="header-anchor" href="#_4-0-1-ÂØºÂÖ•Êï∞ÊçÆ"><span>4.0.1.ÂØºÂÖ•Êï∞ÊçÆ</span></a></h3><p>È¶ñÂÖàÂØºÂÖ•ËØæÂâçËµÑÊñôÊèê‰æõÁöÑÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720220400297.png" alt="image-20210720220400297" tabindex="0" loading="lazy"><figcaption>image-20210720220400297</figcaption></figure><p>Êï∞ÊçÆÁªìÊûÑÂ¶Ç‰∏ãÔºö</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">tb_hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">`¬†(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫óid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫óÂêçÁß∞Ôºõ‰æãÔºö7Â§©ÈÖíÂ∫ó&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`address`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫óÂú∞ÂùÄÔºõ‰æãÔºöËà™Â§¥Ë∑Ø&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`price`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†int</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫ó‰ª∑Ê†ºÔºõ‰æãÔºö329&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`score`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†int</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫óËØÑÂàÜÔºõ‰æãÔºö45ÔºåÂ∞±ÊòØ4.5ÂàÜ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`brand`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫óÂìÅÁâåÔºõ‰æãÔºöÂ¶ÇÂÆ∂&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`city`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÊâÄÂú®ÂüéÂ∏ÇÔºõ‰æãÔºö‰∏äÊµ∑&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`star_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫óÊòüÁ∫ßÔºå‰ªé‰ΩéÂà∞È´òÂàÜÂà´ÊòØÔºö1ÊòüÂà∞5ÊòüÔºå1ÈíªÂà∞5Èíª&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`business`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÂïÜÂúàÔºõ‰æãÔºöËôπÊ°•&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`latitude`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;Á∫¨Â∫¶Ôºõ‰æãÔºö31.2497&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`longitude`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">NOT¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÁªèÂ∫¶Ôºõ‰æãÔºö120.3925&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">¬†¬†`pic`</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†COMMENT¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ÈÖíÂ∫óÂõæÁâáÔºõ‰æã:/img/1.jpg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">¬†¬†PRIMARY¬†KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)¬†ENGINE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">InnoDB¬†</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†CHARSET</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">utf8mb4;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-0-2-ÂØºÂÖ•È°πÁõÆ" tabindex="-1"><a class="header-anchor" href="#_4-0-2-ÂØºÂÖ•È°πÁõÆ"><span>4.0.2.ÂØºÂÖ•È°πÁõÆ</span></a></h3><p>ÁÑ∂ÂêéÂØºÂÖ•ËØæÂâçËµÑÊñôÊèê‰æõÁöÑÈ°πÁõÆ:</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720220503411.png" alt="image-20210720220503411" tabindex="0" loading="lazy"><figcaption>image-20210720220503411</figcaption></figure><p>È°πÁõÆÁªìÊûÑÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720220647541.png" alt="image-20210720220647541" tabindex="0" loading="lazy"><figcaption>image-20210720220647541</figcaption></figure><h3 id="_4-0-3-mappingÊò†Â∞ÑÂàÜÊûê" tabindex="-1"><a class="header-anchor" href="#_4-0-3-mappingÊò†Â∞ÑÂàÜÊûê"><span>4.0.3.mappingÊò†Â∞ÑÂàÜÊûê</span></a></h3><p>ÂàõÂª∫Á¥¢ÂºïÂ∫ìÔºåÊúÄÂÖ≥ÈîÆÁöÑÊòØmappingÊò†Â∞ÑÔºåËÄåmappingÊò†Â∞ÑË¶ÅËÄÉËôëÁöÑ‰ø°ÊÅØÂåÖÊã¨Ôºö</p><ul><li>Â≠óÊÆµÂêç</li><li>Â≠óÊÆµÊï∞ÊçÆÁ±ªÂûã</li><li>ÊòØÂê¶ÂèÇ‰∏éÊêúÁ¥¢</li><li>ÊòØÂê¶ÈúÄË¶ÅÂàÜËØç</li><li>Â¶ÇÊûúÂàÜËØçÔºåÂàÜËØçÂô®ÊòØ‰ªÄ‰πàÔºü</li></ul><p>ÂÖ∂‰∏≠Ôºö</p><ul><li>Â≠óÊÆµÂêç„ÄÅÂ≠óÊÆµÊï∞ÊçÆÁ±ªÂûãÔºåÂèØ‰ª•ÂèÇËÄÉÊï∞ÊçÆË°®ÁªìÊûÑÁöÑÂêçÁß∞ÂíåÁ±ªÂûã</li><li>ÊòØÂê¶ÂèÇ‰∏éÊêúÁ¥¢Ë¶ÅÂàÜÊûê‰∏öÂä°Êù•Âà§Êñ≠Ôºå‰æãÂ¶ÇÂõæÁâáÂú∞ÂùÄÔºåÂ∞±Êó†ÈúÄÂèÇ‰∏éÊêúÁ¥¢</li><li>ÊòØÂê¶ÂàÜËØçÂë¢Ë¶ÅÁúãÂÜÖÂÆπÔºåÂÜÖÂÆπÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Êï¥‰ΩìÂ∞±Êó†ÈúÄÂàÜËØçÔºåÂèç‰πãÂàôË¶ÅÂàÜËØç</li><li>ÂàÜËØçÂô®ÔºåÊàë‰ª¨ÂèØ‰ª•Áªü‰∏Ä‰ΩøÁî®ik_max_word</li></ul><p>Êù•Áúã‰∏ãÈÖíÂ∫óÊï∞ÊçÆÁöÑÁ¥¢ÂºïÂ∫ìÁªìÊûÑ:</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT /hotel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;mappings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_max_word&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;copy_to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;address&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;integer&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;integer&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;copy_to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;city&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;copy_to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;starName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;business&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;location&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;geo_point&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;pic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_max_word&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Âá†‰∏™ÁâπÊÆäÂ≠óÊÆµËØ¥ÊòéÔºö</p><ul><li>locationÔºöÂú∞ÁêÜÂùêÊ†áÔºåÈáåÈù¢ÂåÖÂê´Á≤æÂ∫¶„ÄÅÁ∫¨Â∫¶</li><li>allÔºö‰∏Ä‰∏™ÁªÑÂêàÂ≠óÊÆµÔºåÂÖ∂ÁõÆÁöÑÊòØÂ∞ÜÂ§öÂ≠óÊÆµÁöÑÂÄº Âà©Áî®copy_toÂêàÂπ∂ÔºåÊèê‰æõÁªôÁî®Êà∑ÊêúÁ¥¢</li></ul><p>Âú∞ÁêÜÂùêÊ†áËØ¥ÊòéÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720222110126.png" alt="image-20210720222110126" tabindex="0" loading="lazy"><figcaption>image-20210720222110126</figcaption></figure><p>copy_toËØ¥ÊòéÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720222221516.png" alt="image-20210720222221516" tabindex="0" loading="lazy"><figcaption>image-20210720222221516</figcaption></figure><h3 id="_4-0-4-ÂàùÂßãÂåñrestclient" tabindex="-1"><a class="header-anchor" href="#_4-0-4-ÂàùÂßãÂåñrestclient"><span>4.0.4.ÂàùÂßãÂåñRestClient</span></a></h3><p>Âú®elasticsearchÊèê‰æõÁöÑAPI‰∏≠Ôºå‰∏éelasticsearch‰∏ÄÂàá‰∫§‰∫íÈÉΩÂ∞ÅË£ÖÂú®‰∏Ä‰∏™Âêç‰∏∫RestHighLevelClientÁöÑÁ±ª‰∏≠ÔºåÂøÖÈ°ªÂÖàÂÆåÊàêËøô‰∏™ÂØπË±°ÁöÑÂàùÂßãÂåñÔºåÂª∫Á´ã‰∏éelasticsearchÁöÑËøûÊé•„ÄÇ</p><p>ÂàÜ‰∏∫‰∏âÊ≠•Ôºö</p><p>1ÔºâÂºïÂÖ•esÁöÑRestHighLevelClient‰æùËµñÔºö</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;org.elasticsearch.client&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;elasticsearch-rest-high-level-client&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ÔºâÂõ†‰∏∫SpringBootÈªòËÆ§ÁöÑESÁâàÊú¨ÊòØ7.6.2ÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅË¶ÜÁõñÈªòËÆ§ÁöÑESÁâàÊú¨Ôºö</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">java.version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;1.8&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">java.version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">elasticsearch.version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;7.12.1&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">elasticsearch.version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ÔºâÂàùÂßãÂåñRestHighLevelClientÔºö</p><p>ÂàùÂßãÂåñÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> client </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RestClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        HttpHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http://192.168.150.101:9200&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËøôÈáå‰∏∫‰∫ÜÂçïÂÖÉÊµãËØïÊñπ‰æøÔºåÊàë‰ª¨ÂàõÂª∫‰∏Ä‰∏™ÊµãËØïÁ±ªHotelIndexTestÔºåÁÑ∂ÂêéÂ∞ÜÂàùÂßãÂåñÁöÑ‰ª£Á†ÅÁºñÂÜôÂú®@BeforeEachÊñπÊ≥ï‰∏≠Ôºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.apache.http.HttpHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.elasticsearch.client.RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.junit.jupiter.api.AfterEach</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.junit.jupiter.api.BeforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.junit.jupiter.api.Test</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.io.IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelIndexTest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">BeforeEach</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> setUp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">client</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RestClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                HttpHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http://192.168.150.101:9200&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">AfterEach</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tearDown</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-1-ÂàõÂª∫Á¥¢ÂºïÂ∫ì" tabindex="-1"><a class="header-anchor" href="#_4-1-ÂàõÂª∫Á¥¢ÂºïÂ∫ì"><span>4.1.ÂàõÂª∫Á¥¢ÂºïÂ∫ì</span></a></h2><h3 id="_4-1-1-‰ª£Á†ÅËß£ËØª" tabindex="-1"><a class="header-anchor" href="#_4-1-1-‰ª£Á†ÅËß£ËØª"><span>4.1.1.‰ª£Á†ÅËß£ËØª</span></a></h3><p>ÂàõÂª∫Á¥¢ÂºïÂ∫ìÁöÑAPIÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720223049408.png" alt="image-20210720223049408" tabindex="0" loading="lazy"><figcaption>image-20210720223049408</figcaption></figure><p>‰ª£Á†ÅÂàÜ‰∏∫‰∏âÊ≠•Ôºö</p><ul><li>1ÔºâÂàõÂª∫RequestÂØπË±°„ÄÇÂõ†‰∏∫ÊòØÂàõÂª∫Á¥¢ÂºïÂ∫ìÁöÑÊìç‰ΩúÔºåÂõ†Ê≠§RequestÊòØCreateIndexRequest„ÄÇ</li><li>2ÔºâÊ∑ªÂä†ËØ∑Ê±ÇÂèÇÊï∞ÔºåÂÖ∂ÂÆûÂ∞±ÊòØDSLÁöÑJSONÂèÇÊï∞ÈÉ®ÂàÜ„ÄÇÂõ†‰∏∫jsonÂ≠óÁ¨¶‰∏≤ÂæàÈïøÔºåËøôÈáåÊòØÂÆö‰πâ‰∫ÜÈùôÊÄÅÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèMAPPING_TEMPLATEÔºåËÆ©‰ª£Á†ÅÁúãËµ∑Êù•Êõ¥Âä†‰ºòÈõÖ„ÄÇ</li><li>3ÔºâÂèëÈÄÅËØ∑Ê±ÇÔºåclient.indices()ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊòØIndicesClientÁ±ªÂûãÔºåÂ∞ÅË£Ö‰∫ÜÊâÄÊúâ‰∏éÁ¥¢ÂºïÂ∫ìÊìç‰ΩúÊúâÂÖ≥ÁöÑÊñπÊ≥ï„ÄÇ</li></ul><h3 id="_4-1-2-ÂÆåÊï¥Á§∫‰æã" tabindex="-1"><a class="header-anchor" href="#_4-1-2-ÂÆåÊï¥Á§∫‰æã"><span>4.1.2.ÂÆåÊï¥Á§∫‰æã</span></a></h3><p>Âú®hotel-demoÁöÑcn.itcast.hotel.constantsÂåÖ‰∏ãÔºåÂàõÂª∫‰∏Ä‰∏™Á±ªÔºåÂÆö‰πâmappingÊò†Â∞ÑÁöÑJSONÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.constants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> MAPPING_TEMPLATE </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;  </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">mappings</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;    </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">properties</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyword</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">name</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">text</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">analyzer</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ik_max_word</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">copy_to</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">all</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">address</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyword</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">index</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: false</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">price</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">integer</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">score</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">integer</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">brand</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyword</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">copy_to</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">all</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">city</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyword</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">copy_to</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">all</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">starName</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyword</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">business</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyword</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">location</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">geo_point</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">pic</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">keyword</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">index</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: false</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      },</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">all</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">type</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">text</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;        </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">analyzer</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ik_max_word</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\&quot;\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;      }</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;    }</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;  }</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Âú®hotel-demo‰∏≠ÁöÑHotelIndexTestÊµãËØïÁ±ª‰∏≠ÔºåÁºñÂÜôÂçïÂÖÉÊµãËØïÔºåÂÆûÁé∞ÂàõÂª∫Á¥¢ÂºïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> createHotelIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂàõÂª∫RequestÂØπË±°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    CreateIndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> CreateIndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áËØ∑Ê±ÇÁöÑÂèÇÊï∞ÔºöDSLËØ≠Âè•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(MAPPING_TEMPLATE, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">XContentType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">indices</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-2-Âà†Èô§Á¥¢ÂºïÂ∫ì" tabindex="-1"><a class="header-anchor" href="#_4-2-Âà†Èô§Á¥¢ÂºïÂ∫ì"><span>4.2.Âà†Èô§Á¥¢ÂºïÂ∫ì</span></a></h2><p>Âà†Èô§Á¥¢ÂºïÂ∫ìÁöÑDSLËØ≠Âè•ÈùûÂ∏∏ÁÆÄÂçïÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">DELETE /hotel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>‰∏éÂàõÂª∫Á¥¢ÂºïÂ∫ìÁõ∏ÊØîÔºö</p><ul><li>ËØ∑Ê±ÇÊñπÂºè‰ªéPUTÂèò‰∏∫DELTE</li><li>ËØ∑Ê±ÇË∑ØÂæÑ‰∏çÂèò</li><li>Êó†ËØ∑Ê±ÇÂèÇÊï∞</li></ul><p>ÊâÄ‰ª•‰ª£Á†ÅÁöÑÂ∑ÆÂºÇÔºåÊ≥®ÊÑè‰ΩìÁé∞Âú®RequestÂØπË±°‰∏ä„ÄÇ‰æùÁÑ∂ÊòØ‰∏âÊ≠•Ëµ∞Ôºö</p><ul><li>1ÔºâÂàõÂª∫RequestÂØπË±°„ÄÇËøôÊ¨°ÊòØDeleteIndexRequestÂØπË±°</li><li>2ÔºâÂáÜÂ§áÂèÇÊï∞„ÄÇËøôÈáåÊòØÊó†ÂèÇ</li><li>3ÔºâÂèëÈÄÅËØ∑Ê±Ç„ÄÇÊîπÁî®deleteÊñπÊ≥ï</li></ul><p>Âú®hotel-demo‰∏≠ÁöÑHotelIndexTestÊµãËØïÁ±ª‰∏≠ÔºåÁºñÂÜôÂçïÂÖÉÊµãËØïÔºåÂÆûÁé∞Âà†Èô§Á¥¢ÂºïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testDeleteHotelIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂàõÂª∫RequestÂØπË±°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    DeleteIndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> DeleteIndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">indices</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-3-Âà§Êñ≠Á¥¢ÂºïÂ∫ìÊòØÂê¶Â≠òÂú®" tabindex="-1"><a class="header-anchor" href="#_4-3-Âà§Êñ≠Á¥¢ÂºïÂ∫ìÊòØÂê¶Â≠òÂú®"><span>4.3.Âà§Êñ≠Á¥¢ÂºïÂ∫ìÊòØÂê¶Â≠òÂú®</span></a></h2><p>Âà§Êñ≠Á¥¢ÂºïÂ∫ìÊòØÂê¶Â≠òÂú®ÔºåÊú¨Ë¥®Â∞±ÊòØÊü•ËØ¢ÔºåÂØπÂ∫îÁöÑDSLÊòØÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET /hotel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Âõ†Ê≠§‰∏éÂà†Èô§ÁöÑJava‰ª£Á†ÅÊµÅÁ®ãÊòØÁ±ª‰ººÁöÑ„ÄÇ‰æùÁÑ∂ÊòØ‰∏âÊ≠•Ëµ∞Ôºö</p><ul><li>1ÔºâÂàõÂª∫RequestÂØπË±°„ÄÇËøôÊ¨°ÊòØGetIndexRequestÂØπË±°</li><li>2ÔºâÂáÜÂ§áÂèÇÊï∞„ÄÇËøôÈáåÊòØÊó†ÂèÇ</li><li>3ÔºâÂèëÈÄÅËØ∑Ê±Ç„ÄÇÊîπÁî®existsÊñπÊ≥ï</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testExistsHotelIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂàõÂª∫RequestÂØπË±°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    GetIndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GetIndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> exists </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">indices</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">exists</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ËæìÂá∫</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(exists </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Á¥¢ÂºïÂ∫ìÂ∑≤ÁªèÂ≠òÂú®ÔºÅ&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Á¥¢ÂºïÂ∫ì‰∏çÂ≠òÂú®ÔºÅ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-4-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_4-4-ÊÄªÁªì"><span>4.4.ÊÄªÁªì</span></a></h2><p>JavaRestClientÊìç‰ΩúelasticsearchÁöÑÊµÅÁ®ãÂü∫Êú¨Á±ª‰ºº„ÄÇÊ†∏ÂøÉÊòØclient.indices()ÊñπÊ≥ïÊù•Ëé∑ÂèñÁ¥¢ÂºïÂ∫ìÁöÑÊìç‰ΩúÂØπË±°„ÄÇ</p><p>Á¥¢ÂºïÂ∫ìÊìç‰ΩúÁöÑÂü∫Êú¨Ê≠•È™§Ôºö</p><ul><li>ÂàùÂßãÂåñRestHighLevelClient</li><li>ÂàõÂª∫XxxIndexRequest„ÄÇXXXÊòØCreate„ÄÅGet„ÄÅDelete</li><li>ÂáÜÂ§áDSLÔºà CreateÊó∂ÈúÄË¶ÅÔºåÂÖ∂ÂÆÉÊòØÊó†ÂèÇÔºâ</li><li>ÂèëÈÄÅËØ∑Ê±Ç„ÄÇË∞ÉÁî®RestHighLevelClient#indices().xxx()ÊñπÊ≥ïÔºåxxxÊòØcreate„ÄÅexists„ÄÅdelete</li></ul><h1 id="_5-restclientÊìç‰ΩúÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_5-restclientÊìç‰ΩúÊñáÊ°£"><span>5.RestClientÊìç‰ΩúÊñáÊ°£</span></a></h1><p>‰∏∫‰∫Ü‰∏éÁ¥¢ÂºïÂ∫ìÊìç‰ΩúÂàÜÁ¶ªÔºåÊàë‰ª¨ÂÜçÊ¨°ÂèÇÂä†‰∏Ä‰∏™ÊµãËØïÁ±ªÔºåÂÅö‰∏§‰ª∂‰∫ãÊÉÖÔºö</p><ul><li>ÂàùÂßãÂåñRestHighLevelClient</li><li>Êàë‰ª¨ÁöÑÈÖíÂ∫óÊï∞ÊçÆÂú®Êï∞ÊçÆÂ∫ìÔºåÈúÄË¶ÅÂà©Áî®IHotelServiceÂéªÊü•ËØ¢ÔºåÊâÄ‰ª•Ê≥®ÂÖ•Ëøô‰∏™Êé•Âè£</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cn.itcast.hotel.pojo.Hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cn.itcast.hotel.service.IHotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.junit.jupiter.api.AfterEach</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.junit.jupiter.api.BeforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.junit.jupiter.api.Test</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.annotation.Autowired</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.boot.test.context.SpringBootTest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.io.IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">SpringBootTest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelDocumentTest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IHotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">BeforeEach</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> setUp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">client</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RestClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                HttpHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http://192.168.150.101:9200&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">AfterEach</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> tearDown</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-1-Êñ∞Â¢ûÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_5-1-Êñ∞Â¢ûÊñáÊ°£"><span>5.1.Êñ∞Â¢ûÊñáÊ°£</span></a></h2><p>Êàë‰ª¨Ë¶ÅÂ∞ÜÊï∞ÊçÆÂ∫ìÁöÑÈÖíÂ∫óÊï∞ÊçÆÊü•ËØ¢Âá∫Êù•ÔºåÂÜôÂÖ•elasticsearch‰∏≠„ÄÇ</p><h3 id="_5-1-1-Á¥¢ÂºïÂ∫ìÂÆû‰ΩìÁ±ª" tabindex="-1"><a class="header-anchor" href="#_5-1-1-Á¥¢ÂºïÂ∫ìÂÆû‰ΩìÁ±ª"><span>5.1.1.Á¥¢ÂºïÂ∫ìÂÆû‰ΩìÁ±ª</span></a></h3><p>Êï∞ÊçÆÂ∫ìÊü•ËØ¢ÂêéÁöÑÁªìÊûúÊòØ‰∏Ä‰∏™HotelÁ±ªÂûãÁöÑÂØπË±°„ÄÇÁªìÊûÑÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">TableName</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;tb_hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">TableId</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IdType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">INPUT</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> address</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> price</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> score</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> city</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> starName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> business</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> longitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> latitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> pic</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>‰∏éÊàë‰ª¨ÁöÑÁ¥¢ÂºïÂ∫ìÁªìÊûÑÂ≠òÂú®Â∑ÆÂºÇÔºö</p><ul><li>longitudeÂíålatitudeÈúÄË¶ÅÂêàÂπ∂‰∏∫location</li></ul><p>Âõ†Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶ÅÂÆö‰πâ‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÂûãÔºå‰∏éÁ¥¢ÂºïÂ∫ìÁªìÊûÑÂêªÂêàÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.pojo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.Data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.NoArgsConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">NoArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> address</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> price</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> score</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> city</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> starName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> business</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> location</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> pic</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Hotel</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">address</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">price</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">score</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getScore</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">brand</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">city</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">starName</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">business</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBusiness</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getLatitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;, &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getLongitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">pic</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPic</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-2-ËØ≠Ê≥ïËØ¥Êòé" tabindex="-1"><a class="header-anchor" href="#_5-1-2-ËØ≠Ê≥ïËØ¥Êòé"><span>5.1.2.ËØ≠Ê≥ïËØ¥Êòé</span></a></h3><p>Êñ∞Â¢ûÊñáÊ°£ÁöÑDSLËØ≠Âè•Â¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST /{</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">Á¥¢ÂºïÂ∫ìÂêç</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}/_doc/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Jack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">21</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÂØπÂ∫îÁöÑjava‰ª£Á†ÅÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720230027240.png" alt="image-20210720230027240" tabindex="0" loading="lazy"><figcaption>image-20210720230027240</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞‰∏éÂàõÂª∫Á¥¢ÂºïÂ∫ìÁ±ª‰ººÔºåÂêåÊ†∑ÊòØ‰∏âÊ≠•Ëµ∞Ôºö</p><ul><li>1ÔºâÂàõÂª∫RequestÂØπË±°</li><li>2ÔºâÂáÜÂ§áËØ∑Ê±ÇÂèÇÊï∞Ôºå‰πüÂ∞±ÊòØDSL‰∏≠ÁöÑJSONÊñáÊ°£</li><li>3ÔºâÂèëÈÄÅËØ∑Ê±Ç</li></ul><p>ÂèòÂåñÁöÑÂú∞ÊñπÂú®‰∫éÔºåËøôÈáåÁõ¥Êé•‰ΩøÁî®client.xxx()ÁöÑAPIÔºå‰∏çÂÜçÈúÄË¶Åclient.indices()‰∫Ü„ÄÇ</p><h3 id="_5-1-3-ÂÆåÊï¥‰ª£Á†Å" tabindex="-1"><a class="header-anchor" href="#_5-1-3-ÂÆåÊï¥‰ª£Á†Å"><span>5.1.3.ÂÆåÊï¥‰ª£Á†Å</span></a></h3><p>Êàë‰ª¨ÂØºÂÖ•ÈÖíÂ∫óÊï∞ÊçÆÔºåÂü∫Êú¨ÊµÅÁ®ã‰∏ÄËá¥Ôºå‰ΩÜÊòØÈúÄË¶ÅËÄÉËôëÂá†ÁÇπÂèòÂåñÔºö</p><ul><li>ÈÖíÂ∫óÊï∞ÊçÆÊù•Ëá™‰∫éÊï∞ÊçÆÂ∫ìÔºåÊàë‰ª¨ÈúÄË¶ÅÂÖàÊü•ËØ¢Âá∫Êù•ÔºåÂæóÂà∞hotelÂØπË±°</li><li>hotelÂØπË±°ÈúÄË¶ÅËΩ¨‰∏∫HotelDocÂØπË±°</li><li>HotelDocÈúÄË¶ÅÂ∫èÂàóÂåñ‰∏∫jsonÊ†ºÂºè</li></ul><p>Âõ†Ê≠§Ôºå‰ª£Á†ÅÊï¥‰ΩìÊ≠•È™§Â¶Ç‰∏ãÔºö</p><ul><li>1ÔºâÊ†πÊçÆidÊü•ËØ¢ÈÖíÂ∫óÊï∞ÊçÆHotel</li><li>2ÔºâÂ∞ÜHotelÂ∞ÅË£Ö‰∏∫HotelDoc</li><li>3ÔºâÂ∞ÜHotelDocÂ∫èÂàóÂåñ‰∏∫JSON</li><li>4ÔºâÂàõÂª∫IndexRequestÔºåÊåáÂÆöÁ¥¢ÂºïÂ∫ìÂêçÂíåid</li><li>5ÔºâÂáÜÂ§áËØ∑Ê±ÇÂèÇÊï∞Ôºå‰πüÂ∞±ÊòØJSONÊñáÊ°£</li><li>6ÔºâÂèëÈÄÅËØ∑Ê±Ç</li></ul><p>Âú®hotel-demoÁöÑHotelDocumentTestÊµãËØïÁ±ª‰∏≠ÔºåÁºñÂÜôÂçïÂÖÉÊµãËØïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testAddDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.Ê†πÊçÆidÊü•ËØ¢ÈÖíÂ∫óÊï∞ÊçÆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    Hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotel </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getById</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">61083L</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ËΩ¨Êç¢‰∏∫ÊñáÊ°£Á±ªÂûã</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelDoc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(hotel)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.Â∞ÜHotelDocËΩ¨json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toJSONString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(hotelDoc);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequestÂØπË±°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    IndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> IndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">hotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áJsonÊñáÊ°£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(json, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">XContentType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-2-Êü•ËØ¢ÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_5-2-Êü•ËØ¢ÊñáÊ°£"><span>5.2.Êü•ËØ¢ÊñáÊ°£</span></a></h2><h3 id="_5-2-1-ËØ≠Ê≥ïËØ¥Êòé" tabindex="-1"><a class="header-anchor" href="#_5-2-1-ËØ≠Ê≥ïËØ¥Êòé"><span>5.2.1.ËØ≠Ê≥ïËØ¥Êòé</span></a></h3><p>Êü•ËØ¢ÁöÑDSLËØ≠Âè•Â¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET /hotel/_doc/{</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ÈùûÂ∏∏ÁÆÄÂçïÔºåÂõ†Ê≠§‰ª£Á†ÅÂ§ßÊ¶ÇÂàÜ‰∏§Ê≠•Ôºö</p><ul><li>ÂáÜÂ§áRequestÂØπË±°</li><li>ÂèëÈÄÅËØ∑Ê±Ç</li></ul><p>‰∏çËøáÊü•ËØ¢ÁöÑÁõÆÁöÑÊòØÂæóÂà∞ÁªìÊûúÔºåËß£Êûê‰∏∫HotelDocÔºåÂõ†Ê≠§ÈöæÁÇπÊòØÁªìÊûúÁöÑËß£Êûê„ÄÇÂÆåÊï¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720230811674.png" alt="image-20210720230811674" tabindex="0" loading="lazy"><figcaption>image-20210720230811674</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞ÔºåÁªìÊûúÊòØ‰∏Ä‰∏™JSONÔºåÂÖ∂‰∏≠ÊñáÊ°£ÊîæÂú®‰∏Ä‰∏™<code>_source</code>Â±ûÊÄß‰∏≠ÔºåÂõ†Ê≠§Ëß£ÊûêÂ∞±ÊòØÊãøÂà∞<code>_source</code>ÔºåÂèçÂ∫èÂàóÂåñ‰∏∫JavaÂØπË±°Âç≥ÂèØ„ÄÇ</p><p>‰∏é‰πãÂâçÁ±ª‰ººÔºå‰πüÊòØ‰∏âÊ≠•Ëµ∞Ôºö</p><ul><li>1ÔºâÂáÜÂ§áRequestÂØπË±°„ÄÇËøôÊ¨°ÊòØÊü•ËØ¢ÔºåÊâÄ‰ª•ÊòØGetRequest</li><li>2ÔºâÂèëÈÄÅËØ∑Ê±ÇÔºåÂæóÂà∞ÁªìÊûú„ÄÇÂõ†‰∏∫ÊòØÊü•ËØ¢ÔºåËøôÈáåË∞ÉÁî®client.get()ÊñπÊ≥ï</li><li>3ÔºâËß£ÊûêÁªìÊûúÔºåÂ∞±ÊòØÂØπJSONÂÅöÂèçÂ∫èÂàóÂåñ</li></ul><h3 id="_5-2-2-ÂÆåÊï¥‰ª£Á†Å" tabindex="-1"><a class="header-anchor" href="#_5-2-2-ÂÆåÊï¥‰ª£Á†Å"><span>5.2.2.ÂÆåÊï¥‰ª£Á†Å</span></a></h3><p>Âú®hotel-demoÁöÑHotelDocumentTestÊµãËØïÁ±ª‰∏≠ÔºåÁºñÂÜôÂçïÂÖÉÊµãËØïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testGetDocumentById</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    GetRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GetRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;61082&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂèëÈÄÅËØ∑Ê±ÇÔºåÂæóÂà∞ÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    GetResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.Ëß£ÊûêÂìçÂ∫îÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSourceAsString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelDoc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parseObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(json, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(hotelDoc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-3-Âà†Èô§ÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_5-3-Âà†Èô§ÊñáÊ°£"><span>5.3.Âà†Èô§ÊñáÊ°£</span></a></h2><p>Âà†Èô§ÁöÑDSL‰∏∫ÊòØËøôÊ†∑ÁöÑÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">DELETE /hotel/_doc/{</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>‰∏éÊü•ËØ¢Áõ∏ÊØîÔºå‰ªÖ‰ªÖÊòØËØ∑Ê±ÇÊñπÂºè‰ªéDELETEÂèòÊàêGETÔºåÂèØ‰ª•ÊÉ≥Ë±°Java‰ª£Á†ÅÂ∫îËØ•‰æùÁÑ∂ÊòØ‰∏âÊ≠•Ëµ∞Ôºö</p><ul><li>1ÔºâÂáÜÂ§áRequestÂØπË±°ÔºåÂõ†‰∏∫ÊòØÂà†Èô§ÔºåËøôÊ¨°ÊòØDeleteRequestÂØπË±°„ÄÇË¶ÅÊåáÂÆöÁ¥¢ÂºïÂ∫ìÂêçÂíåid</li><li>2ÔºâÂáÜÂ§áÂèÇÊï∞ÔºåÊó†ÂèÇ</li><li>3ÔºâÂèëÈÄÅËØ∑Ê±Ç„ÄÇÂõ†‰∏∫ÊòØÂà†Èô§ÔºåÊâÄ‰ª•ÊòØclient.delete()ÊñπÊ≥ï</li></ul><p>Âú®hotel-demoÁöÑHotelDocumentTestÊµãËØïÁ±ª‰∏≠ÔºåÁºñÂÜôÂçïÂÖÉÊµãËØïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testDeleteDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    DeleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> DeleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;61083&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-4-‰øÆÊîπÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_5-4-‰øÆÊîπÊñáÊ°£"><span>5.4.‰øÆÊîπÊñáÊ°£</span></a></h2><h3 id="_5-4-1-ËØ≠Ê≥ïËØ¥Êòé" tabindex="-1"><a class="header-anchor" href="#_5-4-1-ËØ≠Ê≥ïËØ¥Êòé"><span>5.4.1.ËØ≠Ê≥ïËØ¥Êòé</span></a></h3><p>‰øÆÊîπÊàë‰ª¨ËÆ≤Ëøá‰∏§ÁßçÊñπÂºèÔºö</p><ul><li>ÂÖ®Èáè‰øÆÊîπÔºöÊú¨Ë¥®ÊòØÂÖàÊ†πÊçÆidÂà†Èô§ÔºåÂÜçÊñ∞Â¢û</li><li>Â¢ûÈáè‰øÆÊîπÔºö‰øÆÊîπÊñáÊ°£‰∏≠ÁöÑÊåáÂÆöÂ≠óÊÆµÂÄº</li></ul><p>Âú®RestClientÁöÑAPI‰∏≠ÔºåÂÖ®Èáè‰øÆÊîπ‰∏éÊñ∞Â¢ûÁöÑAPIÂÆåÂÖ®‰∏ÄËá¥ÔºåÂà§Êñ≠‰æùÊçÆÊòØIDÔºö</p><ul><li>Â¶ÇÊûúÊñ∞Â¢ûÊó∂ÔºåIDÂ∑≤ÁªèÂ≠òÂú®ÔºåÂàô‰øÆÊîπ</li><li>Â¶ÇÊûúÊñ∞Â¢ûÊó∂ÔºåID‰∏çÂ≠òÂú®ÔºåÂàôÊñ∞Â¢û</li></ul><p>ËøôÈáå‰∏çÂÜçËµòËø∞ÔºåÊàë‰ª¨‰∏ªË¶ÅÂÖ≥Ê≥®Â¢ûÈáè‰øÆÊîπ„ÄÇ</p><p>‰ª£Á†ÅÁ§∫‰æãÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720231040875.png" alt="image-20210720231040875" tabindex="0" loading="lazy"><figcaption>image-20210720231040875</figcaption></figure><p>‰∏é‰πãÂâçÁ±ª‰ººÔºå‰πüÊòØ‰∏âÊ≠•Ëµ∞Ôºö</p><ul><li>1ÔºâÂáÜÂ§áRequestÂØπË±°„ÄÇËøôÊ¨°ÊòØ‰øÆÊîπÔºåÊâÄ‰ª•ÊòØUpdateRequest</li><li>2ÔºâÂáÜÂ§áÂèÇÊï∞„ÄÇ‰πüÂ∞±ÊòØJSONÊñáÊ°£ÔºåÈáåÈù¢ÂåÖÂê´Ë¶Å‰øÆÊîπÁöÑÂ≠óÊÆµ</li><li>3ÔºâÊõ¥Êñ∞ÊñáÊ°£„ÄÇËøôÈáåË∞ÉÁî®client.update()ÊñπÊ≥ï</li></ul><h3 id="_5-4-2-ÂÆåÊï¥‰ª£Á†Å" tabindex="-1"><a class="header-anchor" href="#_5-4-2-ÂÆåÊï¥‰ª£Á†Å"><span>5.4.2.ÂÆåÊï¥‰ª£Á†Å</span></a></h3><p>Âú®hotel-demoÁöÑHotelDocumentTestÊµãËØïÁ±ª‰∏≠ÔºåÁºñÂÜôÂçïÂÖÉÊµãËØïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testUpdateDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    UpdateRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> UpdateRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;61083&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áËØ∑Ê±ÇÂèÇÊï∞</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">doc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;952&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">        &quot;starName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂõõÈíª&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    );</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-5-ÊâπÈáèÂØºÂÖ•ÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_5-5-ÊâπÈáèÂØºÂÖ•ÊñáÊ°£"><span>5.5.ÊâπÈáèÂØºÂÖ•ÊñáÊ°£</span></a></h2><p>Ê°à‰æãÈúÄÊ±ÇÔºöÂà©Áî®BulkRequestÊâπÈáèÂ∞ÜÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÂØºÂÖ•Âà∞Á¥¢ÂºïÂ∫ì‰∏≠„ÄÇ</p><p>Ê≠•È™§Â¶Ç‰∏ãÔºö</p><ul><li><p>Âà©Áî®mybatis-plusÊü•ËØ¢ÈÖíÂ∫óÊï∞ÊçÆ</p></li><li><p>Â∞ÜÊü•ËØ¢Âà∞ÁöÑÈÖíÂ∫óÊï∞ÊçÆÔºàHotelÔºâËΩ¨Êç¢‰∏∫ÊñáÊ°£Á±ªÂûãÊï∞ÊçÆÔºàHotelDocÔºâ</p></li><li><p>Âà©Áî®JavaRestClient‰∏≠ÁöÑBulkRequestÊâπÂ§ÑÁêÜÔºåÂÆûÁé∞ÊâπÈáèÊñ∞Â¢ûÊñáÊ°£</p></li></ul><h3 id="_5-5-1-ËØ≠Ê≥ïËØ¥Êòé" tabindex="-1"><a class="header-anchor" href="#_5-5-1-ËØ≠Ê≥ïËØ¥Êòé"><span>5.5.1.ËØ≠Ê≥ïËØ¥Êòé</span></a></h3><p>ÊâπÈáèÂ§ÑÁêÜBulkRequestÔºåÂÖ∂Êú¨Ë¥®Â∞±ÊòØÂ∞ÜÂ§ö‰∏™ÊôÆÈÄöÁöÑCRUDËØ∑Ê±ÇÁªÑÂêàÂú®‰∏ÄËµ∑ÂèëÈÄÅ„ÄÇ</p><p>ÂÖ∂‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™addÊñπÊ≥ïÔºåÁî®Êù•Ê∑ªÂä†ÂÖ∂‰ªñËØ∑Ê±ÇÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720232105943.png" alt="image-20210720232105943" tabindex="0" loading="lazy"><figcaption>image-20210720232105943</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞ÔºåËÉΩÊ∑ªÂä†ÁöÑËØ∑Ê±ÇÂåÖÊã¨Ôºö</p><ul><li>IndexRequestÔºå‰πüÂ∞±ÊòØÊñ∞Â¢û</li><li>UpdateRequestÔºå‰πüÂ∞±ÊòØ‰øÆÊîπ</li><li>DeleteRequestÔºå‰πüÂ∞±ÊòØÂà†Èô§</li></ul><p>Âõ†Ê≠§Bulk‰∏≠Ê∑ªÂä†‰∫ÜÂ§ö‰∏™IndexRequestÔºåÂ∞±ÊòØÊâπÈáèÊñ∞Â¢ûÂäüËÉΩ‰∫Ü„ÄÇÁ§∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210720232431383.png" alt="image-20210720232431383" tabindex="0" loading="lazy"><figcaption>image-20210720232431383</figcaption></figure><p>ÂÖ∂ÂÆûËøòÊòØ‰∏âÊ≠•Ëµ∞Ôºö</p><ul><li>1ÔºâÂàõÂª∫RequestÂØπË±°„ÄÇËøôÈáåÊòØBulkRequest</li><li>2ÔºâÂáÜÂ§áÂèÇÊï∞„ÄÇÊâπÂ§ÑÁêÜÁöÑÂèÇÊï∞ÔºåÂ∞±ÊòØÂÖ∂ÂÆÉRequestÂØπË±°ÔºåËøôÈáåÂ∞±ÊòØÂ§ö‰∏™IndexRequest</li><li>3ÔºâÂèëËµ∑ËØ∑Ê±Ç„ÄÇËøôÈáåÊòØÊâπÂ§ÑÁêÜÔºåË∞ÉÁî®ÁöÑÊñπÊ≥ï‰∏∫client.bulk()ÊñπÊ≥ï</li></ul><p>Êàë‰ª¨Âú®ÂØºÂÖ•ÈÖíÂ∫óÊï∞ÊçÆÊó∂ÔºåÂ∞Ü‰∏äËø∞‰ª£Á†ÅÊîπÈÄ†ÊàêforÂæ™ÁéØÂ§ÑÁêÜÂç≥ÂèØ„ÄÇ</p><h3 id="_5-5-2-ÂÆåÊï¥‰ª£Á†Å" tabindex="-1"><a class="header-anchor" href="#_5-5-2-ÂÆåÊï¥‰ª£Á†Å"><span>5.5.2.ÂÆåÊï¥‰ª£Á†Å</span></a></h3><p>Âú®hotel-demoÁöÑHotelDocumentTestÊµãËØïÁ±ª‰∏≠ÔºåÁºñÂÜôÂçïÂÖÉÊµãËØïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testBulkRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ÊâπÈáèÊü•ËØ¢ÈÖíÂ∫óÊï∞ÊçÆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotels </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂàõÂª∫Request</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    BulkRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> BulkRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áÂèÇÊï∞ÔºåÊ∑ªÂä†Â§ö‰∏™Êñ∞Â¢ûÁöÑRequest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotel </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotels) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.1.ËΩ¨Êç¢‰∏∫ÊñáÊ°£Á±ªÂûãHotelDoc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelDoc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(hotel)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.2.ÂàõÂª∫Êñ∞Â¢ûÊñáÊ°£ÁöÑRequestÂØπË±°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> IndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">hotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toJSONString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(hotelDoc), </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">XContentType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">bulk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-6-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_5-6-Â∞èÁªì"><span>5.6.Â∞èÁªì</span></a></h2><p>ÊñáÊ°£Êìç‰ΩúÁöÑÂü∫Êú¨Ê≠•È™§Ôºö</p><ul><li>ÂàùÂßãÂåñRestHighLevelClient</li><li>ÂàõÂª∫XxxRequest„ÄÇXXXÊòØIndex„ÄÅGet„ÄÅUpdate„ÄÅDelete„ÄÅBulk</li><li>ÂáÜÂ§áÂèÇÊï∞ÔºàIndex„ÄÅUpdate„ÄÅBulkÊó∂ÈúÄË¶ÅÔºâ</li><li>ÂèëÈÄÅËØ∑Ê±Ç„ÄÇË∞ÉÁî®RestHighLevelClient#.xxx()ÊñπÊ≥ïÔºåxxxÊòØindex„ÄÅget„ÄÅupdate„ÄÅdelete„ÄÅbulk</li><li>Ëß£ÊûêÁªìÊûúÔºàGetÊó∂ÈúÄË¶ÅÔºâ</li></ul><h1 id="ÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìé02" tabindex="-1"><a class="header-anchor" href="#ÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìé02"><span>ÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìé02</span></a></h1><p>Âú®Êò®Â§©ÁöÑÂ≠¶‰π†‰∏≠ÔºåÊàë‰ª¨Â∑≤ÁªèÂØºÂÖ•‰∫ÜÂ§ßÈáèÊï∞ÊçÆÂà∞elasticsearch‰∏≠ÔºåÂÆûÁé∞‰∫ÜelasticsearchÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÂäüËÉΩ„ÄÇ‰ΩÜelasticsearchÊúÄÊìÖÈïøÁöÑËøòÊòØÊêúÁ¥¢ÂíåÊï∞ÊçÆÂàÜÊûê„ÄÇ</p><p>ÊâÄ‰ª•‰ªäÂ§©ÔºåÊàë‰ª¨Á†îÁ©∂‰∏ãelasticsearchÁöÑÊï∞ÊçÆÊêúÁ¥¢ÂäüËÉΩ„ÄÇÊàë‰ª¨‰ºöÂàÜÂà´‰ΩøÁî®<strong>DSL</strong>Âíå<strong>RestClient</strong>ÂÆûÁé∞ÊêúÁ¥¢„ÄÇ</p><h1 id="_1-dslÊü•ËØ¢ÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_1-dslÊü•ËØ¢ÊñáÊ°£"><span>1.DSLÊü•ËØ¢ÊñáÊ°£</span></a></h1><p>elasticsearchÁöÑÊü•ËØ¢‰æùÁÑ∂ÊòØÂü∫‰∫éJSONÈ£éÊ†ºÁöÑDSLÊù•ÂÆûÁé∞ÁöÑ„ÄÇ</p><h2 id="_1-1-dslÊü•ËØ¢ÂàÜÁ±ª" tabindex="-1"><a class="header-anchor" href="#_1-1-dslÊü•ËØ¢ÂàÜÁ±ª"><span>1.1.DSLÊü•ËØ¢ÂàÜÁ±ª</span></a></h2><p>ElasticsearchÊèê‰æõ‰∫ÜÂü∫‰∫éJSONÁöÑDSLÔºà<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html" target="_blank" rel="noopener noreferrer">Domain Specific Language</a>ÔºâÊù•ÂÆö‰πâÊü•ËØ¢„ÄÇÂ∏∏ËßÅÁöÑÊü•ËØ¢Á±ªÂûãÂåÖÊã¨Ôºö</p><ul><li><p><strong>Êü•ËØ¢ÊâÄÊúâ</strong>ÔºöÊü•ËØ¢Âá∫ÊâÄÊúâÊï∞ÊçÆÔºå‰∏ÄËà¨ÊµãËØïÁî®„ÄÇ‰æãÂ¶ÇÔºömatch_all</p></li><li><p><strong>ÂÖ®ÊñáÊ£ÄÁ¥¢Ôºàfull textÔºâÊü•ËØ¢</strong>ÔºöÂà©Áî®ÂàÜËØçÂô®ÂØπÁî®Êà∑ËæìÂÖ•ÂÜÖÂÆπÂàÜËØçÔºåÁÑ∂ÂêéÂéªÂÄíÊéíÁ¥¢ÂºïÂ∫ì‰∏≠ÂåπÈÖç„ÄÇ‰æãÂ¶ÇÔºö</p><ul><li>match_query</li><li>multi_match_query</li></ul></li><li><p><strong>Á≤æÁ°ÆÊü•ËØ¢</strong>ÔºöÊ†πÊçÆÁ≤æÁ°ÆËØçÊù°ÂÄºÊü•ÊâæÊï∞ÊçÆÔºå‰∏ÄËà¨ÊòØÊü•Êâækeyword„ÄÅÊï∞ÂÄº„ÄÅÊó•Êúü„ÄÅbooleanÁ≠âÁ±ªÂûãÂ≠óÊÆµ„ÄÇ‰æãÂ¶ÇÔºö</p><ul><li>ids</li><li>range</li><li>term</li></ul></li><li><p><strong>Âú∞ÁêÜÔºàgeoÔºâÊü•ËØ¢</strong>ÔºöÊ†πÊçÆÁªèÁ∫¨Â∫¶Êü•ËØ¢„ÄÇ‰æãÂ¶ÇÔºö</p><ul><li>geo_distance</li><li>geo_bounding_box</li></ul></li><li><p><strong>Â§çÂêàÔºàcompoundÔºâÊü•ËØ¢</strong>ÔºöÂ§çÂêàÊü•ËØ¢ÂèØ‰ª•Â∞Ü‰∏äËø∞ÂêÑÁßçÊü•ËØ¢Êù°‰ª∂ÁªÑÂêàËµ∑Êù•ÔºåÂêàÂπ∂Êü•ËØ¢Êù°‰ª∂„ÄÇ‰æãÂ¶ÇÔºö</p><ul><li>bool</li><li>function_score</li></ul></li></ul><p>Êü•ËØ¢ÁöÑËØ≠Ê≥ïÂü∫Êú¨‰∏ÄËá¥Ôºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;Êü•ËØ¢Á±ªÂûã&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;Êü•ËØ¢Êù°‰ª∂&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Êù°‰ª∂ÂÄº&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Êàë‰ª¨‰ª•Êü•ËØ¢ÊâÄÊúâ‰∏∫‰æãÔºåÂÖ∂‰∏≠Ôºö</p><ul><li>Êü•ËØ¢Á±ªÂûã‰∏∫match_all</li><li>Ê≤°ÊúâÊü•ËØ¢Êù°‰ª∂</li></ul><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// Êü•ËØ¢ÊâÄÊúâ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match_all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÂÖ∂ÂÆÉÊü•ËØ¢Êó†ÈùûÂ∞±ÊòØ<strong>Êü•ËØ¢Á±ªÂûã</strong>„ÄÅ<strong>Êü•ËØ¢Êù°‰ª∂</strong>ÁöÑÂèòÂåñ„ÄÇ</p><h2 id="_1-2-ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-2-ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢"><span>1.2.ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢</span></a></h2><h3 id="_1-2-1-‰ΩøÁî®Âú∫ÊôØ" tabindex="-1"><a class="header-anchor" href="#_1-2-1-‰ΩøÁî®Âú∫ÊôØ"><span>1.2.1.‰ΩøÁî®Âú∫ÊôØ</span></a></h3><p>ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢ÁöÑÂü∫Êú¨ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ul><li>ÂØπÁî®Êà∑ÊêúÁ¥¢ÁöÑÂÜÖÂÆπÂÅöÂàÜËØçÔºåÂæóÂà∞ËØçÊù°</li><li>Ê†πÊçÆËØçÊù°ÂéªÂÄíÊéíÁ¥¢ÂºïÂ∫ì‰∏≠ÂåπÈÖçÔºåÂæóÂà∞ÊñáÊ°£id</li><li>Ê†πÊçÆÊñáÊ°£idÊâæÂà∞ÊñáÊ°£ÔºåËøîÂõûÁªôÁî®Êà∑</li></ul><p>ÊØîËæÉÂ∏∏Áî®ÁöÑÂú∫ÊôØÂåÖÊã¨Ôºö</p><ul><li>ÂïÜÂüéÁöÑËæìÂÖ•Ê°ÜÊêúÁ¥¢</li><li>ÁôæÂ∫¶ËæìÂÖ•Ê°ÜÊêúÁ¥¢</li></ul><p>‰æãÂ¶Ç‰∫¨‰∏úÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721165326938.png" alt="image-20210721165326938" tabindex="0" loading="lazy"><figcaption>image-20210721165326938</figcaption></figure><p>Âõ†‰∏∫ÊòØÊãøÁùÄËØçÊù°ÂéªÂåπÈÖçÔºåÂõ†Ê≠§ÂèÇ‰∏éÊêúÁ¥¢ÁöÑÂ≠óÊÆµ‰πüÂøÖÈ°ªÊòØÂèØÂàÜËØçÁöÑtextÁ±ªÂûãÁöÑÂ≠óÊÆµ„ÄÇ</p><h3 id="_1-2-2-Âü∫Êú¨ËØ≠Ê≥ï" tabindex="-1"><a class="header-anchor" href="#_1-2-2-Âü∫Êú¨ËØ≠Ê≥ï"><span>1.2.2.Âü∫Êú¨ËØ≠Ê≥ï</span></a></h3><p>Â∏∏ËßÅÁöÑÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢ÂåÖÊã¨Ôºö</p><ul><li>matchÊü•ËØ¢ÔºöÂçïÂ≠óÊÆµÊü•ËØ¢</li><li>multi_matchÊü•ËØ¢ÔºöÂ§öÂ≠óÊÆµÊü•ËØ¢Ôºå‰ªªÊÑè‰∏Ä‰∏™Â≠óÊÆµÁ¨¶ÂêàÊù°‰ª∂Â∞±ÁÆóÁ¨¶ÂêàÊü•ËØ¢Êù°‰ª∂</li></ul><p>matchÊü•ËØ¢ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;TEXT&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mulit_matchËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;multi_match&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;TEXT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;fields&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;FIELD1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot; FIELD12&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-3-Á§∫‰æã" tabindex="-1"><a class="header-anchor" href="#_1-2-3-Á§∫‰æã"><span>1.2.3.Á§∫‰æã</span></a></h3><p>matchÊü•ËØ¢Á§∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721170455419.png" alt="image-20210721170455419" tabindex="0" loading="lazy"><figcaption>image-20210721170455419</figcaption></figure><p>multi_matchÊü•ËØ¢Á§∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721170720691.png" alt="image-20210721170720691" tabindex="0" loading="lazy"><figcaption>image-20210721170720691</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞Ôºå‰∏§ÁßçÊü•ËØ¢ÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰∏∫‰ªÄ‰πàÔºü</p><p>Âõ†‰∏∫Êàë‰ª¨Â∞Übrand„ÄÅname„ÄÅbusinessÂÄºÈÉΩÂà©Áî®copy_toÂ§çÂà∂Âà∞‰∫ÜallÂ≠óÊÆµ‰∏≠„ÄÇÂõ†Ê≠§‰Ω†Ê†πÊçÆ‰∏â‰∏™Â≠óÊÆµÊêúÁ¥¢ÔºåÂíåÊ†πÊçÆallÂ≠óÊÆµÊêúÁ¥¢ÊïàÊûúÂΩìÁÑ∂‰∏ÄÊ†∑‰∫Ü„ÄÇ</p><p>‰ΩÜÊòØÔºåÊêúÁ¥¢Â≠óÊÆµË∂äÂ§öÔºåÂØπÊü•ËØ¢ÊÄßËÉΩÂΩ±ÂìçË∂äÂ§ßÔºåÂõ†Ê≠§Âª∫ËÆÆÈááÁî®copy_toÔºåÁÑ∂ÂêéÂçïÂ≠óÊÆµÊü•ËØ¢ÁöÑÊñπÂºè„ÄÇ</p><h3 id="_1-2-4-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_1-2-4-ÊÄªÁªì"><span>1.2.4.ÊÄªÁªì</span></a></h3><p>matchÂíåmulti_matchÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü</p><ul><li>matchÔºöÊ†πÊçÆ‰∏Ä‰∏™Â≠óÊÆµÊü•ËØ¢</li><li>multi_matchÔºöÊ†πÊçÆÂ§ö‰∏™Â≠óÊÆµÊü•ËØ¢ÔºåÂèÇ‰∏éÊü•ËØ¢Â≠óÊÆµË∂äÂ§öÔºåÊü•ËØ¢ÊÄßËÉΩË∂äÂ∑Æ</li></ul><h2 id="_1-3-Á≤æÂáÜÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-3-Á≤æÂáÜÊü•ËØ¢"><span>1.3.Á≤æÂáÜÊü•ËØ¢</span></a></h2><p>Á≤æÁ°ÆÊü•ËØ¢‰∏ÄËà¨ÊòØÊü•Êâækeyword„ÄÅÊï∞ÂÄº„ÄÅÊó•Êúü„ÄÅbooleanÁ≠âÁ±ªÂûãÂ≠óÊÆµ„ÄÇÊâÄ‰ª•<strong>‰∏ç‰ºö</strong>ÂØπÊêúÁ¥¢Êù°‰ª∂ÂàÜËØç„ÄÇÂ∏∏ËßÅÁöÑÊúâÔºö</p><ul><li>termÔºöÊ†πÊçÆËØçÊù°Á≤æÁ°ÆÂÄºÊü•ËØ¢</li><li>rangeÔºöÊ†πÊçÆÂÄºÁöÑËåÉÂõ¥Êü•ËØ¢</li></ul><h3 id="_1-3-1-termÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-3-1-termÊü•ËØ¢"><span>1.3.1.termÊü•ËØ¢</span></a></h3><p>Âõ†‰∏∫Á≤æÁ°ÆÊü•ËØ¢ÁöÑÂ≠óÊÆµÊêúÊòØ‰∏çÂàÜËØçÁöÑÂ≠óÊÆµÔºåÂõ†Ê≠§Êü•ËØ¢ÁöÑÊù°‰ª∂‰πüÂøÖÈ°ªÊòØ<strong>‰∏çÂàÜËØç</strong>ÁöÑËØçÊù°„ÄÇÊü•ËØ¢Êó∂ÔºåÁî®Êà∑ËæìÂÖ•ÁöÑÂÜÖÂÆπË∑üËá™Âä®ÂÄºÂÆåÂÖ®ÂåπÈÖçÊó∂ÊâçËÆ§‰∏∫Á¨¶ÂêàÊù°‰ª∂„ÄÇÂ¶ÇÊûúÁî®Êà∑ËæìÂÖ•ÁöÑÂÜÖÂÆπËøáÂ§öÔºåÂèçËÄåÊêúÁ¥¢‰∏çÂà∞Êï∞ÊçÆ„ÄÇ</p><p>ËØ≠Ê≥ïËØ¥ÊòéÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†termÊü•ËØ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;VALUE&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Á§∫‰æãÔºö</p><p>ÂΩìÊàëÊêúÁ¥¢ÁöÑÊòØÁ≤æÁ°ÆËØçÊù°Êó∂ÔºåËÉΩÊ≠£Á°ÆÊü•ËØ¢Âá∫ÁªìÊûúÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721171655308.png" alt="image-20210721171655308" tabindex="0" loading="lazy"><figcaption>image-20210721171655308</figcaption></figure><p>‰ΩÜÊòØÔºåÂΩìÊàëÊêúÁ¥¢ÁöÑÂÜÖÂÆπ‰∏çÊòØËØçÊù°ÔºåËÄåÊòØÂ§ö‰∏™ËØçËØ≠ÂΩ¢ÊàêÁöÑÁü≠ËØ≠Êó∂ÔºåÂèçËÄåÊêúÁ¥¢‰∏çÂà∞Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721171838378.png" alt="image-20210721171838378" tabindex="0" loading="lazy"><figcaption>image-20210721171838378</figcaption></figure><h3 id="_1-3-2-rangeÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-3-2-rangeÊü•ËØ¢"><span>1.3.2.rangeÊü•ËØ¢</span></a></h3><p>ËåÉÂõ¥Êü•ËØ¢Ôºå‰∏ÄËà¨Â∫îÁî®Âú®ÂØπÊï∞ÂÄºÁ±ªÂûãÂÅöËåÉÂõ¥ËøáÊª§ÁöÑÊó∂ÂÄô„ÄÇÊØîÂ¶ÇÂÅö‰ª∑Ê†ºËåÉÂõ¥ËøáÊª§„ÄÇ</p><p>Âü∫Êú¨ËØ≠Ê≥ïÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†rangeÊü•ËØ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;gte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ËøôÈáåÁöÑgte‰ª£Ë°®Â§ß‰∫éÁ≠â‰∫éÔºågtÂàô‰ª£Ë°®Â§ß‰∫é</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;lte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // lte‰ª£Ë°®Â∞è‰∫éÁ≠â‰∫éÔºåltÂàô‰ª£Ë°®Â∞è‰∫é</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Á§∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721172307172.png" alt="image-20210721172307172" tabindex="0" loading="lazy"><figcaption>image-20210721172307172</figcaption></figure><h3 id="_1-3-3-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_1-3-3-ÊÄªÁªì"><span>1.3.3.ÊÄªÁªì</span></a></h3><p>Á≤æÁ°ÆÊü•ËØ¢Â∏∏ËßÅÁöÑÊúâÂì™‰∫õÔºü</p><ul><li>termÊü•ËØ¢ÔºöÊ†πÊçÆËØçÊù°Á≤æÁ°ÆÂåπÈÖçÔºå‰∏ÄËà¨ÊêúÁ¥¢keywordÁ±ªÂûã„ÄÅÊï∞ÂÄºÁ±ªÂûã„ÄÅÂ∏ÉÂ∞îÁ±ªÂûã„ÄÅÊó•ÊúüÁ±ªÂûãÂ≠óÊÆµ</li><li>rangeÊü•ËØ¢ÔºöÊ†πÊçÆÊï∞ÂÄºËåÉÂõ¥Êü•ËØ¢ÔºåÂèØ‰ª•ÊòØÊï∞ÂÄº„ÄÅÊó•ÊúüÁöÑËåÉÂõ¥</li></ul><h2 id="_1-4-Âú∞ÁêÜÂùêÊ†áÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-4-Âú∞ÁêÜÂùêÊ†áÊü•ËØ¢"><span>1.4.Âú∞ÁêÜÂùêÊ†áÊü•ËØ¢</span></a></h2><p>ÊâÄË∞ìÁöÑÂú∞ÁêÜÂùêÊ†áÊü•ËØ¢ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÊ†πÊçÆÁªèÁ∫¨Â∫¶Êü•ËØ¢ÔºåÂÆòÊñπÊñáÊ°£Ôºöhttps://www.elastic.co/guide/en/elasticsearch/reference/current/geo-queries.html</p><p>Â∏∏ËßÅÁöÑ‰ΩøÁî®Âú∫ÊôØÂåÖÊã¨Ôºö</p><ul><li>Êê∫Á®ãÔºöÊêúÁ¥¢ÊàëÈôÑËøëÁöÑÈÖíÂ∫ó</li><li>Êª¥Êª¥ÔºöÊêúÁ¥¢ÊàëÈôÑËøëÁöÑÂá∫ÁßüËΩ¶</li><li>ÂæÆ‰ø°ÔºöÊêúÁ¥¢ÊàëÈôÑËøëÁöÑ‰∫∫</li></ul><p>ÈôÑËøëÁöÑÈÖíÂ∫óÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721172645103.png" alt="image-20210721172645103" tabindex="0" loading="lazy"><figcaption>image-20210721172645103</figcaption></figure><p>ÈôÑËøëÁöÑËΩ¶Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721172654880.png" alt="image-20210721172654880" tabindex="0" loading="lazy"><figcaption>image-20210721172654880</figcaption></figure><h3 id="_1-4-1-Áü©ÂΩ¢ËåÉÂõ¥Êü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-4-1-Áü©ÂΩ¢ËåÉÂõ¥Êü•ËØ¢"><span>1.4.1.Áü©ÂΩ¢ËåÉÂõ¥Êü•ËØ¢</span></a></h3><p>Áü©ÂΩ¢ËåÉÂõ¥Êü•ËØ¢Ôºå‰πüÂ∞±ÊòØgeo_bounding_boxÊü•ËØ¢ÔºåÊü•ËØ¢ÂùêÊ†áËêΩÂú®Êüê‰∏™Áü©ÂΩ¢ËåÉÂõ¥ÁöÑÊâÄÊúâÊñáÊ°£Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/DKV9HZbVS6.gif" alt="DKV9HZbVS6" tabindex="0" loading="lazy"><figcaption>DKV9HZbVS6</figcaption></figure><p>Êü•ËØ¢Êó∂ÔºåÈúÄË¶ÅÊåáÂÆöÁü©ÂΩ¢ÁöÑ<strong>Â∑¶‰∏ä</strong>„ÄÅ<strong>Âè≥‰∏ã</strong>‰∏§‰∏™ÁÇπÁöÑÂùêÊ†áÔºåÁÑ∂ÂêéÁîªÂá∫‰∏Ä‰∏™Áü©ÂΩ¢ÔºåËêΩÂú®ËØ•Áü©ÂΩ¢ÂÜÖÁöÑÈÉΩÊòØÁ¨¶ÂêàÊù°‰ª∂ÁöÑÁÇπ„ÄÇ</p><p>ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†geo_bounding_boxÊü•ËØ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;geo_bounding_box&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;top_left&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{ </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// Â∑¶‰∏äÁÇπ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;lat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">31.1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;lon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">121.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;bottom_right&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{ </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// Âè≥‰∏ãÁÇπ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;lat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">30.9</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;lon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">121.7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËøôÁßçÂπ∂‰∏çÁ¨¶Âêà‚ÄúÈôÑËøëÁöÑ‰∫∫‚ÄùËøôÊ†∑ÁöÑÈúÄÊ±ÇÔºåÊâÄ‰ª•Êàë‰ª¨Â∞±‰∏çÂÅö‰∫Ü„ÄÇ</p><h3 id="_1-4-2-ÈôÑËøëÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-4-2-ÈôÑËøëÊü•ËØ¢"><span>1.4.2.ÈôÑËøëÊü•ËØ¢</span></a></h3><p>ÈôÑËøëÊü•ËØ¢Ôºå‰πüÂè´ÂÅöË∑ùÁ¶ªÊü•ËØ¢Ôºàgeo_distanceÔºâÔºöÊü•ËØ¢Âà∞ÊåáÂÆö‰∏≠ÂøÉÁÇπÂ∞è‰∫éÊüê‰∏™Ë∑ùÁ¶ªÂÄºÁöÑÊâÄÊúâÊñáÊ°£„ÄÇ</p><p>Êç¢Âè•ËØùÊù•ËØ¥ÔºåÂú®Âú∞Âõæ‰∏äÊâæ‰∏Ä‰∏™ÁÇπ‰Ωú‰∏∫ÂúÜÂøÉÔºå‰ª•ÊåáÂÆöË∑ùÁ¶ª‰∏∫ÂçäÂæÑÔºåÁîª‰∏Ä‰∏™ÂúÜÔºåËêΩÂú®ÂúÜÂÜÖÁöÑÂùêÊ†áÈÉΩÁÆóÁ¨¶ÂêàÊù°‰ª∂Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/vZrdKAh19C.gif" alt="vZrdKAh19C" tabindex="0" loading="lazy"><figcaption>vZrdKAh19C</figcaption></figure><p>ËØ≠Ê≥ïËØ¥ÊòéÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†geo_distance Êü•ËØ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;geo_distance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;distance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;15km&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ÂçäÂæÑ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;31.21,121.5&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // ÂúÜÂøÉ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Á§∫‰æãÔºö</p><p>Êàë‰ª¨ÂÖàÊêúÁ¥¢ÈôÜÂÆ∂Âò¥ÈôÑËøë15kmÁöÑÈÖíÂ∫óÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721175443234.png" alt="image-20210721175443234" tabindex="0" loading="lazy"><figcaption>image-20210721175443234</figcaption></figure><p>ÂèëÁé∞ÂÖ±Êúâ47ÂÆ∂ÈÖíÂ∫ó„ÄÇ</p><p>ÁÑ∂ÂêéÊääÂçäÂæÑÁº©Áü≠Âà∞3ÂÖ¨ÈáåÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721182031475.png" alt="image-20210721182031475" tabindex="0" loading="lazy"><figcaption>image-20210721182031475</figcaption></figure><p>ÂèØ‰ª•ÂèëÁé∞ÔºåÊêúÁ¥¢Âà∞ÁöÑÈÖíÂ∫óÊï∞ÈáèÂáèÂ∞ëÂà∞‰∫Ü5ÂÆ∂„ÄÇ</p><h2 id="_1-5-Â§çÂêàÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-5-Â§çÂêàÊü•ËØ¢"><span>1.5.Â§çÂêàÊü•ËØ¢</span></a></h2><p>Â§çÂêàÔºàcompoundÔºâÊü•ËØ¢ÔºöÂ§çÂêàÊü•ËØ¢ÂèØ‰ª•Â∞ÜÂÖ∂ÂÆÉÁÆÄÂçïÊü•ËØ¢ÁªÑÂêàËµ∑Êù•ÔºåÂÆûÁé∞Êõ¥Â§çÊùÇÁöÑÊêúÁ¥¢ÈÄªËæë„ÄÇÂ∏∏ËßÅÁöÑÊúâ‰∏§ÁßçÔºö</p><ul><li>fuction scoreÔºöÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢ÔºåÂèØ‰ª•ÊéßÂà∂ÊñáÊ°£Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜÔºåÊéßÂà∂ÊñáÊ°£ÊéíÂêç</li><li>bool queryÔºöÂ∏ÉÂ∞îÊü•ËØ¢ÔºåÂà©Áî®ÈÄªËæëÂÖ≥Á≥ªÁªÑÂêàÂ§ö‰∏™ÂÖ∂ÂÆÉÁöÑÊü•ËØ¢ÔºåÂÆûÁé∞Â§çÊùÇÊêúÁ¥¢</li></ul><h3 id="_1-5-1-Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜ" tabindex="-1"><a class="header-anchor" href="#_1-5-1-Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜ"><span>1.5.1.Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜ</span></a></h3><p>ÂΩìÊàë‰ª¨Âà©Áî®matchÊü•ËØ¢Êó∂ÔºåÊñáÊ°£ÁªìÊûú‰ºöÊ†πÊçÆ‰∏éÊêúÁ¥¢ËØçÊù°ÁöÑÂÖ≥ËÅîÂ∫¶ÊâìÂàÜÔºà_scoreÔºâÔºåËøîÂõûÁªìÊûúÊó∂ÊåâÁÖßÂàÜÂÄºÈôçÂ∫èÊéíÂàó„ÄÇ</p><p>‰æãÂ¶ÇÔºåÊàë‰ª¨ÊêúÁ¥¢ &quot;ËôπÊ°•Â¶ÇÂÆ∂&quot;ÔºåÁªìÊûúÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">17.850193</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;_source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ËôπÊ°•Â¶ÇÂÆ∂ÈÖíÂ∫óÁúü‰∏çÈîô&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">12.259849</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;_source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Â§ñÊª©Â¶ÇÂÆ∂ÈÖíÂ∫óÁúü‰∏çÈîô&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">11.91091</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;_source&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Ëø™Â£´Â∞ºÂ¶ÇÂÆ∂ÈÖíÂ∫óÁúü‰∏çÈîô&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Âú®elasticsearch‰∏≠ÔºåÊó©Êúü‰ΩøÁî®ÁöÑÊâìÂàÜÁÆóÊ≥ïÊòØTF-IDFÁÆóÊ≥ïÔºåÂÖ¨ÂºèÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721190152134.png" alt="image-20210721190152134" tabindex="0" loading="lazy"><figcaption>image-20210721190152134</figcaption></figure><p>Âú®ÂêéÊù•ÁöÑ5.1ÁâàÊú¨ÂçáÁ∫ß‰∏≠ÔºåelasticsearchÂ∞ÜÁÆóÊ≥ïÊîπËøõ‰∏∫BM25ÁÆóÊ≥ïÔºåÂÖ¨ÂºèÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721190416214.png" alt="image-20210721190416214" tabindex="0" loading="lazy"><figcaption>image-20210721190416214</figcaption></figure><p>TF-IDFÁÆóÊ≥ïÊúâ‰∏ÄÂêÑÁº∫Èô∑ÔºåÂ∞±ÊòØËØçÊù°È¢ëÁéáË∂äÈ´òÔºåÊñáÊ°£ÂæóÂàÜ‰πü‰ºöË∂äÈ´òÔºåÂçï‰∏™ËØçÊù°ÂØπÊñáÊ°£ÂΩ±ÂìçËæÉÂ§ß„ÄÇËÄåBM25Âàô‰ºöËÆ©Âçï‰∏™ËØçÊù°ÁöÑÁÆóÂàÜÊúâ‰∏Ä‰∏™‰∏äÈôêÔºåÊõ≤Á∫øÊõ¥Âä†Âπ≥ÊªëÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721190907320.png" alt="image-20210721190907320" tabindex="0" loading="lazy"><figcaption>image-20210721190907320</figcaption></figure><p>Â∞èÁªìÔºöelasticsearch‰ºöÊ†πÊçÆËØçÊù°ÂíåÊñáÊ°£ÁöÑÁõ∏ÂÖ≥Â∫¶ÂÅöÊâìÂàÜÔºåÁÆóÊ≥ïÁî±‰∏§ÁßçÔºö</p><ul><li>TF-IDFÁÆóÊ≥ï</li><li>BM25ÁÆóÊ≥ïÔºåelasticsearch5.1ÁâàÊú¨ÂêéÈááÁî®ÁöÑÁÆóÊ≥ï</li></ul><h3 id="_1-5-2-ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-5-2-ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢"><span>1.5.2.ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢</span></a></h3><p>Ê†πÊçÆÁõ∏ÂÖ≥Â∫¶ÊâìÂàÜÊòØÊØîËæÉÂêàÁêÜÁöÑÈúÄÊ±ÇÔºå‰ΩÜ<strong>ÂêàÁêÜÁöÑ‰∏ç‰∏ÄÂÆöÊòØ‰∫ßÂìÅÁªèÁêÜÈúÄË¶Å</strong>ÁöÑ„ÄÇ</p><p>‰ª•ÁôæÂ∫¶‰∏∫‰æãÔºå‰Ω†ÊêúÁ¥¢ÁöÑÁªìÊûú‰∏≠ÔºåÂπ∂‰∏çÊòØÁõ∏ÂÖ≥Â∫¶Ë∂äÈ´òÊéíÂêçË∂äÈù†ÂâçÔºåËÄåÊòØË∞ÅÊéèÁöÑÈí±Â§öÊéíÂêçÂ∞±Ë∂äÈù†Ââç„ÄÇÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721191144560.png" alt="image-20210721191144560" tabindex="0" loading="lazy"><figcaption>image-20210721191144560</figcaption></figure><p>Ë¶ÅÊÉ≥ËÆ§‰∏∫ÊéßÂà∂Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜÔºåÂ∞±ÈúÄË¶ÅÂà©Áî®elasticsearch‰∏≠ÁöÑfunction score Êü•ËØ¢‰∫Ü„ÄÇ</p><h4 id="_1-ËØ≠Ê≥ïËØ¥Êòé" tabindex="-1"><a class="header-anchor" href="#_1-ËØ≠Ê≥ïËØ¥Êòé"><span>1ÔºâËØ≠Ê≥ïËØ¥Êòé</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721191544750.png" alt="image-20210721191544750" tabindex="0" loading="lazy"><figcaption>image-20210721191544750</figcaption></figure><p>function score Êü•ËØ¢‰∏≠ÂåÖÂê´ÂõõÈÉ®ÂàÜÂÜÖÂÆπÔºö</p><ul><li><strong>ÂéüÂßãÊü•ËØ¢</strong>Êù°‰ª∂ÔºöqueryÈÉ®ÂàÜÔºåÂü∫‰∫éËøô‰∏™Êù°‰ª∂ÊêúÁ¥¢ÊñáÊ°£ÔºåÂπ∂‰∏îÂü∫‰∫éBM25ÁÆóÊ≥ïÁªôÊñáÊ°£ÊâìÂàÜÔºå<strong>ÂéüÂßãÁÆóÂàÜ</strong>Ôºàquery score)</li><li><strong>ËøáÊª§Êù°‰ª∂</strong>ÔºöfilterÈÉ®ÂàÜÔºåÁ¨¶ÂêàËØ•Êù°‰ª∂ÁöÑÊñáÊ°£Êâç‰ºöÈáçÊñ∞ÁÆóÂàÜ</li><li><strong>ÁÆóÂàÜÂáΩÊï∞</strong>ÔºöÁ¨¶ÂêàfilterÊù°‰ª∂ÁöÑÊñáÊ°£Ë¶ÅÊ†πÊçÆËøô‰∏™ÂáΩÊï∞ÂÅöËøêÁÆóÔºåÂæóÂà∞ÁöÑ<strong>ÂáΩÊï∞ÁÆóÂàÜ</strong>Ôºàfunction scoreÔºâÔºåÊúâÂõõÁßçÂáΩÊï∞ <ul><li>weightÔºöÂáΩÊï∞ÁªìÊûúÊòØÂ∏∏Èáè</li><li>field_value_factorÔºö‰ª•ÊñáÊ°£‰∏≠ÁöÑÊüê‰∏™Â≠óÊÆµÂÄº‰Ωú‰∏∫ÂáΩÊï∞ÁªìÊûú</li><li>random_scoreÔºö‰ª•ÈöèÊú∫Êï∞‰Ωú‰∏∫ÂáΩÊï∞ÁªìÊûú</li><li>script_scoreÔºöËá™ÂÆö‰πâÁÆóÂàÜÂáΩÊï∞ÁÆóÊ≥ï</li></ul></li><li><strong>ËøêÁÆóÊ®°Âºè</strong>ÔºöÁÆóÂàÜÂáΩÊï∞ÁöÑÁªìÊûú„ÄÅÂéüÂßãÊü•ËØ¢ÁöÑÁõ∏ÂÖ≥ÊÄßÁÆóÂàÜÔºå‰∏§ËÄÖ‰πãÈó¥ÁöÑËøêÁÆóÊñπÂºèÔºåÂåÖÊã¨Ôºö <ul><li>multiplyÔºöÁõ∏‰πò</li><li>replaceÔºöÁî®function scoreÊõøÊç¢query score</li><li>ÂÖ∂ÂÆÉÔºå‰æãÂ¶ÇÔºösum„ÄÅavg„ÄÅmax„ÄÅmin</li></ul></li></ul><p>function scoreÁöÑËøêË°åÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ul><li>1ÔºâÊ†πÊçÆ<strong>ÂéüÂßãÊù°‰ª∂</strong>Êü•ËØ¢ÊêúÁ¥¢ÊñáÊ°£ÔºåÂπ∂‰∏îËÆ°ÁÆóÁõ∏ÂÖ≥ÊÄßÁÆóÂàÜÔºåÁß∞‰∏∫<strong>ÂéüÂßãÁÆóÂàÜ</strong>Ôºàquery scoreÔºâ</li><li>2ÔºâÊ†πÊçÆ<strong>ËøáÊª§Êù°‰ª∂</strong>ÔºåËøáÊª§ÊñáÊ°£</li><li>3ÔºâÁ¨¶Âêà<strong>ËøáÊª§Êù°‰ª∂</strong>ÁöÑÊñáÊ°£ÔºåÂü∫‰∫é<strong>ÁÆóÂàÜÂáΩÊï∞</strong>ËøêÁÆóÔºåÂæóÂà∞<strong>ÂáΩÊï∞ÁÆóÂàÜ</strong>Ôºàfunction scoreÔºâ</li><li>4ÔºâÂ∞Ü<strong>ÂéüÂßãÁÆóÂàÜ</strong>Ôºàquery scoreÔºâÂíå<strong>ÂáΩÊï∞ÁÆóÂàÜ</strong>Ôºàfunction scoreÔºâÂü∫‰∫é<strong>ËøêÁÆóÊ®°Âºè</strong>ÂÅöËøêÁÆóÔºåÂæóÂà∞ÊúÄÁªàÁªìÊûúÔºå‰Ωú‰∏∫Áõ∏ÂÖ≥ÊÄßÁÆóÂàÜ„ÄÇ</li></ul><p>Âõ†Ê≠§ÔºåÂÖ∂‰∏≠ÁöÑÂÖ≥ÈîÆÁÇπÊòØÔºö</p><ul><li>ËøáÊª§Êù°‰ª∂ÔºöÂÜ≥ÂÆöÂì™‰∫õÊñáÊ°£ÁöÑÁÆóÂàÜË¢´‰øÆÊîπ</li><li>ÁÆóÂàÜÂáΩÊï∞ÔºöÂÜ≥ÂÆöÂáΩÊï∞ÁÆóÂàÜÁöÑÁÆóÊ≥ï</li><li>ËøêÁÆóÊ®°ÂºèÔºöÂÜ≥ÂÆöÊúÄÁªàÁÆóÂàÜÁªìÊûú</li></ul><h4 id="_2-Á§∫‰æã" tabindex="-1"><a class="header-anchor" href="#_2-Á§∫‰æã"><span>2ÔºâÁ§∫‰æã</span></a></h4><p>ÈúÄÊ±ÇÔºöÁªô‚ÄúÂ¶ÇÂÆ∂‚ÄùËøô‰∏™ÂìÅÁâåÁöÑÈÖíÂ∫óÊéíÂêçÈù†Ââç‰∏Ä‰∫õ</p><p>ÁøªËØë‰∏Ä‰∏ãËøô‰∏™ÈúÄÊ±ÇÔºåËΩ¨Êç¢‰∏∫‰πãÂâçËØ¥ÁöÑÂõõ‰∏™Ë¶ÅÁÇπÔºö</p><ul><li>ÂéüÂßãÊù°‰ª∂Ôºö‰∏çÁ°ÆÂÆöÔºåÂèØ‰ª•‰ªªÊÑèÂèòÂåñ</li><li>ËøáÊª§Êù°‰ª∂Ôºöbrand = &quot;Â¶ÇÂÆ∂&quot;</li><li>ÁÆóÂàÜÂáΩÊï∞ÔºöÂèØ‰ª•ÁÆÄÂçïÁ≤óÊö¥ÔºåÁõ¥Êé•ÁªôÂõ∫ÂÆöÁöÑÁÆóÂàÜÁªìÊûúÔºåweight</li><li>ËøêÁÆóÊ®°ÂºèÔºöÊØîÂ¶ÇÊ±ÇÂíå</li></ul><p>Âõ†Ê≠§ÊúÄÁªàÁöÑDSLËØ≠Âè•Â¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;function_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{  </span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">....</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ÂéüÂßãÊü•ËØ¢ÔºåÂèØ‰ª•ÊòØ‰ªªÊÑèÊù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;functions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÁÆóÂàÜÂáΩÊï∞</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;filter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†Êª°Ë∂≥ÁöÑÊù°‰ª∂ÔºåÂìÅÁâåÂøÖÈ°ªÊòØÂ¶ÇÂÆ∂</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Â¶ÇÂÆ∂&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;weight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">¬†//¬†ÁÆóÂàÜÊùÉÈáç‰∏∫2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;boost_mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;sum&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // Âä†ÊùÉÊ®°ÂºèÔºåÊ±ÇÂíå</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÊµãËØïÔºåÂú®Êú™Ê∑ªÂä†ÁÆóÂàÜÂáΩÊï∞Êó∂ÔºåÂ¶ÇÂÆ∂ÂæóÂàÜÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721193152520.png" alt="image-20210721193152520" tabindex="0" loading="lazy"><figcaption>image-20210721193152520</figcaption></figure><p>Ê∑ªÂä†‰∫ÜÁÆóÂàÜÂáΩÊï∞ÂêéÔºåÂ¶ÇÂÆ∂ÂæóÂàÜÂ∞±ÊèêÂçá‰∫ÜÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721193458182.png" alt="image-20210721193458182" tabindex="0" loading="lazy"><figcaption>image-20210721193458182</figcaption></figure><h4 id="_3-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_3-Â∞èÁªì"><span>3ÔºâÂ∞èÁªì</span></a></h4><p>function score queryÂÆö‰πâÁöÑ‰∏âË¶ÅÁ¥†ÊòØ‰ªÄ‰πàÔºü</p><ul><li>ËøáÊª§Êù°‰ª∂ÔºöÂì™‰∫õÊñáÊ°£Ë¶ÅÂä†ÂàÜ</li><li>ÁÆóÂàÜÂáΩÊï∞ÔºöÂ¶Ç‰ΩïËÆ°ÁÆófunction score</li><li>Âä†ÊùÉÊñπÂºèÔºöfunction score ‰∏é query scoreÂ¶Ç‰ΩïËøêÁÆó</li></ul><h3 id="_1-5-3-Â∏ÉÂ∞îÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_1-5-3-Â∏ÉÂ∞îÊü•ËØ¢"><span>1.5.3.Â∏ÉÂ∞îÊü•ËØ¢</span></a></h3><p>Â∏ÉÂ∞îÊü•ËØ¢ÊòØ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êü•ËØ¢Â≠êÂè•ÁöÑÁªÑÂêàÔºåÊØè‰∏Ä‰∏™Â≠êÂè•Â∞±ÊòØ‰∏Ä‰∏™<strong>Â≠êÊü•ËØ¢</strong>„ÄÇÂ≠êÊü•ËØ¢ÁöÑÁªÑÂêàÊñπÂºèÊúâÔºö</p><ul><li>mustÔºöÂøÖÈ°ªÂåπÈÖçÊØè‰∏™Â≠êÊü•ËØ¢ÔºåÁ±ª‰ºº‚Äú‰∏é‚Äù</li><li>shouldÔºöÈÄâÊã©ÊÄßÂåπÈÖçÂ≠êÊü•ËØ¢ÔºåÁ±ª‰ºº‚ÄúÊàñ‚Äù</li><li>must_notÔºöÂøÖÈ°ª‰∏çÂåπÈÖçÔºå<strong>‰∏çÂèÇ‰∏éÁÆóÂàÜ</strong>ÔºåÁ±ª‰ºº‚ÄúÈùû‚Äù</li><li>filterÔºöÂøÖÈ°ªÂåπÈÖçÔºå<strong>‰∏çÂèÇ‰∏éÁÆóÂàÜ</strong></li></ul><p>ÊØîÂ¶ÇÂú®ÊêúÁ¥¢ÈÖíÂ∫óÊó∂ÔºåÈô§‰∫ÜÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢Â§ñÔºåÊàë‰ª¨ËøòÂèØËÉΩÊ†πÊçÆÂìÅÁâå„ÄÅ‰ª∑Ê†º„ÄÅÂüéÂ∏ÇÁ≠âÂ≠óÊÆµÂÅöËøáÊª§Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721193822848.png" alt="image-20210721193822848" tabindex="0" loading="lazy"><figcaption>image-20210721193822848</figcaption></figure><p>ÊØè‰∏Ä‰∏™‰∏çÂêåÁöÑÂ≠óÊÆµÔºåÂÖ∂Êü•ËØ¢ÁöÑÊù°‰ª∂„ÄÅÊñπÂºèÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÂøÖÈ°ªÊòØÂ§ö‰∏™‰∏çÂêåÁöÑÊü•ËØ¢ÔºåËÄåË¶ÅÁªÑÂêàËøô‰∫õÊü•ËØ¢ÔºåÂ∞±ÂøÖÈ°ªÁî®boolÊü•ËØ¢‰∫Ü„ÄÇ</p><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÊêúÁ¥¢Êó∂ÔºåÂèÇ‰∏é<strong>ÊâìÂàÜÁöÑÂ≠óÊÆµË∂äÂ§öÔºåÊü•ËØ¢ÁöÑÊÄßËÉΩ‰πüË∂äÂ∑Æ</strong>„ÄÇÂõ†Ê≠§ËøôÁßçÂ§öÊù°‰ª∂Êü•ËØ¢Êó∂ÔºåÂª∫ËÆÆËøôÊ†∑ÂÅöÔºö</p><ul><li>ÊêúÁ¥¢Ê°ÜÁöÑÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢ÔºåÊòØÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢Ôºå‰ΩøÁî®mustÊü•ËØ¢ÔºåÂèÇ‰∏éÁÆóÂàÜ</li><li>ÂÖ∂ÂÆÉËøáÊª§Êù°‰ª∂ÔºåÈááÁî®filterÊü•ËØ¢„ÄÇ‰∏çÂèÇ‰∏éÁÆóÂàÜ</li></ul><h4 id="_1-ËØ≠Ê≥ïÁ§∫‰æã" tabindex="-1"><a class="header-anchor" href="#_1-ËØ≠Ê≥ïÁ§∫‰æã"><span>1ÔºâËØ≠Ê≥ïÁ§∫‰æãÔºö</span></a></h4><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;bool&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;must&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;city&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;‰∏äÊµ∑&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†}}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;should&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÁöáÂÜ†ÂÅáÊó•&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†}},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂçéÁæéËææ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†}}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;must_not&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†{¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;lte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†}¬†}}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;filter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†{¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;gte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">45</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†}¬†}}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-Á§∫‰æã-1" tabindex="-1"><a class="header-anchor" href="#_2-Á§∫‰æã-1"><span>2ÔºâÁ§∫‰æã</span></a></h4><p>ÈúÄÊ±ÇÔºöÊêúÁ¥¢ÂêçÂ≠óÂåÖÂê´‚ÄúÂ¶ÇÂÆ∂‚ÄùÔºå‰ª∑Ê†º‰∏çÈ´ò‰∫é400ÔºåÂú®ÂùêÊ†á31.21,121.5Âë®Âõ¥10kmËåÉÂõ¥ÂÜÖÁöÑÈÖíÂ∫ó„ÄÇ</p><p>ÂàÜÊûêÔºö</p><ul><li>ÂêçÁß∞ÊêúÁ¥¢ÔºåÂ±û‰∫éÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢ÔºåÂ∫îËØ•ÂèÇ‰∏éÁÆóÂàÜ„ÄÇÊîæÂà∞must‰∏≠</li><li>‰ª∑Ê†º‰∏çÈ´ò‰∫é400ÔºåÁî®rangeÊü•ËØ¢ÔºåÂ±û‰∫éËøáÊª§Êù°‰ª∂Ôºå‰∏çÂèÇ‰∏éÁÆóÂàÜ„ÄÇÊîæÂà∞must_not‰∏≠</li><li>Âë®Âõ¥10kmËåÉÂõ¥ÂÜÖÔºåÁî®geo_distanceÊü•ËØ¢ÔºåÂ±û‰∫éËøáÊª§Êù°‰ª∂Ôºå‰∏çÂèÇ‰∏éÁÆóÂàÜ„ÄÇÊîæÂà∞filter‰∏≠</li></ul><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721194744183.png" alt="image-20210721194744183" tabindex="0" loading="lazy"><figcaption>image-20210721194744183</figcaption></figure><h4 id="_3-Â∞èÁªì-1" tabindex="-1"><a class="header-anchor" href="#_3-Â∞èÁªì-1"><span>3ÔºâÂ∞èÁªì</span></a></h4><p>boolÊü•ËØ¢ÊúâÂá†ÁßçÈÄªËæëÂÖ≥Á≥ªÔºü</p><ul><li>mustÔºöÂøÖÈ°ªÂåπÈÖçÁöÑÊù°‰ª∂ÔºåÂèØ‰ª•ÁêÜËß£‰∏∫‚Äú‰∏é‚Äù</li><li>shouldÔºöÈÄâÊã©ÊÄßÂåπÈÖçÁöÑÊù°‰ª∂ÔºåÂèØ‰ª•ÁêÜËß£‰∏∫‚ÄúÊàñ‚Äù</li><li>must_notÔºöÂøÖÈ°ª‰∏çÂåπÈÖçÁöÑÊù°‰ª∂Ôºå‰∏çÂèÇ‰∏éÊâìÂàÜ</li><li>filterÔºöÂøÖÈ°ªÂåπÈÖçÁöÑÊù°‰ª∂Ôºå‰∏çÂèÇ‰∏éÊâìÂàÜ</li></ul><h1 id="_2-ÊêúÁ¥¢ÁªìÊûúÂ§ÑÁêÜ" tabindex="-1"><a class="header-anchor" href="#_2-ÊêúÁ¥¢ÁªìÊûúÂ§ÑÁêÜ"><span>2.ÊêúÁ¥¢ÁªìÊûúÂ§ÑÁêÜ</span></a></h1><p>ÊêúÁ¥¢ÁöÑÁªìÊûúÂèØ‰ª•ÊåâÁÖßÁî®Êà∑ÊåáÂÆöÁöÑÊñπÂºèÂéªÂ§ÑÁêÜÊàñÂ±ïÁ§∫„ÄÇ</p><h2 id="_2-1-ÊéíÂ∫è" tabindex="-1"><a class="header-anchor" href="#_2-1-ÊéíÂ∫è"><span>2.1.ÊéíÂ∫è</span></a></h2><p>elasticsearchÈªòËÆ§ÊòØÊ†πÊçÆÁõ∏ÂÖ≥Â∫¶ÁÆóÂàÜÔºà_scoreÔºâÊù•ÊéíÂ∫èÔºå‰ΩÜÊòØ‰πüÊîØÊåÅËá™ÂÆö‰πâÊñπÂºèÂØπÊêúÁ¥¢<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/sort-search-results.html" target="_blank" rel="noopener noreferrer">ÁªìÊûúÊéíÂ∫è</a>„ÄÇÂèØ‰ª•ÊéíÂ∫èÂ≠óÊÆµÁ±ªÂûãÊúâÔºökeywordÁ±ªÂûã„ÄÅÊï∞ÂÄºÁ±ªÂûã„ÄÅÂú∞ÁêÜÂùêÊ†áÁ±ªÂûã„ÄÅÊó•ÊúüÁ±ªÂûãÁ≠â„ÄÇ</p><h3 id="_2-1-1-ÊôÆÈÄöÂ≠óÊÆµÊéíÂ∫è" tabindex="-1"><a class="header-anchor" href="#_2-1-1-ÊôÆÈÄöÂ≠óÊÆµÊéíÂ∫è"><span>2.1.1.ÊôÆÈÄöÂ≠óÊÆµÊéíÂ∫è</span></a></h3><p>keyword„ÄÅÊï∞ÂÄº„ÄÅÊó•ÊúüÁ±ªÂûãÊéíÂ∫èÁöÑËØ≠Ê≥ïÂü∫Êú¨‰∏ÄËá¥„ÄÇ</p><p><strong>ËØ≠Ê≥ï</strong>Ôºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match_all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;sort&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;desc&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">¬†¬†//¬†ÊéíÂ∫èÂ≠óÊÆµ„ÄÅÊéíÂ∫èÊñπÂºèASC„ÄÅDESC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÊéíÂ∫èÊù°‰ª∂ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºå‰πüÂ∞±ÊòØÂèØ‰ª•ÂÜôÂ§ö‰∏™ÊéíÂ∫èÊù°‰ª∂„ÄÇÊåâÁÖßÂ£∞ÊòéÁöÑÈ°∫Â∫èÔºåÂΩìÁ¨¨‰∏Ä‰∏™Êù°‰ª∂Áõ∏Á≠âÊó∂ÔºåÂÜçÊåâÁÖßÁ¨¨‰∫å‰∏™Êù°‰ª∂ÊéíÂ∫èÔºå‰ª•Ê≠§Á±ªÊé®</p><p><strong>Á§∫‰æã</strong>Ôºö</p><p>ÈúÄÊ±ÇÊèèËø∞ÔºöÈÖíÂ∫óÊï∞ÊçÆÊåâÁÖßÁî®Êà∑ËØÑ‰ª∑Ôºàscore)ÈôçÂ∫èÊéíÂ∫èÔºåËØÑ‰ª∑Áõ∏ÂêåÁöÑÊåâÁÖß‰ª∑Ê†º(price)ÂçáÂ∫èÊéíÂ∫è</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721195728306.png" alt="image-20210721195728306" tabindex="0" loading="lazy"><figcaption>image-20210721195728306</figcaption></figure><h3 id="_2-1-2-Âú∞ÁêÜÂùêÊ†áÊéíÂ∫è" tabindex="-1"><a class="header-anchor" href="#_2-1-2-Âú∞ÁêÜÂùêÊ†áÊéíÂ∫è"><span>2.1.2.Âú∞ÁêÜÂùêÊ†áÊéíÂ∫è</span></a></h3><p>Âú∞ÁêÜÂùêÊ†áÊéíÂ∫èÁï•Êúâ‰∏çÂêå„ÄÇ</p><p><strong>ËØ≠Ê≥ïËØ¥Êòé</strong>Ôºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match_all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;sort&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;_geo_distance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Á∫¨Â∫¶ÔºåÁªèÂ∫¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ÊñáÊ°£‰∏≠geo_pointÁ±ªÂûãÁöÑÂ≠óÊÆµÂêç„ÄÅÁõÆÊ†áÂùêÊ†áÁÇπ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;order&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;asc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ÊéíÂ∫èÊñπÂºè</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;unit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;km&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // ÊéíÂ∫èÁöÑË∑ùÁ¶ªÂçï‰Ωç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ëøô‰∏™Êü•ËØ¢ÁöÑÂê´‰πâÊòØÔºö</p><ul><li>ÊåáÂÆö‰∏Ä‰∏™ÂùêÊ†áÔºå‰Ωú‰∏∫ÁõÆÊ†áÁÇπ</li><li>ËÆ°ÁÆóÊØè‰∏Ä‰∏™ÊñáÊ°£‰∏≠ÔºåÊåáÂÆöÂ≠óÊÆµÔºàÂøÖÈ°ªÊòØgeo_pointÁ±ªÂûãÔºâÁöÑÂùêÊ†á Âà∞ÁõÆÊ†áÁÇπÁöÑË∑ùÁ¶ªÊòØÂ§öÂ∞ë</li><li>Ê†πÊçÆË∑ùÁ¶ªÊéíÂ∫è</li></ul><p><strong>Á§∫‰æãÔºö</strong></p><p>ÈúÄÊ±ÇÊèèËø∞ÔºöÂÆûÁé∞ÂØπÈÖíÂ∫óÊï∞ÊçÆÊåâÁÖßÂà∞‰Ω†ÁöÑ‰ΩçÁΩÆÂùêÊ†áÁöÑË∑ùÁ¶ªÂçáÂ∫èÊéíÂ∫è</p><p>ÊèêÁ§∫ÔºöËé∑Âèñ‰Ω†ÁöÑ‰ΩçÁΩÆÁöÑÁªèÁ∫¨Â∫¶ÁöÑÊñπÂºèÔºö</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>https://lbs.amap.com/demo/jsapi-v2/example/map/click-to-get-lnglat/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ÂÅáËÆæÊàëÁöÑ‰ΩçÁΩÆÊòØÔºö31.034661Ôºå121.612282ÔºåÂØªÊâæÊàëÂë®Âõ¥Ë∑ùÁ¶ªÊúÄËøëÁöÑÈÖíÂ∫ó„ÄÇ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721200214690.png" alt="image-20210721200214690" tabindex="0" loading="lazy"><figcaption>image-20210721200214690</figcaption></figure><h2 id="_2-2-ÂàÜÈ°µ" tabindex="-1"><a class="header-anchor" href="#_2-2-ÂàÜÈ°µ"><span>2.2.ÂàÜÈ°µ</span></a></h2><p>elasticsearch ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂè™ËøîÂõûtop10ÁöÑÊï∞ÊçÆ„ÄÇËÄåÂ¶ÇÊûúË¶ÅÊü•ËØ¢Êõ¥Â§öÊï∞ÊçÆÂ∞±ÈúÄË¶Å‰øÆÊîπÂàÜÈ°µÂèÇÊï∞‰∫Ü„ÄÇelasticsearch‰∏≠ÈÄöËøá‰øÆÊîπfrom„ÄÅsizeÂèÇÊï∞Êù•ÊéßÂà∂Ë¶ÅËøîÂõûÁöÑÂàÜÈ°µÁªìÊûúÔºö</p><ul><li>fromÔºö‰ªéÁ¨¨Âá†‰∏™ÊñáÊ°£ÂºÄÂßã</li><li>sizeÔºöÊÄªÂÖ±Êü•ËØ¢Âá†‰∏™ÊñáÊ°£</li></ul><p>Á±ª‰ºº‰∫émysql‰∏≠ÁöÑ<code>limit ?, ?</code></p><h3 id="_2-2-1-Âü∫Êú¨ÁöÑÂàÜÈ°µ" tabindex="-1"><a class="header-anchor" href="#_2-2-1-Âü∫Êú¨ÁöÑÂàÜÈ°µ"><span>2.2.1.Âü∫Êú¨ÁöÑÂàÜÈ°µ</span></a></h3><p>ÂàÜÈ°µÁöÑÂü∫Êú¨ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match_all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;from&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÂàÜÈ°µÂºÄÂßãÁöÑ‰ΩçÁΩÆÔºåÈªòËÆ§‰∏∫0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÊúüÊúõËé∑ÂèñÁöÑÊñáÊ°£ÊÄªÊï∞</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;sort&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;asc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-2-Ê∑±Â∫¶ÂàÜÈ°µÈóÆÈ¢ò" tabindex="-1"><a class="header-anchor" href="#_2-2-2-Ê∑±Â∫¶ÂàÜÈ°µÈóÆÈ¢ò"><span>2.2.2.Ê∑±Â∫¶ÂàÜÈ°µÈóÆÈ¢ò</span></a></h3><p>Áé∞Âú®ÔºåÊàëË¶ÅÊü•ËØ¢990~1000ÁöÑÊï∞ÊçÆÔºåÊü•ËØ¢ÈÄªËæëË¶ÅËøô‰πàÂÜôÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match_all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;from&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">990</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÂàÜÈ°µÂºÄÂßãÁöÑ‰ΩçÁΩÆÔºåÈªòËÆ§‰∏∫0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÊúüÊúõËé∑ÂèñÁöÑÊñáÊ°£ÊÄªÊï∞</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;sort&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†{</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;asc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËøôÈáåÊòØÊü•ËØ¢990ÂºÄÂßãÁöÑÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØ Á¨¨990~Á¨¨1000Êù° Êï∞ÊçÆ„ÄÇ</p><p>‰∏çËøáÔºåelasticsearchÂÜÖÈÉ®ÂàÜÈ°µÊó∂ÔºåÂøÖÈ°ªÂÖàÊü•ËØ¢ 0~1000Êù°ÔºåÁÑ∂ÂêéÊà™ÂèñÂÖ∂‰∏≠ÁöÑ990 ~ 1000ÁöÑËøô10Êù°Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721200643029.png" alt="image-20210721200643029" tabindex="0" loading="lazy"><figcaption>image-20210721200643029</figcaption></figure><p>Êü•ËØ¢TOP1000ÔºåÂ¶ÇÊûúesÊòØÂçïÁÇπÊ®°ÂºèÔºåËøôÂπ∂Êó†Â§™Â§ßÂΩ±Âìç„ÄÇ</p><p>‰ΩÜÊòØelasticsearchÂ∞ÜÊù•‰∏ÄÂÆöÊòØÈõÜÁæ§Ôºå‰æãÂ¶ÇÊàëÈõÜÁæ§Êúâ5‰∏™ËäÇÁÇπÔºåÊàëË¶ÅÊü•ËØ¢TOP1000ÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏çÊòØÊØè‰∏™ËäÇÁÇπÊü•ËØ¢200Êù°Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p><p>Âõ†‰∏∫ËäÇÁÇπAÁöÑTOP200ÔºåÂú®Âè¶‰∏Ä‰∏™ËäÇÁÇπÂèØËÉΩÊéíÂà∞10000Âêç‰ª•Â§ñ‰∫Ü„ÄÇ</p><p>Âõ†Ê≠§Ë¶ÅÊÉ≥Ëé∑ÂèñÊï¥‰∏™ÈõÜÁæ§ÁöÑTOP1000ÔºåÂøÖÈ°ªÂÖàÊü•ËØ¢Âá∫ÊØè‰∏™ËäÇÁÇπÁöÑTOP1000ÔºåÊ±áÊÄªÁªìÊûúÂêéÔºåÈáçÊñ∞ÊéíÂêçÔºåÈáçÊñ∞Êà™ÂèñTOP1000„ÄÇ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721201003229.png" alt="image-20210721201003229" tabindex="0" loading="lazy"><figcaption>image-20210721201003229</figcaption></figure><p>ÈÇ£Â¶ÇÊûúÊàëË¶ÅÊü•ËØ¢9900~10000ÁöÑÊï∞ÊçÆÂë¢ÔºüÊòØ‰∏çÊòØË¶ÅÂÖàÊü•ËØ¢TOP10000Âë¢ÔºüÈÇ£ÊØè‰∏™ËäÇÁÇπÈÉΩË¶ÅÊü•ËØ¢10000Êù°ÔºüÊ±áÊÄªÂà∞ÂÜÖÂ≠ò‰∏≠Ôºü</p><p>ÂΩìÊü•ËØ¢ÂàÜÈ°µÊ∑±Â∫¶ËæÉÂ§ßÊó∂ÔºåÊ±áÊÄªÊï∞ÊçÆËøáÂ§öÔºåÂØπÂÜÖÂ≠òÂíåCPU‰ºö‰∫ßÁîüÈùûÂ∏∏Â§ßÁöÑÂéãÂäõÔºåÂõ†Ê≠§elasticsearch‰ºöÁ¶ÅÊ≠¢from+ size Ë∂ÖËøá10000ÁöÑËØ∑Ê±Ç„ÄÇ</p><p>ÈíàÂØπÊ∑±Â∫¶ÂàÜÈ°µÔºåESÊèê‰æõ‰∫Ü‰∏§ÁßçËß£ÂÜ≥ÊñπÊ°àÔºå<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/paginate-search-results.html" target="_blank" rel="noopener noreferrer">ÂÆòÊñπÊñáÊ°£</a>Ôºö</p><ul><li>search afterÔºöÂàÜÈ°µÊó∂ÈúÄË¶ÅÊéíÂ∫èÔºåÂéüÁêÜÊòØ‰ªé‰∏ä‰∏ÄÊ¨°ÁöÑÊéíÂ∫èÂÄºÂºÄÂßãÔºåÊü•ËØ¢‰∏ã‰∏ÄÈ°µÊï∞ÊçÆ„ÄÇÂÆòÊñπÊé®Ëçê‰ΩøÁî®ÁöÑÊñπÂºè„ÄÇ</li><li>scrollÔºöÂéüÁêÜÂ∞ÜÊéíÂ∫èÂêéÁöÑÊñáÊ°£idÂΩ¢ÊàêÂø´ÁÖßÔºå‰øùÂ≠òÂú®ÂÜÖÂ≠ò„ÄÇÂÆòÊñπÂ∑≤Áªè‰∏çÊé®Ëçê‰ΩøÁî®„ÄÇ</li></ul><h3 id="_2-2-3-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_2-2-3-Â∞èÁªì"><span>2.2.3.Â∞èÁªì</span></a></h3><p>ÂàÜÈ°µÊü•ËØ¢ÁöÑÂ∏∏ËßÅÂÆûÁé∞ÊñπÊ°à‰ª•Âèä‰ºòÁº∫ÁÇπÔºö</p><ul><li><p><code>from + size</code>Ôºö</p><ul><li>‰ºòÁÇπÔºöÊîØÊåÅÈöèÊú∫ÁøªÈ°µ</li><li>Áº∫ÁÇπÔºöÊ∑±Â∫¶ÂàÜÈ°µÈóÆÈ¢òÔºåÈªòËÆ§Êü•ËØ¢‰∏äÈôêÔºàfrom + sizeÔºâÊòØ10000</li><li>Âú∫ÊôØÔºöÁôæÂ∫¶„ÄÅ‰∫¨‰∏ú„ÄÅË∞∑Ê≠å„ÄÅÊ∑òÂÆùËøôÊ†∑ÁöÑÈöèÊú∫ÁøªÈ°µÊêúÁ¥¢</li></ul></li><li><p><code>after search</code>Ôºö</p><ul><li>‰ºòÁÇπÔºöÊ≤°ÊúâÊü•ËØ¢‰∏äÈôêÔºàÂçïÊ¨°Êü•ËØ¢ÁöÑsize‰∏çË∂ÖËøá10000Ôºâ</li><li>Áº∫ÁÇπÔºöÂè™ËÉΩÂêëÂêéÈÄêÈ°µÊü•ËØ¢Ôºå‰∏çÊîØÊåÅÈöèÊú∫ÁøªÈ°µ</li><li>Âú∫ÊôØÔºöÊ≤°ÊúâÈöèÊú∫ÁøªÈ°µÈúÄÊ±ÇÁöÑÊêúÁ¥¢Ôºå‰æãÂ¶ÇÊâãÊú∫Âêë‰∏ãÊªöÂä®ÁøªÈ°µ</li></ul></li><li><p><code>scroll</code>Ôºö</p><ul><li>‰ºòÁÇπÔºöÊ≤°ÊúâÊü•ËØ¢‰∏äÈôêÔºàÂçïÊ¨°Êü•ËØ¢ÁöÑsize‰∏çË∂ÖËøá10000Ôºâ</li><li>Áº∫ÁÇπÔºö‰ºöÊúâÈ¢ùÂ§ñÂÜÖÂ≠òÊ∂àËÄóÔºåÂπ∂‰∏îÊêúÁ¥¢ÁªìÊûúÊòØÈùûÂÆûÊó∂ÁöÑ</li><li>Âú∫ÊôØÔºöÊµ∑ÈáèÊï∞ÊçÆÁöÑËé∑ÂèñÂíåËøÅÁßª„ÄÇ‰ªéES7.1ÂºÄÂßã‰∏çÊé®ËçêÔºåÂª∫ËÆÆÁî® after searchÊñπÊ°à„ÄÇ</li></ul></li></ul><h2 id="_2-3-È´ò‰∫Æ" tabindex="-1"><a class="header-anchor" href="#_2-3-È´ò‰∫Æ"><span>2.3.È´ò‰∫Æ</span></a></h2><h3 id="_2-3-1-È´ò‰∫ÆÂéüÁêÜ" tabindex="-1"><a class="header-anchor" href="#_2-3-1-È´ò‰∫ÆÂéüÁêÜ"><span>2.3.1.È´ò‰∫ÆÂéüÁêÜ</span></a></h3><p>‰ªÄ‰πàÊòØÈ´ò‰∫ÆÊòæÁ§∫Âë¢Ôºü</p><p>Êàë‰ª¨Âú®ÁôæÂ∫¶Ôºå‰∫¨‰∏úÊêúÁ¥¢Êó∂ÔºåÂÖ≥ÈîÆÂ≠ó‰ºöÂèòÊàêÁ∫¢Ëâ≤ÔºåÊØîËæÉÈÜíÁõÆÔºåËøôÂè´È´ò‰∫ÆÊòæÁ§∫Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721202705030.png" alt="image-20210721202705030" tabindex="0" loading="lazy"><figcaption>image-20210721202705030</figcaption></figure><p>È´ò‰∫ÆÊòæÁ§∫ÁöÑÂÆûÁé∞ÂàÜ‰∏∫‰∏§Ê≠•Ôºö</p><ul><li>1ÔºâÁªôÊñáÊ°£‰∏≠ÁöÑÊâÄÊúâÂÖ≥ÈîÆÂ≠óÈÉΩÊ∑ªÂä†‰∏Ä‰∏™Ê†áÁ≠æÔºå‰æãÂ¶Ç<code>&lt;em&gt;</code>Ê†áÁ≠æ</li><li>2ÔºâÈ°µÈù¢Áªô<code>&lt;em&gt;</code>Ê†áÁ≠æÁºñÂÜôCSSÊ†∑Âºè</li></ul><h3 id="_2-3-2-ÂÆûÁé∞È´ò‰∫Æ" tabindex="-1"><a class="header-anchor" href="#_2-3-2-ÂÆûÁé∞È´ò‰∫Æ"><span>2.3.2.ÂÆûÁé∞È´ò‰∫Æ</span></a></h3><p><strong>È´ò‰∫ÆÁöÑËØ≠Ê≥ï</strong>Ôºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;TEXT&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // Êü•ËØ¢Êù°‰ª∂ÔºåÈ´ò‰∫Æ‰∏ÄÂÆöË¶Å‰ΩøÁî®ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;highlight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;fields&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÊåáÂÆöË¶ÅÈ´ò‰∫ÆÁöÑÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;pre_tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&lt;em&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†Áî®Êù•Ê†áËÆ∞È´ò‰∫ÆÂ≠óÊÆµÁöÑÂâçÁΩÆÊ†áÁ≠æ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;post_tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&lt;/em&gt;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">¬†//¬†Áî®Êù•Ê†áËÆ∞È´ò‰∫ÆÂ≠óÊÆµÁöÑÂêéÁΩÆÊ†áÁ≠æ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Ê≥®ÊÑèÔºö</strong></p><ul><li>È´ò‰∫ÆÊòØÂØπÂÖ≥ÈîÆÂ≠óÈ´ò‰∫ÆÔºåÂõ†Ê≠§<strong>ÊêúÁ¥¢Êù°‰ª∂ÂøÖÈ°ªÂ∏¶ÊúâÂÖ≥ÈîÆÂ≠ó</strong>ÔºåËÄå‰∏çËÉΩÊòØËåÉÂõ¥ËøôÊ†∑ÁöÑÊü•ËØ¢„ÄÇ</li><li>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå<strong>È´ò‰∫ÆÁöÑÂ≠óÊÆµÔºåÂøÖÈ°ª‰∏éÊêúÁ¥¢ÊåáÂÆöÁöÑÂ≠óÊÆµ‰∏ÄËá¥</strong>ÔºåÂê¶ÂàôÊó†Ê≥ïÈ´ò‰∫Æ</li><li>Â¶ÇÊûúË¶ÅÂØπÈùûÊêúÁ¥¢Â≠óÊÆµÈ´ò‰∫ÆÔºåÂàôÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™Â±ûÊÄßÔºörequired_field_match=false</li></ul><p><strong>Á§∫‰æã</strong>Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721203349633.png" alt="image-20210721203349633" tabindex="0" loading="lazy"><figcaption>image-20210721203349633</figcaption></figure><h2 id="_2-4-ÊÄªÁªì" tabindex="-1"><a class="header-anchor" href="#_2-4-ÊÄªÁªì"><span>2.4.ÊÄªÁªì</span></a></h2><p>Êü•ËØ¢ÁöÑDSLÊòØ‰∏Ä‰∏™Â§ßÁöÑJSONÂØπË±°ÔºåÂåÖÂê´‰∏ãÂàóÂ±ûÊÄßÔºö</p><ul><li>queryÔºöÊü•ËØ¢Êù°‰ª∂</li><li>fromÂíåsizeÔºöÂàÜÈ°µÊù°‰ª∂</li><li>sortÔºöÊéíÂ∫èÊù°‰ª∂</li><li>highlightÔºöÈ´ò‰∫ÆÊù°‰ª∂</li></ul><p>Á§∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721203657850.png" alt="image-20210721203657850" tabindex="0" loading="lazy"><figcaption>image-20210721203657850</figcaption></figure><h1 id="_3-restclientÊü•ËØ¢ÊñáÊ°£" tabindex="-1"><a class="header-anchor" href="#_3-restclientÊü•ËØ¢ÊñáÊ°£"><span>3.RestClientÊü•ËØ¢ÊñáÊ°£</span></a></h1><p>ÊñáÊ°£ÁöÑÊü•ËØ¢ÂêåÊ†∑ÈÄÇÁî®Êò®Â§©Â≠¶‰π†ÁöÑ RestHighLevelClientÂØπË±°ÔºåÂü∫Êú¨Ê≠•È™§ÂåÖÊã¨Ôºö</p><ul><li>1ÔºâÂáÜÂ§áRequestÂØπË±°</li><li>2ÔºâÂáÜÂ§áËØ∑Ê±ÇÂèÇÊï∞</li><li>3ÔºâÂèëËµ∑ËØ∑Ê±Ç</li><li>4ÔºâËß£ÊûêÂìçÂ∫î</li></ul><h2 id="_3-1-Âø´ÈÄüÂÖ•Èó®" tabindex="-1"><a class="header-anchor" href="#_3-1-Âø´ÈÄüÂÖ•Èó®"><span>3.1.Âø´ÈÄüÂÖ•Èó®</span></a></h2><p>Êàë‰ª¨‰ª•match_allÊü•ËØ¢‰∏∫‰æã</p><h3 id="_3-1-1-ÂèëËµ∑Êü•ËØ¢ËØ∑Ê±Ç" tabindex="-1"><a class="header-anchor" href="#_3-1-1-ÂèëËµ∑Êü•ËØ¢ËØ∑Ê±Ç"><span>3.1.1.ÂèëËµ∑Êü•ËØ¢ËØ∑Ê±Ç</span></a></h3><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721203950559.png" alt="image-20210721203950559" tabindex="0" loading="lazy"><figcaption>image-20210721203950559</figcaption></figure><p>‰ª£Á†ÅËß£ËØªÔºö</p><ul><li><p>Á¨¨‰∏ÄÊ≠•ÔºåÂàõÂª∫<code>SearchRequest</code>ÂØπË±°ÔºåÊåáÂÆöÁ¥¢ÂºïÂ∫ìÂêç</p></li><li><p>Á¨¨‰∫åÊ≠•ÔºåÂà©Áî®<code>request.source()</code>ÊûÑÂª∫DSLÔºåDSL‰∏≠ÂèØ‰ª•ÂåÖÂê´Êü•ËØ¢„ÄÅÂàÜÈ°µ„ÄÅÊéíÂ∫è„ÄÅÈ´ò‰∫ÆÁ≠â</p><ul><li><code>query()</code>Ôºö‰ª£Ë°®Êü•ËØ¢Êù°‰ª∂ÔºåÂà©Áî®<code>QueryBuilders.matchAllQuery()</code>ÊûÑÂª∫‰∏Ä‰∏™match_allÊü•ËØ¢ÁöÑDSL</li></ul></li><li><p>Á¨¨‰∏âÊ≠•ÔºåÂà©Áî®client.search()ÂèëÈÄÅËØ∑Ê±ÇÔºåÂæóÂà∞ÂìçÂ∫î</p></li></ul><p>ËøôÈáåÂÖ≥ÈîÆÁöÑAPIÊúâ‰∏§‰∏™Ôºå‰∏Ä‰∏™ÊòØ<code>request.source()</code>ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÊü•ËØ¢„ÄÅÊéíÂ∫è„ÄÅÂàÜÈ°µ„ÄÅÈ´ò‰∫ÆÁ≠âÊâÄÊúâÂäüËÉΩÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215640790.png" alt="image-20210721215640790" tabindex="0" loading="lazy"><figcaption>image-20210721215640790</figcaption></figure><p>Âè¶‰∏Ä‰∏™ÊòØ<code>QueryBuilders</code>ÔºåÂÖ∂‰∏≠ÂåÖÂê´match„ÄÅterm„ÄÅfunction_score„ÄÅboolÁ≠âÂêÑÁßçÊü•ËØ¢Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215729236.png" alt="image-20210721215729236" tabindex="0" loading="lazy"><figcaption>image-20210721215729236</figcaption></figure><h3 id="_3-1-2-Ëß£ÊûêÂìçÂ∫î" tabindex="-1"><a class="header-anchor" href="#_3-1-2-Ëß£ÊûêÂìçÂ∫î"><span>3.1.2.Ëß£ÊûêÂìçÂ∫î</span></a></h3><p>ÂìçÂ∫îÁªìÊûúÁöÑËß£ÊûêÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721214221057.png" alt="image-20210721214221057" tabindex="0" loading="lazy"><figcaption>image-20210721214221057</figcaption></figure><p>elasticsearchËøîÂõûÁöÑÁªìÊûúÊòØ‰∏Ä‰∏™JSONÂ≠óÁ¨¶‰∏≤ÔºåÁªìÊûÑÂåÖÂê´Ôºö</p><ul><li><code>hits</code>ÔºöÂëΩ‰∏≠ÁöÑÁªìÊûú <ul><li><code>total</code>ÔºöÊÄªÊù°Êï∞ÔºåÂÖ∂‰∏≠ÁöÑvalueÊòØÂÖ∑‰ΩìÁöÑÊÄªÊù°Êï∞ÂÄº</li><li><code>max_score</code>ÔºöÊâÄÊúâÁªìÊûú‰∏≠ÂæóÂàÜÊúÄÈ´òÁöÑÊñáÊ°£ÁöÑÁõ∏ÂÖ≥ÊÄßÁÆóÂàÜ</li><li><code>hits</code>ÔºöÊêúÁ¥¢ÁªìÊûúÁöÑÊñáÊ°£Êï∞ÁªÑÔºåÂÖ∂‰∏≠ÁöÑÊØè‰∏™ÊñáÊ°£ÈÉΩÊòØ‰∏Ä‰∏™jsonÂØπË±° <ul><li><code>_source</code>ÔºöÊñáÊ°£‰∏≠ÁöÑÂéüÂßãÊï∞ÊçÆÔºå‰πüÊòØjsonÂØπË±°</li></ul></li></ul></li></ul><p>Âõ†Ê≠§ÔºåÊàë‰ª¨Ëß£ÊûêÂìçÂ∫îÁªìÊûúÔºåÂ∞±ÊòØÈÄêÂ±ÇËß£ÊûêJSONÂ≠óÁ¨¶‰∏≤ÔºåÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ul><li><code>SearchHits</code>ÔºöÈÄöËøáresponse.getHits()Ëé∑ÂèñÔºåÂ∞±ÊòØJSON‰∏≠ÁöÑÊúÄÂ§ñÂ±ÇÁöÑhitsÔºå‰ª£Ë°®ÂëΩ‰∏≠ÁöÑÁªìÊûú <ul><li><code>SearchHits#getTotalHits().value</code>ÔºöËé∑ÂèñÊÄªÊù°Êï∞‰ø°ÊÅØ</li><li><code>SearchHits#getHits()</code>ÔºöËé∑ÂèñSearchHitÊï∞ÁªÑÔºå‰πüÂ∞±ÊòØÊñáÊ°£Êï∞ÁªÑ <ul><li><code>SearchHit#getSourceAsString()</code>ÔºöËé∑ÂèñÊñáÊ°£ÁªìÊûú‰∏≠ÁöÑ_sourceÔºå‰πüÂ∞±ÊòØÂéüÂßãÁöÑjsonÊñáÊ°£Êï∞ÊçÆ</li></ul></li></ul></li></ul><h3 id="_3-1-3-ÂÆåÊï¥‰ª£Á†Å" tabindex="-1"><a class="header-anchor" href="#_3-1-3-ÂÆåÊï¥‰ª£Á†Å"><span>3.1.3.ÂÆåÊï¥‰ª£Á†Å</span></a></h3><p>ÂÆåÊï¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testMatchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchAllQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(response)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> searchHits </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.1.Ëé∑ÂèñÊÄªÊù°Êï∞</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> total </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> searchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getTotalHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÖ±ÊêúÁ¥¢Âà∞&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> total </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Êù°Êï∞ÊçÆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.2.ÊñáÊ°£Êï∞ÁªÑ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">    SearchHit</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">[] hits </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> searchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.3.ÈÅçÂéÜ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SearchHit</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hit </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hits) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // Ëé∑ÂèñÊñáÊ°£source</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSourceAsString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ÂèçÂ∫èÂàóÂåñ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelDoc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parseObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(json, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotelDoc = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> hotelDoc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-1-4-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_3-1-4-Â∞èÁªì"><span>3.1.4.Â∞èÁªì</span></a></h3><p>Êü•ËØ¢ÁöÑÂü∫Êú¨Ê≠•È™§ÊòØÔºö</p><ol><li><p>ÂàõÂª∫SearchRequestÂØπË±°</p></li><li><p>ÂáÜÂ§áRequest.source()Ôºå‰πüÂ∞±ÊòØDSL„ÄÇ</p><p>‚ë† QueryBuildersÊù•ÊûÑÂª∫Êü•ËØ¢Êù°‰ª∂</p><p>‚ë° ‰º†ÂÖ•Request.source() ÁöÑ query() ÊñπÊ≥ï</p></li><li><p>ÂèëÈÄÅËØ∑Ê±ÇÔºåÂæóÂà∞ÁªìÊûú</p></li><li><p>Ëß£ÊûêÁªìÊûúÔºàÂèÇËÄÉJSONÁªìÊûúÔºå‰ªéÂ§ñÂà∞ÂÜÖÔºåÈÄêÂ±ÇËß£ÊûêÔºâ</p></li></ol><h2 id="_3-2-matchÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_3-2-matchÊü•ËØ¢"><span>3.2.matchÊü•ËØ¢</span></a></h2><p>ÂÖ®ÊñáÊ£ÄÁ¥¢ÁöÑmatchÂíåmulti_matchÊü•ËØ¢‰∏ématch_allÁöÑAPIÂü∫Êú¨‰∏ÄËá¥„ÄÇÂ∑ÆÂà´ÊòØÊü•ËØ¢Êù°‰ª∂Ôºå‰πüÂ∞±ÊòØqueryÁöÑÈÉ®ÂàÜ„ÄÇ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215923060.png" alt="image-20210721215923060" tabindex="0" loading="lazy"><figcaption>image-20210721215923060</figcaption></figure><p>Âõ†Ê≠§ÔºåJava‰ª£Á†Å‰∏äÁöÑÂ∑ÆÂºÇ‰∏ªË¶ÅÊòØrequest.source().query()‰∏≠ÁöÑÂèÇÊï∞‰∫Ü„ÄÇÂêåÊ†∑ÊòØÂà©Áî®QueryBuildersÊèê‰æõÁöÑÊñπÊ≥ïÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721215843099.png" alt="image-20210721215843099" tabindex="0" loading="lazy"><figcaption>image-20210721215843099</figcaption></figure><p>ËÄåÁªìÊûúËß£Êûê‰ª£Á†ÅÂàôÂÆåÂÖ®‰∏ÄËá¥ÔºåÂèØ‰ª•ÊäΩÂèñÂπ∂ÂÖ±‰∫´„ÄÇ</p><p>ÂÆåÊï¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testMatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Â¶ÇÂÆ∂&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(response)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-3-Á≤æÁ°ÆÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_3-3-Á≤æÁ°ÆÊü•ËØ¢"><span>3.3.Á≤æÁ°ÆÊü•ËØ¢</span></a></h2><p>Á≤æÁ°ÆÊü•ËØ¢‰∏ªË¶ÅÊòØ‰∏§ËÄÖÔºö</p><ul><li>termÔºöËØçÊù°Á≤æÁ°ÆÂåπÈÖç</li><li>rangeÔºöËåÉÂõ¥Êü•ËØ¢</li></ul><p>‰∏é‰πãÂâçÁöÑÊü•ËØ¢Áõ∏ÊØîÔºåÂ∑ÆÂºÇÂêåÊ†∑Âú®Êü•ËØ¢Êù°‰ª∂ÔºåÂÖ∂ÂÆÉÈÉΩ‰∏ÄÊ†∑„ÄÇ</p><p>Êü•ËØ¢Êù°‰ª∂ÊûÑÈÄ†ÁöÑAPIÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721220305140.png" alt="image-20210721220305140" tabindex="0" loading="lazy"><figcaption>image-20210721220305140</figcaption></figure><h2 id="_3-4-Â∏ÉÂ∞îÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_3-4-Â∏ÉÂ∞îÊü•ËØ¢"><span>3.4.Â∏ÉÂ∞îÊü•ËØ¢</span></a></h2><p>Â∏ÉÂ∞îÊü•ËØ¢ÊòØÁî®must„ÄÅmust_not„ÄÅfilterÁ≠âÊñπÂºèÁªÑÂêàÂÖ∂ÂÆÉÊü•ËØ¢Ôºå‰ª£Á†ÅÁ§∫‰æãÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721220927286.png" alt="image-20210721220927286" tabindex="0" loading="lazy"><figcaption>image-20210721220927286</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞ÔºåAPI‰∏éÂÖ∂ÂÆÉÊü•ËØ¢ÁöÑÂ∑ÆÂà´ÂêåÊ†∑ÊòØÂú®Êü•ËØ¢Êù°‰ª∂ÁöÑÊûÑÂª∫ÔºåQueryBuildersÔºåÁªìÊûúËß£ÊûêÁ≠âÂÖ∂‰ªñ‰ª£Á†ÅÂÆåÂÖ®‰∏çÂèò„ÄÇ</p><p>ÂÆåÊï¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testBool</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.1.ÂáÜÂ§áBooleanQuery</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    BoolQueryBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> boolQuery </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.2.Ê∑ªÂä†term</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">must</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;city&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Êù≠Â∑û&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.3.Ê∑ªÂä†range</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rangeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lte</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">250</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(boolQuery);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(response)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-ÊéíÂ∫è„ÄÅÂàÜÈ°µ" tabindex="-1"><a class="header-anchor" href="#_3-5-ÊéíÂ∫è„ÄÅÂàÜÈ°µ"><span>3.5.ÊéíÂ∫è„ÄÅÂàÜÈ°µ</span></a></h2><p>ÊêúÁ¥¢ÁªìÊûúÁöÑÊéíÂ∫èÂíåÂàÜÈ°µÊòØ‰∏équeryÂêåÁ∫ßÁöÑÂèÇÊï∞ÔºåÂõ†Ê≠§ÂêåÊ†∑ÊòØ‰ΩøÁî®request.source()Êù•ËÆæÁΩÆ„ÄÇ</p><p>ÂØπÂ∫îÁöÑAPIÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721221121266.png" alt="image-20210721221121266" tabindex="0" loading="lazy"><figcaption>image-20210721221121266</figcaption></figure><p>ÂÆåÊï¥‰ª£Á†ÅÁ§∫‰æãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testPageAndSort</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // È°µÁ†ÅÔºåÊØèÈ°µÂ§ßÂ∞è</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> page </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> size </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.1.query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchAllQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.2.ÊéíÂ∫è sort</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SortOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ASC</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.3.ÂàÜÈ°µ from„ÄÅsize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((page </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> size).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(response)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-6-È´ò‰∫Æ" tabindex="-1"><a class="header-anchor" href="#_3-6-È´ò‰∫Æ"><span>3.6.È´ò‰∫Æ</span></a></h2><p>È´ò‰∫ÆÁöÑ‰ª£Á†Å‰∏é‰πãÂâç‰ª£Á†ÅÂ∑ÆÂºÇËæÉÂ§ßÔºåÊúâ‰∏§ÁÇπÔºö</p><ul><li>Êü•ËØ¢ÁöÑDSLÔºöÂÖ∂‰∏≠Èô§‰∫ÜÊü•ËØ¢Êù°‰ª∂ÔºåËøòÈúÄË¶ÅÊ∑ªÂä†È´ò‰∫ÆÊù°‰ª∂ÔºåÂêåÊ†∑ÊòØ‰∏équeryÂêåÁ∫ß„ÄÇ</li><li>ÁªìÊûúËß£ÊûêÔºöÁªìÊûúÈô§‰∫ÜË¶ÅËß£Êûê_sourceÊñáÊ°£Êï∞ÊçÆÔºåËøòË¶ÅËß£ÊûêÈ´ò‰∫ÆÁªìÊûú</li></ul><h3 id="_3-6-1-È´ò‰∫ÆËØ∑Ê±ÇÊûÑÂª∫" tabindex="-1"><a class="header-anchor" href="#_3-6-1-È´ò‰∫ÆËØ∑Ê±ÇÊûÑÂª∫"><span>3.6.1.È´ò‰∫ÆËØ∑Ê±ÇÊûÑÂª∫</span></a></h3><p>È´ò‰∫ÆËØ∑Ê±ÇÁöÑÊûÑÂª∫APIÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721221744883.png" alt="image-20210721221744883" tabindex="0" loading="lazy"><figcaption>image-20210721221744883</figcaption></figure><p>‰∏äËø∞‰ª£Á†ÅÁúÅÁï•‰∫ÜÊü•ËØ¢Êù°‰ª∂ÈÉ®ÂàÜÔºå‰ΩÜÊòØÂ§ßÂÆ∂‰∏çË¶ÅÂøò‰∫ÜÔºöÈ´ò‰∫ÆÊü•ËØ¢ÂøÖÈ°ª‰ΩøÁî®ÂÖ®ÊñáÊ£ÄÁ¥¢Êü•ËØ¢ÔºåÂπ∂‰∏îË¶ÅÊúâÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠óÔºåÂ∞ÜÊù•ÊâçÂèØ‰ª•ÂØπÂÖ≥ÈîÆÂ≠óÈ´ò‰∫Æ„ÄÇ</p><p>ÂÆåÊï¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> testHighlight</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.1.query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Â¶ÇÂÆ∂&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.2.È´ò‰∫Æ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">highlighter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> HighlightBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">field</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">requireFieldMatch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(response)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-2-È´ò‰∫ÆÁªìÊûúËß£Êûê" tabindex="-1"><a class="header-anchor" href="#_3-6-2-È´ò‰∫ÆÁªìÊûúËß£Êûê"><span>3.6.2.È´ò‰∫ÆÁªìÊûúËß£Êûê</span></a></h3><p>È´ò‰∫ÆÁöÑÁªìÊûú‰∏éÊü•ËØ¢ÁöÑÊñáÊ°£ÁªìÊûúÈªòËÆ§ÊòØÂàÜÁ¶ªÁöÑÔºåÂπ∂‰∏çÂú®‰∏ÄËµ∑„ÄÇ</p><p>Âõ†Ê≠§Ëß£ÊûêÈ´ò‰∫ÆÁöÑ‰ª£Á†ÅÈúÄË¶ÅÈ¢ùÂ§ñÂ§ÑÁêÜÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721222057212.png" alt="image-20210721222057212" tabindex="0" loading="lazy"><figcaption>image-20210721222057212</figcaption></figure><p>‰ª£Á†ÅËß£ËØªÔºö</p><ul><li>Á¨¨‰∏ÄÊ≠•Ôºö‰ªéÁªìÊûú‰∏≠Ëé∑Âèñsource„ÄÇhit.getSourceAsString()ÔºåËøôÈÉ®ÂàÜÊòØÈùûÈ´ò‰∫ÆÁªìÊûúÔºåjsonÂ≠óÁ¨¶‰∏≤„ÄÇËøòÈúÄË¶ÅÂèçÂ∫èÂàó‰∏∫HotelDocÂØπË±°</li><li>Á¨¨‰∫åÊ≠•ÔºöËé∑ÂèñÈ´ò‰∫ÆÁªìÊûú„ÄÇhit.getHighlightFields()ÔºåËøîÂõûÂÄºÊòØ‰∏Ä‰∏™MapÔºåkeyÊòØÈ´ò‰∫ÆÂ≠óÊÆµÂêçÁß∞ÔºåÂÄºÊòØHighlightFieldÂØπË±°Ôºå‰ª£Ë°®È´ò‰∫ÆÂÄº</li><li>Á¨¨‰∏âÊ≠•Ôºö‰ªémap‰∏≠Ê†πÊçÆÈ´ò‰∫ÆÂ≠óÊÆµÂêçÁß∞ÔºåËé∑ÂèñÈ´ò‰∫ÆÂ≠óÊÆµÂÄºÂØπË±°HighlightField</li><li>Á¨¨ÂõõÊ≠•Ôºö‰ªéHighlightField‰∏≠Ëé∑ÂèñFragmentsÔºåÂπ∂‰∏îËΩ¨‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇËøôÈÉ®ÂàÜÂ∞±ÊòØÁúüÊ≠£ÁöÑÈ´ò‰∫ÆÂ≠óÁ¨¶‰∏≤‰∫Ü</li><li>Á¨¨‰∫îÊ≠•ÔºöÁî®È´ò‰∫ÆÁöÑÁªìÊûúÊõøÊç¢HotelDoc‰∏≠ÁöÑÈùûÈ´ò‰∫ÆÁªìÊûú</li></ul><p>ÂÆåÊï¥‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> searchHits </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.1.Ëé∑ÂèñÊÄªÊù°Êï∞</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> total </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> searchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getTotalHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂÖ±ÊêúÁ¥¢Âà∞&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> total </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;Êù°Êï∞ÊçÆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.2.ÊñáÊ°£Êï∞ÁªÑ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">    SearchHit</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">[] hits </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> searchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.3.ÈÅçÂéÜ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SearchHit</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hit </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hits) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // Ëé∑ÂèñÊñáÊ°£source</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSourceAsString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ÂèçÂ∫èÂàóÂåñ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelDoc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parseObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(json, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // Ëé∑ÂèñÈ´ò‰∫ÆÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> HighlightField</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> highlightFields </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getHighlightFields</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">CollectionUtils</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(highlightFields)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // Ê†πÊçÆÂ≠óÊÆµÂêçËé∑ÂèñÈ´ò‰∫ÆÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            HighlightField</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> highlightField </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> highlightFields</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (highlightField </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">                // Ëé∑ÂèñÈ´ò‰∫ÆÂÄº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> highlightField</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getFragments</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">                // Ë¶ÜÁõñÈùûÈ´ò‰∫ÆÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                hotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotelDoc = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> hotelDoc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_4-ÈªëÈ©¨ÊóÖÊ∏∏Ê°à‰æã" tabindex="-1"><a class="header-anchor" href="#_4-ÈªëÈ©¨ÊóÖÊ∏∏Ê°à‰æã"><span>4.ÈªëÈ©¨ÊóÖÊ∏∏Ê°à‰æã</span></a></h1><p>‰∏ãÈù¢ÔºåÊàë‰ª¨ÈÄöËøáÈªëÈ©¨ÊóÖÊ∏∏ÁöÑÊ°à‰æãÊù•ÂÆûÊàòÊºîÁªÉ‰∏ã‰πãÂâçÂ≠¶‰π†ÁöÑÁü•ËØÜ„ÄÇ</p><p>Êàë‰ª¨ÂÆûÁé∞ÂõõÈÉ®ÂàÜÂäüËÉΩÔºö</p><ul><li>ÈÖíÂ∫óÊêúÁ¥¢ÂíåÂàÜÈ°µ</li><li>ÈÖíÂ∫óÁªìÊûúËøáÊª§</li><li>ÊàëÂë®ËæπÁöÑÈÖíÂ∫ó</li><li>ÈÖíÂ∫óÁ´û‰ª∑ÊéíÂêç</li></ul><p>ÂêØÂä®Êàë‰ª¨Êèê‰æõÁöÑhotel-demoÈ°πÁõÆÔºåÂÖ∂ÈªòËÆ§Á´ØÂè£ÊòØ8089ÔºåËÆøÈóÆ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>http://localhost:8090</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Â∞±ËÉΩÁúãÂà∞È°πÁõÆÈ°µÈù¢‰∫ÜÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721223159598.png" alt="image-20210721223159598" tabindex="0" loading="lazy"><figcaption>image-20210721223159598</figcaption></figure><h2 id="_4-1-ÈÖíÂ∫óÊêúÁ¥¢ÂíåÂàÜÈ°µ" tabindex="-1"><a class="header-anchor" href="#_4-1-ÈÖíÂ∫óÊêúÁ¥¢ÂíåÂàÜÈ°µ"><span>4.1.ÈÖíÂ∫óÊêúÁ¥¢ÂíåÂàÜÈ°µ</span></a></h2><p>Ê°à‰æãÈúÄÊ±ÇÔºöÂÆûÁé∞ÈªëÈ©¨ÊóÖÊ∏∏ÁöÑÈÖíÂ∫óÊêúÁ¥¢ÂäüËÉΩÔºåÂÆåÊàêÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢ÂíåÂàÜÈ°µ</p><h3 id="_4-1-1-ÈúÄÊ±ÇÂàÜÊûê" tabindex="-1"><a class="header-anchor" href="#_4-1-1-ÈúÄÊ±ÇÂàÜÊûê"><span>4.1.1.ÈúÄÊ±ÇÂàÜÊûê</span></a></h3><p>Âú®È°πÁõÆÁöÑÈ¶ñÈ°µÔºåÊúâ‰∏Ä‰∏™Â§ßÂ§ßÁöÑÊêúÁ¥¢Ê°ÜÔºåËøòÊúâÂàÜÈ°µÊåâÈíÆÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721223859419.png" alt="image-20210721223859419" tabindex="0" loading="lazy"><figcaption>image-20210721223859419</figcaption></figure><p>ÁÇπÂáªÊêúÁ¥¢ÊåâÈíÆÔºåÂèØ‰ª•ÁúãÂà∞ÊµèËßàÂô®ÊéßÂà∂Âè∞ÂèëÂá∫‰∫ÜËØ∑Ê±ÇÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721224033789.png" alt="image-20210721224033789" tabindex="0" loading="lazy"><figcaption>image-20210721224033789</figcaption></figure><p>ËØ∑Ê±ÇÂèÇÊï∞Â¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721224112708.png" alt="image-20210721224112708" tabindex="0" loading="lazy"><figcaption>image-20210721224112708</figcaption></figure><p>Áî±Ê≠§ÂèØ‰ª•Áü•ÈÅìÔºåÊàë‰ª¨Ëøô‰∏™ËØ∑Ê±ÇÁöÑ‰ø°ÊÅØÂ¶Ç‰∏ãÔºö</p><ul><li>ËØ∑Ê±ÇÊñπÂºèÔºöPOST</li><li>ËØ∑Ê±ÇË∑ØÂæÑÔºö/hotel/list</li><li>ËØ∑Ê±ÇÂèÇÊï∞ÔºöJSONÂØπË±°ÔºåÂåÖÂê´4‰∏™Â≠óÊÆµÔºö <ul><li>keyÔºöÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó</li><li>pageÔºöÈ°µÁ†Å</li><li>sizeÔºöÊØèÈ°µÂ§ßÂ∞è</li><li>sortByÔºöÊéíÂ∫èÔºåÁõÆÂâçÊöÇ‰∏çÂÆûÁé∞</li></ul></li><li>ËøîÂõûÂÄºÔºöÂàÜÈ°µÊü•ËØ¢ÔºåÈúÄË¶ÅËøîÂõûÂàÜÈ°µÁªìÊûúPageResultÔºåÂåÖÂê´‰∏§‰∏™Â±ûÊÄßÔºö <ul><li><code>total</code>ÔºöÊÄªÊù°Êï∞</li><li><code>List&lt;HotelDoc&gt;</code>ÔºöÂΩìÂâçÈ°µÁöÑÊï∞ÊçÆ</li></ul></li></ul><p>Âõ†Ê≠§ÔºåÊàë‰ª¨ÂÆûÁé∞‰∏öÂä°ÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ul><li>Ê≠•È™§‰∏ÄÔºöÂÆö‰πâÂÆû‰ΩìÁ±ªÔºåÊé•Êî∂ËØ∑Ê±ÇÂèÇÊï∞ÁöÑJSONÂØπË±°</li><li>Ê≠•È™§‰∫åÔºöÁºñÂÜôcontrollerÔºåÊé•Êî∂È°µÈù¢ÁöÑËØ∑Ê±Ç</li><li>Ê≠•È™§‰∏âÔºöÁºñÂÜô‰∏öÂä°ÂÆûÁé∞ÔºåÂà©Áî®RestHighLevelClientÂÆûÁé∞ÊêúÁ¥¢„ÄÅÂàÜÈ°µ</li></ul><h3 id="_4-1-2-ÂÆö‰πâÂÆû‰ΩìÁ±ª" tabindex="-1"><a class="header-anchor" href="#_4-1-2-ÂÆö‰πâÂÆû‰ΩìÁ±ª"><span>4.1.2.ÂÆö‰πâÂÆû‰ΩìÁ±ª</span></a></h3><p>ÂÆû‰ΩìÁ±ªÊúâ‰∏§‰∏™Ôºå‰∏Ä‰∏™ÊòØÂâçÁ´ØÁöÑËØ∑Ê±ÇÂèÇÊï∞ÂÆû‰ΩìÔºå‰∏Ä‰∏™ÊòØÊúçÂä°Á´ØÂ∫îËØ•ËøîÂõûÁöÑÂìçÂ∫îÁªìÊûúÂÆû‰Ωì„ÄÇ</p><p>1ÔºâËØ∑Ê±ÇÂèÇÊï∞</p><p>ÂâçÁ´ØËØ∑Ê±ÇÁöÑjsonÁªìÊûÑÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÊêúÁ¥¢ÂÖ≥ÈîÆÂ≠ó&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;sortBy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;default&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Âõ†Ê≠§ÔºåÊàë‰ª¨Âú®<code>cn.itcast.hotel.pojo</code>ÂåÖ‰∏ãÂÆö‰πâ‰∏Ä‰∏™ÂÆû‰ΩìÁ±ªÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.pojo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.Data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> sortBy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ÔºâËøîÂõûÂÄº</p><p>ÂàÜÈ°µÊü•ËØ¢ÔºåÈúÄË¶ÅËøîÂõûÂàÜÈ°µÁªìÊûúPageResultÔºåÂåÖÂê´‰∏§‰∏™Â±ûÊÄßÔºö</p><ul><li><code>total</code>ÔºöÊÄªÊù°Êï∞</li><li><code>List&lt;HotelDoc&gt;</code>ÔºöÂΩìÂâçÈ°µÁöÑÊï∞ÊçÆ</li></ul><p>Âõ†Ê≠§ÔºåÊàë‰ª¨Âú®<code>cn.itcast.hotel.pojo</code>‰∏≠ÂÆö‰πâËøîÂõûÁªìÊûúÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.pojo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.Data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> PageResult</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> total</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotels</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> PageResult</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> PageResult</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> total</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">hotels</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">total</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> total;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">hotels</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> hotels;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-1-3-ÂÆö‰πâcontroller" tabindex="-1"><a class="header-anchor" href="#_4-1-3-ÂÆö‰πâcontroller"><span>4.1.3.ÂÆö‰πâcontroller</span></a></h3><p>ÂÆö‰πâ‰∏Ä‰∏™HotelControllerÔºåÂ£∞ÊòéÊü•ËØ¢Êé•Âè£ÔºåÊª°Ë∂≥‰∏ãÂàóË¶ÅÊ±ÇÔºö</p><ul><li>ËØ∑Ê±ÇÊñπÂºèÔºöPost</li><li>ËØ∑Ê±ÇË∑ØÂæÑÔºö/hotel/list</li><li>ËØ∑Ê±ÇÂèÇÊï∞ÔºöÂØπË±°ÔºåÁ±ªÂûã‰∏∫RequestParam</li><li>ËøîÂõûÂÄºÔºöPageResultÔºåÂåÖÂê´‰∏§‰∏™Â±ûÊÄß <ul><li><code>Long total</code>ÔºöÊÄªÊù°Êï∞</li><li><code>List&lt;HotelDoc&gt; hotels</code>ÔºöÈÖíÂ∫óÊï∞ÊçÆ</li></ul></li></ul><p>Âõ†Ê≠§ÔºåÊàë‰ª¨Âú®<code>cn.itcast.hotel.web</code>‰∏≠ÂÆö‰πâHotelControllerÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelController</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IHotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">	// ÊêúÁ¥¢ÈÖíÂ∫óÊï∞ÊçÆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> PageResult</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RequestBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> RequestParams</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(params);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-1-4-ÂÆûÁé∞ÊêúÁ¥¢‰∏öÂä°" tabindex="-1"><a class="header-anchor" href="#_4-1-4-ÂÆûÁé∞ÊêúÁ¥¢‰∏öÂä°"><span>4.1.4.ÂÆûÁé∞ÊêúÁ¥¢‰∏öÂä°</span></a></h3><p>Êàë‰ª¨Âú®controllerË∞ÉÁî®‰∫ÜIHotelServiceÔºåÂπ∂Ê≤°ÊúâÂÆûÁé∞ËØ•ÊñπÊ≥ïÔºåÂõ†Ê≠§‰∏ãÈù¢Êàë‰ª¨Â∞±Âú®IHotelService‰∏≠ÂÆö‰πâÊñπÊ≥ïÔºåÂπ∂‰∏îÂéªÂÆûÁé∞‰∏öÂä°ÈÄªËæë„ÄÇ</p><p>1ÔºâÂú®<code>cn.itcast.hotel.service</code>‰∏≠ÁöÑ<code>IHotelService</code>Êé•Âè£‰∏≠ÂÆö‰πâ‰∏Ä‰∏™ÊñπÊ≥ïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> * Ê†πÊçÆÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢ÈÖíÂ∫ó‰ø°ÊÅØ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> params</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ËØ∑Ê±ÇÂèÇÊï∞ÂØπË±°ÔºåÂåÖÂê´Áî®Êà∑ËæìÂÖ•ÁöÑÂÖ≥ÈîÆÂ≠ó </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ÈÖíÂ∫óÊñáÊ°£ÂàóË°®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">PageResult</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> search</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ÔºâÂÆûÁé∞ÊêúÁ¥¢‰∏öÂä°ÔºåËÇØÂÆöÁ¶ª‰∏çÂºÄRestHighLevelClientÔºåÊàë‰ª¨ÈúÄË¶ÅÊääÂÆÉÊ≥®ÂÜåÂà∞Spring‰∏≠‰Ωú‰∏∫‰∏Ä‰∏™Bean„ÄÇÂú®<code>cn.itcast.hotel</code>‰∏≠ÁöÑ<code>HotelDemoApplication</code>‰∏≠Â£∞ÊòéËøô‰∏™BeanÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> RestHighLevelClient</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RestHighLevelClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RestClient</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        HttpHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http://192.168.150.101:9200&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    )</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ÔºâÂú®<code>cn.itcast.hotel.service.impl</code>‰∏≠ÁöÑ<code>HotelService</code>‰∏≠ÂÆûÁé∞searchÊñπÊ≥ïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> PageResult</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> search</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.1.query</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(key)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">must</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchAllQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">must</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, key));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.2.ÂàÜÈ°µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> page </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPage</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> size </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSize</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((page </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> size).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(size);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(response)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(e)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ÁªìÊûúËß£Êûê</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> PageResult</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    SearchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> searchHits </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.1.Ëé∑ÂèñÊÄªÊù°Êï∞</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> total </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> searchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getTotalHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.2.ÊñáÊ°£Êï∞ÁªÑ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">    SearchHit</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">[] hits </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> searchHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getHits</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.3.ÈÅçÂéÜ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotels </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SearchHit</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hit </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hits) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // Ëé∑ÂèñÊñáÊ°£source</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSourceAsString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ÂèçÂ∫èÂàóÂåñ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelDoc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parseObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(json, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">		// ÊîæÂÖ•ÈõÜÂêà</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        hotels</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(hotelDoc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.4.Â∞ÅË£ÖËøîÂõû</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> PageResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(total</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotels)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-2-ÈÖíÂ∫óÁªìÊûúËøáÊª§" tabindex="-1"><a class="header-anchor" href="#_4-2-ÈÖíÂ∫óÁªìÊûúËøáÊª§"><span>4.2.ÈÖíÂ∫óÁªìÊûúËøáÊª§</span></a></h2><p>ÈúÄÊ±ÇÔºöÊ∑ªÂä†ÂìÅÁâå„ÄÅÂüéÂ∏Ç„ÄÅÊòüÁ∫ß„ÄÅ‰ª∑Ê†ºÁ≠âËøáÊª§ÂäüËÉΩ</p><h3 id="_4-2-1-ÈúÄÊ±ÇÂàÜÊûê" tabindex="-1"><a class="header-anchor" href="#_4-2-1-ÈúÄÊ±ÇÂàÜÊûê"><span>4.2.1.ÈúÄÊ±ÇÂàÜÊûê</span></a></h3><p>Âú®È°µÈù¢ÊêúÁ¥¢Ê°Ü‰∏ãÈù¢Ôºå‰ºöÊúâ‰∏Ä‰∫õËøáÊª§È°πÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722091940726.png" alt="image-20210722091940726" tabindex="0" loading="lazy"><figcaption>image-20210722091940726</figcaption></figure><p>‰º†ÈÄíÁöÑÂèÇÊï∞Â¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722092051994.png" alt="image-20210722092051994" tabindex="0" loading="lazy"><figcaption>image-20210722092051994</figcaption></figure><p>ÂåÖÂê´ÁöÑËøáÊª§Êù°‰ª∂ÊúâÔºö</p><ul><li>brandÔºöÂìÅÁâåÂÄº</li><li>cityÔºöÂüéÂ∏Ç</li><li>minPrice~maxPriceÔºö‰ª∑Ê†ºËåÉÂõ¥</li><li>starNameÔºöÊòüÁ∫ß</li></ul><p>Êàë‰ª¨ÈúÄË¶ÅÂÅö‰∏§‰ª∂‰∫ãÊÉÖÔºö</p><ul><li>‰øÆÊîπËØ∑Ê±ÇÂèÇÊï∞ÁöÑÂØπË±°RequestParamsÔºåÊé•Êî∂‰∏äËø∞ÂèÇÊï∞</li><li>‰øÆÊîπ‰∏öÂä°ÈÄªËæëÔºåÂú®ÊêúÁ¥¢Êù°‰ª∂‰πãÂ§ñÔºåÊ∑ªÂä†‰∏Ä‰∫õËøáÊª§Êù°‰ª∂</li></ul><h3 id="_4-2-2-‰øÆÊîπÂÆû‰ΩìÁ±ª" tabindex="-1"><a class="header-anchor" href="#_4-2-2-‰øÆÊîπÂÆû‰ΩìÁ±ª"><span>4.2.2.‰øÆÊîπÂÆû‰ΩìÁ±ª</span></a></h3><p>‰øÆÊîπÂú®<code>cn.itcast.hotel.pojo</code>ÂåÖ‰∏ãÁöÑÂÆû‰ΩìÁ±ªRequestParamsÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> sortBy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ‰∏ãÈù¢ÊòØÊñ∞Â¢ûÁöÑËøáÊª§Êù°‰ª∂ÂèÇÊï∞</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> city</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> starName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> minPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> maxPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-3-‰øÆÊîπÊêúÁ¥¢‰∏öÂä°" tabindex="-1"><a class="header-anchor" href="#_4-2-3-‰øÆÊîπÊêúÁ¥¢‰∏öÂä°"><span>4.2.3.‰øÆÊîπÊêúÁ¥¢‰∏öÂä°</span></a></h3><p>Âú®HotelServiceÁöÑsearchÊñπÊ≥ï‰∏≠ÔºåÂè™Êúâ‰∏Ä‰∏™Âú∞ÊñπÈúÄË¶Å‰øÆÊîπÔºörequet.source().query( ... )ÂÖ∂‰∏≠ÁöÑÊü•ËØ¢Êù°‰ª∂„ÄÇ</p><p>Âú®‰πãÂâçÁöÑ‰∏öÂä°‰∏≠ÔºåÂè™ÊúâmatchÊü•ËØ¢ÔºåÊ†πÊçÆÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢ÔºåÁé∞Âú®Ë¶ÅÊ∑ªÂä†Êù°‰ª∂ËøáÊª§ÔºåÂåÖÊã¨Ôºö</p><ul><li>ÂìÅÁâåËøáÊª§ÔºöÊòØkeywordÁ±ªÂûãÔºåÁî®termÊü•ËØ¢</li><li>ÊòüÁ∫ßËøáÊª§ÔºöÊòØkeywordÁ±ªÂûãÔºåÁî®termÊü•ËØ¢</li><li>‰ª∑Ê†ºËøáÊª§ÔºöÊòØÊï∞ÂÄºÁ±ªÂûãÔºåÁî®rangeÊü•ËØ¢</li><li>ÂüéÂ∏ÇËøáÊª§ÔºöÊòØkeywordÁ±ªÂûãÔºåÁî®termÊü•ËØ¢</li></ul><p>Â§ö‰∏™Êü•ËØ¢Êù°‰ª∂ÁªÑÂêàÔºåËÇØÂÆöÊòØbooleanÊü•ËØ¢Êù•ÁªÑÂêàÔºö</p><ul><li>ÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢ÊîæÂà∞must‰∏≠ÔºåÂèÇ‰∏éÁÆóÂàÜ</li><li>ÂÖ∂ÂÆÉËøáÊª§Êù°‰ª∂ÊîæÂà∞filter‰∏≠Ôºå‰∏çÂèÇ‰∏éÁÆóÂàÜ</li></ul><p>Âõ†‰∏∫Êù°‰ª∂ÊûÑÂª∫ÁöÑÈÄªËæëÊØîËæÉÂ§çÊùÇÔºåËøôÈáåÂÖàÂ∞ÅË£Ö‰∏∫‰∏Ä‰∏™ÂáΩÊï∞Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722092935453.png" alt="image-20210722092935453" tabindex="0" loading="lazy"><figcaption>image-20210722092935453</figcaption></figure><p>buildBasicQueryÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> buildBasicQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÊûÑÂª∫BooleanQuery</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    BoolQueryBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> boolQuery </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(key)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">must</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchAllQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">must</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, key));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 3.ÂüéÂ∏ÇÊù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;city&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.ÂìÅÁâåÊù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 5.ÊòüÁ∫ßÊù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;starName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">	// 6.‰ª∑Ê†º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMinPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMaxPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                         .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rangeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                         .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gte</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMinPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                         .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lte</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMaxPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">	// 7.ÊîæÂÖ•source</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(boolQuery);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-3-ÊàëÂë®ËæπÁöÑÈÖíÂ∫ó" tabindex="-1"><a class="header-anchor" href="#_4-3-ÊàëÂë®ËæπÁöÑÈÖíÂ∫ó"><span>4.3.ÊàëÂë®ËæπÁöÑÈÖíÂ∫ó</span></a></h2><p>ÈúÄÊ±ÇÔºöÊàëÈôÑËøëÁöÑÈÖíÂ∫ó</p><h3 id="_4-3-1-ÈúÄÊ±ÇÂàÜÊûê" tabindex="-1"><a class="header-anchor" href="#_4-3-1-ÈúÄÊ±ÇÂàÜÊûê"><span>4.3.1.ÈúÄÊ±ÇÂàÜÊûê</span></a></h3><p>Âú®ÈÖíÂ∫óÂàóË°®È°µÁöÑÂè≥‰æßÔºåÊúâ‰∏Ä‰∏™Â∞èÂú∞ÂõæÔºåÁÇπÂáªÂú∞ÂõæÁöÑÂÆö‰ΩçÊåâÈíÆÔºåÂú∞Âõæ‰ºöÊâæÂà∞‰Ω†ÊâÄÂú®ÁöÑ‰ΩçÁΩÆÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722093414542.png" alt="image-20210722093414542" tabindex="0" loading="lazy"><figcaption>image-20210722093414542</figcaption></figure><p>Âπ∂‰∏îÔºåÂú®ÂâçÁ´Ø‰ºöÂèëËµ∑Êü•ËØ¢ËØ∑Ê±ÇÔºåÂ∞Ü‰Ω†ÁöÑÂùêÊ†áÂèëÈÄÅÂà∞ÊúçÂä°Á´ØÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722093642382.png" alt="image-20210722093642382" tabindex="0" loading="lazy"><figcaption>image-20210722093642382</figcaption></figure><p>Êàë‰ª¨Ë¶ÅÂÅöÁöÑ‰∫ãÊÉÖÂ∞±ÊòØÂü∫‰∫éËøô‰∏™locationÂùêÊ†áÔºåÁÑ∂ÂêéÊåâÁÖßË∑ùÁ¶ªÂØπÂë®Âõ¥ÈÖíÂ∫óÊéíÂ∫è„ÄÇÂÆûÁé∞ÊÄùË∑ØÂ¶Ç‰∏ãÔºö</p><ul><li>‰øÆÊîπRequestParamsÂèÇÊï∞ÔºåÊé•Êî∂locationÂ≠óÊÆµ</li><li>‰øÆÊîπsearchÊñπÊ≥ï‰∏öÂä°ÈÄªËæëÔºåÂ¶ÇÊûúlocationÊúâÂÄºÔºåÊ∑ªÂä†Ê†πÊçÆgeo_distanceÊéíÂ∫èÁöÑÂäüËÉΩ</li></ul><h3 id="_4-3-2-‰øÆÊîπÂÆû‰ΩìÁ±ª" tabindex="-1"><a class="header-anchor" href="#_4-3-2-‰øÆÊîπÂÆû‰ΩìÁ±ª"><span>4.3.2.‰øÆÊîπÂÆû‰ΩìÁ±ª</span></a></h3><p>‰øÆÊîπÂú®<code>cn.itcast.hotel.pojo</code>ÂåÖ‰∏ãÁöÑÂÆû‰ΩìÁ±ªRequestParamsÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.pojo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.Data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> sortBy</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> city</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> starName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> minPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> maxPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ÊàëÂΩìÂâçÁöÑÂú∞ÁêÜÂùêÊ†á</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> location</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-3-Ë∑ùÁ¶ªÊéíÂ∫èapi" tabindex="-1"><a class="header-anchor" href="#_4-3-3-Ë∑ùÁ¶ªÊéíÂ∫èapi"><span>4.3.3.Ë∑ùÁ¶ªÊéíÂ∫èAPI</span></a></h3><p>Êàë‰ª¨‰ª•ÂâçÂ≠¶‰π†ËøáÊéíÂ∫èÂäüËÉΩÔºåÂåÖÊã¨‰∏§ÁßçÔºö</p><ul><li>ÊôÆÈÄöÂ≠óÊÆµÊéíÂ∫è</li><li>Âú∞ÁêÜÂùêÊ†áÊéíÂ∫è</li></ul><p>Êàë‰ª¨Âè™ËÆ≤‰∫ÜÊôÆÈÄöÂ≠óÊÆµÊéíÂ∫èÂØπÂ∫îÁöÑjavaÂÜôÊ≥ï„ÄÇÂú∞ÁêÜÂùêÊ†áÊéíÂ∫èÂè™Â≠¶ËøáDSLËØ≠Ê≥ïÔºåÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/indexName/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;match_all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;"> ¬†&quot;sort&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;asc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;_geo_distance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;FIELD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Á∫¨Â∫¶ÔºåÁªèÂ∫¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;order&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;asc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;unit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;km&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÂØπÂ∫îÁöÑjava‰ª£Á†ÅÁ§∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722095227059.png" alt="image-20210722095227059" tabindex="0" loading="lazy"><figcaption>image-20210722095227059</figcaption></figure><h3 id="_4-3-4-Ê∑ªÂä†Ë∑ùÁ¶ªÊéíÂ∫è" tabindex="-1"><a class="header-anchor" href="#_4-3-4-Ê∑ªÂä†Ë∑ùÁ¶ªÊéíÂ∫è"><span>4.3.4.Ê∑ªÂä†Ë∑ùÁ¶ªÊéíÂ∫è</span></a></h3><p>Âú®<code>cn.itcast.hotel.service.impl</code>ÁöÑ<code>HotelService</code>ÁöÑ<code>search</code>ÊñπÊ≥ï‰∏≠ÔºåÊ∑ªÂä†‰∏Ä‰∏™ÊéíÂ∫èÂäüËÉΩÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722095902314.png" alt="image-20210722095902314" tabindex="0" loading="lazy"><figcaption>image-20210722095902314</figcaption></figure><p>ÂÆåÊï¥‰ª£Á†ÅÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> PageResult</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> search</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.1.query</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        buildBasicQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.2.ÂàÜÈ°µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> page </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPage</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> size </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSize</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((page </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> size).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(size);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.3.ÊéíÂ∫è</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> location </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (location </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">location</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SortBuilders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">geoDistanceSort</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;location&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> GeoPoint</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(location))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">order</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SortOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ASC</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">unit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DistanceUnit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">KILOMETERS</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.Ëß£ÊûêÂìçÂ∫î</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> handleResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(response)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(e)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-5-ÊéíÂ∫èË∑ùÁ¶ªÊòæÁ§∫" tabindex="-1"><a class="header-anchor" href="#_4-3-5-ÊéíÂ∫èË∑ùÁ¶ªÊòæÁ§∫"><span>4.3.5.ÊéíÂ∫èË∑ùÁ¶ªÊòæÁ§∫</span></a></h3><p>ÈáçÂêØÊúçÂä°ÂêéÔºåÊµãËØïÊàëÁöÑÈÖíÂ∫óÂäüËÉΩÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100040674.png" alt="image-20210722100040674" tabindex="0" loading="lazy"><figcaption>image-20210722100040674</figcaption></figure><p>ÂèëÁé∞Á°ÆÂÆûÂèØ‰ª•ÂÆûÁé∞ÂØπÊàëÈôÑËøëÈÖíÂ∫óÁöÑÊéíÂ∫èÔºå‰∏çËøáÂπ∂Ê≤°ÊúâÁúãÂà∞ÈÖíÂ∫óÂà∞Â∫ïË∑ùÁ¶ªÊàëÂ§öËøúÔºåËøôËØ•ÊÄé‰πàÂäûÔºü</p><p>ÊéíÂ∫èÂÆåÊàêÂêéÔºåÈ°µÈù¢ËøòË¶ÅËé∑ÂèñÊàëÈôÑËøëÊØè‰∏™ÈÖíÂ∫óÁöÑÂÖ∑‰Ωì<strong>Ë∑ùÁ¶ª</strong>ÂÄºÔºåËøô‰∏™ÂÄºÂú®ÂìçÂ∫îÁªìÊûú‰∏≠ÊòØÁã¨Á´ãÁöÑÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722095648542.png" alt="image-20210722095648542" tabindex="0" loading="lazy"><figcaption>image-20210722095648542</figcaption></figure><p>Âõ†Ê≠§ÔºåÊàë‰ª¨Âú®ÁªìÊûúËß£ÊûêÈò∂ÊÆµÔºåÈô§‰∫ÜËß£ÊûêsourceÈÉ®ÂàÜ‰ª•Â§ñÔºåËøòË¶ÅÂæóÂà∞sortÈÉ®ÂàÜÔºå‰πüÂ∞±ÊòØÊéíÂ∫èÁöÑË∑ùÁ¶ªÔºåÁÑ∂ÂêéÊîæÂà∞ÂìçÂ∫îÁªìÊûú‰∏≠„ÄÇ</p><p>Êàë‰ª¨Ë¶ÅÂÅö‰∏§‰ª∂‰∫ãÔºö</p><ul><li>‰øÆÊîπHotelDocÔºåÊ∑ªÂä†ÊéíÂ∫èË∑ùÁ¶ªÂ≠óÊÆµÔºåÁî®‰∫éÈ°µÈù¢ÊòæÁ§∫</li><li>‰øÆÊîπHotelServiceÁ±ª‰∏≠ÁöÑhandleResponseÊñπÊ≥ïÔºåÊ∑ªÂä†ÂØπsortÂÄºÁöÑËé∑Âèñ</li></ul><p>1Ôºâ‰øÆÊîπHotelDocÁ±ªÔºåÊ∑ªÂä†Ë∑ùÁ¶ªÂ≠óÊÆµ</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.pojo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.Data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.NoArgsConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">NoArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> address</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> price</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> score</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> city</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> starName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> business</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> location</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> pic</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ÊéíÂ∫èÊó∂ÁöÑ Ë∑ùÁ¶ªÂÄº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Hotel</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">address</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">price</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">score</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getScore</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">brand</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">city</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">starName</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">business</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBusiness</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getLatitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;, &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getLongitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">pic</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPic</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2Ôºâ‰øÆÊîπHotelService‰∏≠ÁöÑhandleResponseÊñπÊ≥ï</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100613966.png" alt="image-20210722100613966" tabindex="0" loading="lazy"><figcaption>image-20210722100613966</figcaption></figure><p>ÈáçÂêØÂêéÊµãËØïÔºåÂèëÁé∞È°µÈù¢ËÉΩÊàêÂäüÊòæÁ§∫Ë∑ùÁ¶ª‰∫ÜÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100838604.png" alt="image-20210722100838604" tabindex="0" loading="lazy"><figcaption>image-20210722100838604</figcaption></figure><h2 id="_4-4-ÈÖíÂ∫óÁ´û‰ª∑ÊéíÂêç" tabindex="-1"><a class="header-anchor" href="#_4-4-ÈÖíÂ∫óÁ´û‰ª∑ÊéíÂêç"><span>4.4.ÈÖíÂ∫óÁ´û‰ª∑ÊéíÂêç</span></a></h2><p>ÈúÄÊ±ÇÔºöËÆ©ÊåáÂÆöÁöÑÈÖíÂ∫óÂú®ÊêúÁ¥¢ÁªìÊûú‰∏≠ÊéíÂêçÁΩÆÈ°∂</p><h3 id="_4-4-1-ÈúÄÊ±ÇÂàÜÊûê" tabindex="-1"><a class="header-anchor" href="#_4-4-1-ÈúÄÊ±ÇÂàÜÊûê"><span>4.4.1.ÈúÄÊ±ÇÂàÜÊûê</span></a></h3><p>Ë¶ÅËÆ©ÊåáÂÆöÈÖíÂ∫óÂú®ÊêúÁ¥¢ÁªìÊûú‰∏≠ÊéíÂêçÁΩÆÈ°∂ÔºåÊïàÊûúÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722100947292.png" alt="image-20210722100947292" tabindex="0" loading="lazy"><figcaption>image-20210722100947292</figcaption></figure><p>È°µÈù¢‰ºöÁªôÊåáÂÆöÁöÑÈÖíÂ∫óÊ∑ªÂä†<strong>ÂπøÂëä</strong>Ê†áËÆ∞„ÄÇ</p><p>ÈÇ£ÊÄéÊ†∑ÊâçËÉΩËÆ©ÊåáÂÆöÁöÑÈÖíÂ∫óÊéíÂêçÁΩÆÈ°∂Âë¢Ôºü</p><p>Êàë‰ª¨‰πãÂâçÂ≠¶‰π†ËøáÁöÑfunction_scoreÊü•ËØ¢ÂèØ‰ª•ÂΩ±ÂìçÁÆóÂàÜÔºåÁÆóÂàÜÈ´ò‰∫ÜÔºåËá™ÁÑ∂ÊéíÂêç‰πüÂ∞±È´ò‰∫Ü„ÄÇËÄåfunction_scoreÂåÖÂê´3‰∏™Ë¶ÅÁ¥†Ôºö</p><ul><li>ËøáÊª§Êù°‰ª∂ÔºöÂì™‰∫õÊñáÊ°£Ë¶ÅÂä†ÂàÜ</li><li>ÁÆóÂàÜÂáΩÊï∞ÔºöÂ¶Ç‰ΩïËÆ°ÁÆófunction score</li><li>Âä†ÊùÉÊñπÂºèÔºöfunction score ‰∏é query scoreÂ¶Ç‰ΩïËøêÁÆó</li></ul><p>ËøôÈáåÁöÑÈúÄÊ±ÇÊòØÔºöËÆ©<strong>ÊåáÂÆöÈÖíÂ∫ó</strong>ÊéíÂêçÈù†Ââç„ÄÇÂõ†Ê≠§Êàë‰ª¨ÈúÄË¶ÅÁªôËøô‰∫õÈÖíÂ∫óÊ∑ªÂä†‰∏Ä‰∏™Ê†áËÆ∞ÔºåËøôÊ†∑Âú®ËøáÊª§Êù°‰ª∂‰∏≠Â∞±ÂèØ‰ª•<strong>Ê†πÊçÆËøô‰∏™Ê†áËÆ∞Êù•Âà§Êñ≠ÔºåÊòØÂê¶Ë¶ÅÊèêÈ´òÁÆóÂàÜ</strong>„ÄÇ</p><p>ÊØîÂ¶ÇÔºåÊàë‰ª¨ÁªôÈÖíÂ∫óÊ∑ªÂä†‰∏Ä‰∏™Â≠óÊÆµÔºöisADÔºåBooleanÁ±ªÂûãÔºö</p><ul><li>trueÔºöÊòØÂπøÂëä</li><li>falseÔºö‰∏çÊòØÂπøÂëä</li></ul><p>ËøôÊ†∑function_scoreÂåÖÂê´3‰∏™Ë¶ÅÁ¥†Â∞±ÂæàÂ•ΩÁ°ÆÂÆö‰∫ÜÔºö</p><ul><li>ËøáÊª§Êù°‰ª∂ÔºöÂà§Êñ≠isAD ÊòØÂê¶‰∏∫true</li><li>ÁÆóÂàÜÂáΩÊï∞ÔºöÊàë‰ª¨ÂèØ‰ª•Áî®ÊúÄÁÆÄÂçïÊö¥ÂäõÁöÑweightÔºåÂõ∫ÂÆöÂä†ÊùÉÂÄº</li><li>Âä†ÊùÉÊñπÂºèÔºöÂèØ‰ª•Áî®ÈªòËÆ§ÁöÑÁõ∏‰πòÔºåÂ§ßÂ§ßÊèêÈ´òÁÆóÂàÜ</li></ul><p>Âõ†Ê≠§Ôºå‰∏öÂä°ÁöÑÂÆûÁé∞Ê≠•È™§ÂåÖÊã¨Ôºö</p><ol><li><p>ÁªôHotelDocÁ±ªÊ∑ªÂä†isADÂ≠óÊÆµÔºåBooleanÁ±ªÂûã</p></li><li><p>ÊåëÈÄâÂá†‰∏™‰Ω†ÂñúÊ¨¢ÁöÑÈÖíÂ∫óÔºåÁªôÂÆÉÁöÑÊñáÊ°£Êï∞ÊçÆÊ∑ªÂä†isADÂ≠óÊÆµÔºåÂÄº‰∏∫true</p></li><li><p>‰øÆÊîπsearchÊñπÊ≥ïÔºåÊ∑ªÂä†function scoreÂäüËÉΩÔºåÁªôisADÂÄº‰∏∫trueÁöÑÈÖíÂ∫óÂ¢ûÂä†ÊùÉÈáç</p></li></ol><h3 id="_4-4-2-‰øÆÊîπhoteldocÂÆû‰Ωì" tabindex="-1"><a class="header-anchor" href="#_4-4-2-‰øÆÊîπhoteldocÂÆû‰Ωì"><span>4.4.2.‰øÆÊîπHotelDocÂÆû‰Ωì</span></a></h3><p>Áªô<code>cn.itcast.hotel.pojo</code>ÂåÖ‰∏ãÁöÑHotelDocÁ±ªÊ∑ªÂä†isADÂ≠óÊÆµÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722101908062.png" alt="image-20210722101908062" tabindex="0" loading="lazy"><figcaption>image-20210722101908062</figcaption></figure><h3 id="_4-4-3-Ê∑ªÂä†ÂπøÂëäÊ†áËÆ∞" tabindex="-1"><a class="header-anchor" href="#_4-4-3-Ê∑ªÂä†ÂπøÂëäÊ†áËÆ∞"><span>4.4.3.Ê∑ªÂä†ÂπøÂëäÊ†áËÆ∞</span></a></h3><p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨ÊåëÂá†‰∏™ÈÖíÂ∫óÔºåÊ∑ªÂä†isADÂ≠óÊÆµÔºåËÆæÁΩÆ‰∏∫trueÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST /hotel/_update/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1902197537</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;isAD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST /hotel/_update/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2056126831</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;isAD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST /hotel/_update/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1989806195</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;isAD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST /hotel/_update/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2056105938</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;isAD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-4-Ê∑ªÂä†ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_4-4-4-Ê∑ªÂä†ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢"><span>4.4.4.Ê∑ªÂä†ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢</span></a></h3><p>Êé•‰∏ãÊù•Êàë‰ª¨Â∞±Ë¶Å‰øÆÊîπÊü•ËØ¢Êù°‰ª∂‰∫Ü„ÄÇ‰πãÂâçÊòØÁî®ÁöÑboolean Êü•ËØ¢ÔºåÁé∞Âú®Ë¶ÅÊîπÊàêfunction_socreÊü•ËØ¢„ÄÇ</p><p>function_scoreÊü•ËØ¢ÁªìÊûÑÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210721191544750.png" alt="image-20210721191544750" tabindex="0" loading="lazy"><figcaption>image-20210721191544750</figcaption></figure><p>ÂØπÂ∫îÁöÑJavaAPIÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210722102850818.png" alt="image-20210722102850818" tabindex="0" loading="lazy"><figcaption>image-20210722102850818</figcaption></figure><p>Êàë‰ª¨ÂèØ‰ª•Â∞Ü‰πãÂâçÂÜôÁöÑbooleanÊü•ËØ¢‰Ωú‰∏∫<strong>ÂéüÂßãÊü•ËØ¢</strong>Êù°‰ª∂ÊîæÂà∞query‰∏≠ÔºåÊé•‰∏ãÊù•Â∞±ÊòØÊ∑ªÂä†<strong>ËøáÊª§Êù°‰ª∂</strong>„ÄÅ<strong>ÁÆóÂàÜÂáΩÊï∞</strong>„ÄÅ<strong>Âä†ÊùÉÊ®°Âºè</strong>‰∫Ü„ÄÇÊâÄ‰ª•ÂéüÊù•ÁöÑ‰ª£Á†Å‰æùÁÑ∂ÂèØ‰ª•Ê≤øÁî®„ÄÇ</p><p>‰øÆÊîπ<code>cn.itcast.hotel.service.impl</code>ÂåÖ‰∏ãÁöÑ<code>HotelService</code>Á±ª‰∏≠ÁöÑ<code>buildBasicQuery</code>ÊñπÊ≥ïÔºåÊ∑ªÂä†ÁÆóÂàÜÂáΩÊï∞Êü•ËØ¢Ôºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> buildBasicQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 1.ÊûÑÂª∫BooleanQuery</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    BoolQueryBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> boolQuery </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ÂÖ≥ÈîÆÂ≠óÊêúÁ¥¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (key </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(key)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">must</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchAllQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">must</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">matchQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, key));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ÂüéÂ∏ÇÊù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;city&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ÂìÅÁâåÊù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ÊòüÁ∫ßÊù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;starName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ‰ª∑Ê†º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMinPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMaxPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        boolQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">QueryBuilders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                         .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">rangeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                         .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">gte</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMinPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                         .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">lte</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getMaxPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 2.ÁÆóÂàÜÊéßÂà∂</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    FunctionScoreQueryBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> functionScoreQuery </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">functionScoreQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ÂéüÂßãÊü•ËØ¢ÔºåÁõ∏ÂÖ≥ÊÄßÁÆóÂàÜÁöÑÊü•ËØ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        boolQuery,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // function scoreÁöÑÊï∞ÁªÑ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> FunctionScoreQueryBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">FilterFunctionBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[]{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™function score ÂÖÉÁ¥†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            new</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> FunctionScoreQueryBuilder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">FilterFunctionBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">                // ËøáÊª§Êù°‰ª∂</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                QueryBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">termQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;isAD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">                // ÁÆóÂàÜÂáΩÊï∞</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                ScoreFunctionBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">weightFactorFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(functionScoreQuery);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìé03" tabindex="-1"><a class="header-anchor" href="#ÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìé03"><span>ÂàÜÂ∏ÉÂºèÊêúÁ¥¢ÂºïÊìé03</span></a></h1><h1 id="_1-Êï∞ÊçÆËÅöÂêà" tabindex="-1"><a class="header-anchor" href="#_1-Êï∞ÊçÆËÅöÂêà"><span>1.Êï∞ÊçÆËÅöÂêà</span></a></h1><p>**<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html" target="_blank" rel="noopener noreferrer">ËÅöÂêàÔºà</a><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html" target="_blank" rel="noopener noreferrer">aggregations</a><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html" target="_blank" rel="noopener noreferrer">Ôºâ</a>**ÂèØ‰ª•ËÆ©Êàë‰ª¨ÊûÅÂÖ∂Êñπ‰æøÁöÑÂÆûÁé∞ÂØπÊï∞ÊçÆÁöÑÁªüËÆ°„ÄÅÂàÜÊûê„ÄÅËøêÁÆó„ÄÇ‰æãÂ¶ÇÔºö</p><ul><li>‰ªÄ‰πàÂìÅÁâåÁöÑÊâãÊú∫ÊúÄÂèóÊ¨¢ËøéÔºü</li><li>Ëøô‰∫õÊâãÊú∫ÁöÑÂπ≥Âùá‰ª∑Ê†º„ÄÅÊúÄÈ´ò‰ª∑Ê†º„ÄÅÊúÄ‰Ωé‰ª∑Ê†ºÔºü</li><li>Ëøô‰∫õÊâãÊú∫ÊØèÊúàÁöÑÈîÄÂîÆÊÉÖÂÜµÂ¶Ç‰ΩïÔºü</li></ul><p>ÂÆûÁé∞Ëøô‰∫õÁªüËÆ°ÂäüËÉΩÁöÑÊØîÊï∞ÊçÆÂ∫ìÁöÑsqlË¶ÅÊñπ‰æøÁöÑÂ§öÔºåËÄå‰∏îÊü•ËØ¢ÈÄüÂ∫¶ÈùûÂ∏∏Âø´ÔºåÂèØ‰ª•ÂÆûÁé∞ËøëÂÆûÊó∂ÊêúÁ¥¢ÊïàÊûú„ÄÇ</p><h2 id="_1-1-ËÅöÂêàÁöÑÁßçÁ±ª" tabindex="-1"><a class="header-anchor" href="#_1-1-ËÅöÂêàÁöÑÁßçÁ±ª"><span>1.1.ËÅöÂêàÁöÑÁßçÁ±ª</span></a></h2><p>ËÅöÂêàÂ∏∏ËßÅÁöÑÊúâ‰∏âÁ±ªÔºö</p><ul><li><p>**Ê°∂ÔºàBucketÔºâ**ËÅöÂêàÔºöÁî®Êù•ÂØπÊñáÊ°£ÂÅöÂàÜÁªÑ</p><ul><li>TermAggregationÔºöÊåâÁÖßÊñáÊ°£Â≠óÊÆµÂÄºÂàÜÁªÑÔºå‰æãÂ¶ÇÊåâÁÖßÂìÅÁâåÂÄºÂàÜÁªÑ„ÄÅÊåâÁÖßÂõΩÂÆ∂ÂàÜÁªÑ</li><li>Date HistogramÔºöÊåâÁÖßÊó•ÊúüÈò∂Ê¢ØÂàÜÁªÑÔºå‰æãÂ¶Ç‰∏ÄÂë®‰∏∫‰∏ÄÁªÑÔºåÊàñËÄÖ‰∏ÄÊúà‰∏∫‰∏ÄÁªÑ</li></ul></li><li><p>**Â∫¶ÈáèÔºàMetricÔºâ**ËÅöÂêàÔºöÁî®‰ª•ËÆ°ÁÆó‰∏Ä‰∫õÂÄºÔºåÊØîÂ¶ÇÔºöÊúÄÂ§ßÂÄº„ÄÅÊúÄÂ∞èÂÄº„ÄÅÂπ≥ÂùáÂÄºÁ≠â</p><ul><li>AvgÔºöÊ±ÇÂπ≥ÂùáÂÄº</li><li>MaxÔºöÊ±ÇÊúÄÂ§ßÂÄº</li><li>MinÔºöÊ±ÇÊúÄÂ∞èÂÄº</li><li>StatsÔºöÂêåÊó∂Ê±Çmax„ÄÅmin„ÄÅavg„ÄÅsumÁ≠â</li></ul></li><li><p>**ÁÆ°ÈÅìÔºàpipelineÔºâ**ËÅöÂêàÔºöÂÖ∂ÂÆÉËÅöÂêàÁöÑÁªìÊûú‰∏∫Âü∫Á°ÄÂÅöËÅöÂêà</p></li></ul><blockquote><p>**Ê≥®ÊÑèÔºö**ÂèÇÂä†ËÅöÂêàÁöÑÂ≠óÊÆµÂøÖÈ°ªÊòØkeyword„ÄÅÊó•Êúü„ÄÅÊï∞ÂÄº„ÄÅÂ∏ÉÂ∞îÁ±ªÂûã</p></blockquote><h2 id="_1-2-dslÂÆûÁé∞ËÅöÂêà" tabindex="-1"><a class="header-anchor" href="#_1-2-dslÂÆûÁé∞ËÅöÂêà"><span>1.2.DSLÂÆûÁé∞ËÅöÂêà</span></a></h2><p>Áé∞Âú®ÔºåÊàë‰ª¨Ë¶ÅÁªüËÆ°ÊâÄÊúâÊï∞ÊçÆ‰∏≠ÁöÑÈÖíÂ∫óÂìÅÁâåÊúâÂá†ÁßçÔºåÂÖ∂ÂÆûÂ∞±ÊòØÊåâÁÖßÂìÅÁâåÂØπÊï∞ÊçÆÂàÜÁªÑ„ÄÇÊ≠§Êó∂ÂèØ‰ª•Ê†πÊçÆÈÖíÂ∫óÂìÅÁâåÁöÑÂêçÁß∞ÂÅöËÅöÂêàÔºå‰πüÂ∞±ÊòØBucketËÅöÂêà„ÄÇ</p><h3 id="_1-2-1-bucketËÅöÂêàËØ≠Ê≥ï" tabindex="-1"><a class="header-anchor" href="#_1-2-1-bucketËÅöÂêàËØ≠Ê≥ï"><span>1.2.1.BucketËÅöÂêàËØ≠Ê≥ï</span></a></h3><p>ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ËÆæÁΩÆsize‰∏∫0ÔºåÁªìÊûú‰∏≠‰∏çÂåÖÂê´ÊñáÊ°£ÔºåÂè™ÂåÖÂê´ËÅöÂêàÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;aggs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÂÆö‰πâËÅöÂêà</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;brandAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//ÁªôËÅöÂêàËµ∑‰∏™ÂêçÂ≠ó</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;terms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ËÅöÂêàÁöÑÁ±ªÂûãÔºåÊåâÁÖßÂìÅÁâåÂÄºËÅöÂêàÔºåÊâÄ‰ª•ÈÄâÊã©term</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÂèÇ‰∏éËÅöÂêàÁöÑÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">¬†//¬†Â∏åÊúõËé∑ÂèñÁöÑËÅöÂêàÁªìÊûúÊï∞Èáè</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÁªìÊûúÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723171948228.png" alt="image-20210723171948228" tabindex="0" loading="lazy"><figcaption>image-20210723171948228</figcaption></figure><h3 id="_1-2-2-ËÅöÂêàÁªìÊûúÊéíÂ∫è" tabindex="-1"><a class="header-anchor" href="#_1-2-2-ËÅöÂêàÁªìÊûúÊéíÂ∫è"><span>1.2.2.ËÅöÂêàÁªìÊûúÊéíÂ∫è</span></a></h3><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåBucketËÅöÂêà‰ºöÁªüËÆ°BucketÂÜÖÁöÑÊñáÊ°£Êï∞ÈáèÔºåËÆ∞‰∏∫_countÔºåÂπ∂‰∏îÊåâÁÖß_countÈôçÂ∫èÊéíÂ∫è„ÄÇ</p><p>Êàë‰ª¨ÂèØ‰ª•ÊåáÂÆöorderÂ±ûÊÄßÔºåËá™ÂÆö‰πâËÅöÂêàÁöÑÊéíÂ∫èÊñπÂºèÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;aggs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;brandAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;terms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;order&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;_count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;asc&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> //¬†ÊåâÁÖß_countÂçáÂ∫èÊéíÂàó</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-3-ÈôêÂÆöËÅöÂêàËåÉÂõ¥" tabindex="-1"><a class="header-anchor" href="#_1-2-3-ÈôêÂÆöËÅöÂêàËåÉÂõ¥"><span>1.2.3.ÈôêÂÆöËÅöÂêàËåÉÂõ¥</span></a></h3><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåBucketËÅöÂêàÊòØÂØπÁ¥¢ÂºïÂ∫ìÁöÑÊâÄÊúâÊñáÊ°£ÂÅöËÅöÂêàÔºå‰ΩÜÁúüÂÆûÂú∫ÊôØ‰∏ãÔºåÁî®Êà∑‰ºöËæìÂÖ•ÊêúÁ¥¢Êù°‰ª∂ÔºåÂõ†Ê≠§ËÅöÂêàÂøÖÈ°ªÊòØÂØπÊêúÁ¥¢ÁªìÊûúËÅöÂêà„ÄÇÈÇ£‰πàËÅöÂêàÂøÖÈ°ªÊ∑ªÂä†ÈôêÂÆöÊù°‰ª∂„ÄÇ</p><p>Êàë‰ª¨ÂèØ‰ª•ÈôêÂÆöË¶ÅËÅöÂêàÁöÑÊñáÊ°£ËåÉÂõ¥ÔºåÂè™Ë¶ÅÊ∑ªÂä†queryÊù°‰ª∂Âç≥ÂèØÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;lte&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // Âè™ÂØπ200ÂÖÉ‰ª•‰∏ãÁöÑÊñáÊ°£ËÅöÂêà</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†},¬†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;aggs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;brandAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;terms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËøôÊ¨°ÔºåËÅöÂêàÂæóÂà∞ÁöÑÂìÅÁâåÊòéÊòæÂèòÂ∞ë‰∫ÜÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723172404836.png" alt="image-20210723172404836" tabindex="0" loading="lazy"><figcaption>image-20210723172404836</figcaption></figure><h3 id="_1-2-4-metricËÅöÂêàËØ≠Ê≥ï" tabindex="-1"><a class="header-anchor" href="#_1-2-4-metricËÅöÂêàËØ≠Ê≥ï"><span>1.2.4.MetricËÅöÂêàËØ≠Ê≥ï</span></a></h3><p>‰∏äËäÇËØæÔºåÊàë‰ª¨ÂØπÈÖíÂ∫óÊåâÁÖßÂìÅÁâåÂàÜÁªÑÔºåÂΩ¢Êàê‰∫Ü‰∏Ä‰∏™‰∏™Ê°∂„ÄÇÁé∞Âú®Êàë‰ª¨ÈúÄË¶ÅÂØπÊ°∂ÂÜÖÁöÑÈÖíÂ∫óÂÅöËøêÁÆóÔºåËé∑ÂèñÊØè‰∏™ÂìÅÁâåÁöÑÁî®Êà∑ËØÑÂàÜÁöÑmin„ÄÅmax„ÄÅavgÁ≠âÂÄº„ÄÇ</p><p>ËøôÂ∞±Ë¶ÅÁî®Âà∞MetricËÅöÂêà‰∫ÜÔºå‰æãÂ¶ÇstatËÅöÂêàÔºöÂ∞±ÂèØ‰ª•Ëé∑Âèñmin„ÄÅmax„ÄÅavgÁ≠âÁªìÊûú„ÄÇ</p><p>ËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/hotel/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;aggs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;brandAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;terms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;aggs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÊòØbrandsËÅöÂêàÁöÑÂ≠êËÅöÂêàÔºå‰πüÂ∞±ÊòØÂàÜÁªÑÂêéÂØπÊØèÁªÑÂàÜÂà´ËÆ°ÁÆó</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;score_stats&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ËÅöÂêàÂêçÁß∞</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;stats&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ËÅöÂêàÁ±ªÂûãÔºåËøôÈáåstatsÂèØ‰ª•ËÆ°ÁÆómin„ÄÅmax„ÄÅavgÁ≠â</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;score&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">¬†//¬†ËÅöÂêàÂ≠óÊÆµÔºåËøôÈáåÊòØscore</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËøôÊ¨°ÁöÑscore_statsËÅöÂêàÊòØÂú®brandAggÁöÑËÅöÂêàÂÜÖÈÉ®ÂµåÂ•óÁöÑÂ≠êËÅöÂêà„ÄÇÂõ†‰∏∫Êàë‰ª¨ÈúÄË¶ÅÂú®ÊØè‰∏™Ê°∂ÂàÜÂà´ËÆ°ÁÆó„ÄÇ</p><p>Âè¶Â§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÁªôËÅöÂêàÁªìÊûúÂÅö‰∏™ÊéíÂ∫èÔºå‰æãÂ¶ÇÊåâÁÖßÊØè‰∏™Ê°∂ÁöÑÈÖíÂ∫óÂπ≥ÂùáÂàÜÂÅöÊéíÂ∫èÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723172917636.png" alt="image-20210723172917636" tabindex="0" loading="lazy"><figcaption>image-20210723172917636</figcaption></figure><h3 id="_1-2-5-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_1-2-5-Â∞èÁªì"><span>1.2.5.Â∞èÁªì</span></a></h3><p>aggs‰ª£Ë°®ËÅöÂêàÔºå‰∏équeryÂêåÁ∫ßÔºåÊ≠§Êó∂queryÁöÑ‰ΩúÁî®ÊòØÔºü</p><ul><li>ÈôêÂÆöËÅöÂêàÁöÑÁöÑÊñáÊ°£ËåÉÂõ¥</li></ul><p>ËÅöÂêàÂøÖÈ°ªÁöÑ‰∏âË¶ÅÁ¥†Ôºö</p><ul><li>ËÅöÂêàÂêçÁß∞</li><li>ËÅöÂêàÁ±ªÂûã</li><li>ËÅöÂêàÂ≠óÊÆµ</li></ul><p>ËÅöÂêàÂèØÈÖçÁΩÆÂ±ûÊÄßÊúâÔºö</p><ul><li>sizeÔºöÊåáÂÆöËÅöÂêàÁªìÊûúÊï∞Èáè</li><li>orderÔºöÊåáÂÆöËÅöÂêàÁªìÊûúÊéíÂ∫èÊñπÂºè</li><li>fieldÔºöÊåáÂÆöËÅöÂêàÂ≠óÊÆµ</li></ul><h2 id="_1-3-restapiÂÆûÁé∞ËÅöÂêà" tabindex="-1"><a class="header-anchor" href="#_1-3-restapiÂÆûÁé∞ËÅöÂêà"><span>1.3.RestAPIÂÆûÁé∞ËÅöÂêà</span></a></h2><h3 id="_1-3-1-apiËØ≠Ê≥ï" tabindex="-1"><a class="header-anchor" href="#_1-3-1-apiËØ≠Ê≥ï"><span>1.3.1.APIËØ≠Ê≥ï</span></a></h3><p>ËÅöÂêàÊù°‰ª∂‰∏équeryÊù°‰ª∂ÂêåÁ∫ßÂà´ÔºåÂõ†Ê≠§ÈúÄË¶Å‰ΩøÁî®request.source()Êù•ÊåáÂÆöËÅöÂêàÊù°‰ª∂„ÄÇ</p><p>ËÅöÂêàÊù°‰ª∂ÁöÑËØ≠Ê≥ïÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723173057733.png" alt="image-20210723173057733" tabindex="0" loading="lazy"><figcaption>image-20210723173057733</figcaption></figure><p>ËÅöÂêàÁöÑÁªìÊûú‰πü‰∏éÊü•ËØ¢ÁªìÊûú‰∏çÂêåÔºåAPI‰πüÊØîËæÉÁâπÊÆä„ÄÇ‰∏çËøáÂêåÊ†∑ÊòØJSONÈÄêÂ±ÇËß£ÊûêÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723173215728.png" alt="image-20210723173215728" tabindex="0" loading="lazy"><figcaption>image-20210723173215728</figcaption></figure><h3 id="_1-3-2-‰∏öÂä°ÈúÄÊ±Ç" tabindex="-1"><a class="header-anchor" href="#_1-3-2-‰∏öÂä°ÈúÄÊ±Ç"><span>1.3.2.‰∏öÂä°ÈúÄÊ±Ç</span></a></h3><p>ÈúÄÊ±ÇÔºöÊêúÁ¥¢È°µÈù¢ÁöÑÂìÅÁâå„ÄÅÂüéÂ∏ÇÁ≠â‰ø°ÊÅØ‰∏çÂ∫îËØ•ÊòØÂú®È°µÈù¢ÂÜôÊ≠ªÔºåËÄåÊòØÈÄöËøáËÅöÂêàÁ¥¢ÂºïÂ∫ì‰∏≠ÁöÑÈÖíÂ∫óÊï∞ÊçÆÂæóÊù•ÁöÑÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723192605566.png" alt="image-20210723192605566" tabindex="0" loading="lazy"><figcaption>image-20210723192605566</figcaption></figure><p>ÂàÜÊûêÔºö</p><p>ÁõÆÂâçÔºåÈ°µÈù¢ÁöÑÂüéÂ∏ÇÂàóË°®„ÄÅÊòüÁ∫ßÂàóË°®„ÄÅÂìÅÁâåÂàóË°®ÈÉΩÊòØÂÜôÊ≠ªÁöÑÔºåÂπ∂‰∏ç‰ºöÈöèÁùÄÊêúÁ¥¢ÁªìÊûúÁöÑÂèòÂåñËÄåÂèòÂåñ„ÄÇ‰ΩÜÊòØÁî®Êà∑ÊêúÁ¥¢Êù°‰ª∂ÊîπÂèòÊó∂ÔºåÊêúÁ¥¢ÁªìÊûú‰ºöË∑üÁùÄÂèòÂåñ„ÄÇ</p><p>‰æãÂ¶ÇÔºöÁî®Êà∑ÊêúÁ¥¢‚Äú‰∏úÊñπÊòéÁè†‚ÄùÔºåÈÇ£ÊêúÁ¥¢ÁöÑÈÖíÂ∫óËÇØÂÆöÊòØÂú®‰∏äÊµ∑‰∏úÊñπÊòéÁè†ÈôÑËøëÔºåÂõ†Ê≠§ÔºåÂüéÂ∏ÇÂè™ËÉΩÊòØ‰∏äÊµ∑ÔºåÊ≠§Êó∂ÂüéÂ∏ÇÂàóË°®‰∏≠Â∞±‰∏çÂ∫îËØ•ÊòæÁ§∫Âåó‰∫¨„ÄÅÊ∑±Âú≥„ÄÅÊù≠Â∑ûËøô‰∫õ‰ø°ÊÅØ‰∫Ü„ÄÇ</p><p>‰πüÂ∞±ÊòØËØ¥ÔºåÊêúÁ¥¢ÁªìÊûú‰∏≠ÂåÖÂê´Âì™‰∫õÂüéÂ∏ÇÔºåÈ°µÈù¢Â∞±Â∫îËØ•ÂàóÂá∫Âì™‰∫õÂüéÂ∏ÇÔºõÊêúÁ¥¢ÁªìÊûú‰∏≠ÂåÖÂê´Âì™‰∫õÂìÅÁâåÔºåÈ°µÈù¢Â∞±Â∫îËØ•ÂàóÂá∫Âì™‰∫õÂìÅÁâå„ÄÇ</p><p>Â¶Ç‰ΩïÂæóÁü•ÊêúÁ¥¢ÁªìÊûú‰∏≠ÂåÖÂê´Âì™‰∫õÂìÅÁâåÔºüÂ¶Ç‰ΩïÂæóÁü•ÊêúÁ¥¢ÁªìÊûú‰∏≠ÂåÖÂê´Âì™‰∫õÂüéÂ∏ÇÔºü</p><p>‰ΩøÁî®ËÅöÂêàÂäüËÉΩÔºåÂà©Áî®BucketËÅöÂêàÔºåÂØπÊêúÁ¥¢ÁªìÊûú‰∏≠ÁöÑÊñáÊ°£Âü∫‰∫éÂìÅÁâåÂàÜÁªÑ„ÄÅÂü∫‰∫éÂüéÂ∏ÇÂàÜÁªÑÔºåÂ∞±ËÉΩÂæóÁü•ÂåÖÂê´Âì™‰∫õÂìÅÁâå„ÄÅÂì™‰∫õÂüéÂ∏Ç‰∫Ü„ÄÇ</p><p>Âõ†‰∏∫ÊòØÂØπÊêúÁ¥¢ÁªìÊûúËÅöÂêàÔºåÂõ†Ê≠§ËÅöÂêàÊòØ<strong>ÈôêÂÆöËåÉÂõ¥ÁöÑËÅöÂêà</strong>Ôºå‰πüÂ∞±ÊòØËØ¥ËÅöÂêàÁöÑÈôêÂÆöÊù°‰ª∂Ë∑üÊêúÁ¥¢ÊñáÊ°£ÁöÑÊù°‰ª∂‰∏ÄËá¥„ÄÇ</p><p>Êü•ÁúãÊµèËßàÂô®ÂèØ‰ª•ÂèëÁé∞ÔºåÂâçÁ´ØÂÖ∂ÂÆûÂ∑≤ÁªèÂèëÂá∫‰∫ÜËøôÊ†∑ÁöÑ‰∏Ä‰∏™ËØ∑Ê±ÇÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723193730799.png" alt="image-20210723193730799" tabindex="0" loading="lazy"><figcaption>image-20210723193730799</figcaption></figure><p>ËØ∑Ê±Ç<strong>ÂèÇÊï∞‰∏éÊêúÁ¥¢ÊñáÊ°£ÁöÑÂèÇÊï∞ÂÆåÂÖ®‰∏ÄËá¥</strong>„ÄÇ</p><p>ËøîÂõûÂÄºÁ±ªÂûãÂ∞±ÊòØÈ°µÈù¢Ë¶ÅÂ±ïÁ§∫ÁöÑÊúÄÁªàÁªìÊûúÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723203915982.png" alt="image-20210723203915982" tabindex="0" loading="lazy"><figcaption>image-20210723203915982</figcaption></figure><p>ÁªìÊûúÊòØ‰∏Ä‰∏™MapÁªìÊûÑÔºö</p><ul><li>keyÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂüéÂ∏Ç„ÄÅÊòüÁ∫ß„ÄÅÂìÅÁâå„ÄÅ‰ª∑Ê†º</li><li>valueÊòØÈõÜÂêàÔºå‰æãÂ¶ÇÂ§ö‰∏™ÂüéÂ∏ÇÁöÑÂêçÁß∞</li></ul><h3 id="_1-3-3-‰∏öÂä°ÂÆûÁé∞" tabindex="-1"><a class="header-anchor" href="#_1-3-3-‰∏öÂä°ÂÆûÁé∞"><span>1.3.3.‰∏öÂä°ÂÆûÁé∞</span></a></h3><p>Âú®<code>cn.itcast.hotel.web</code>ÂåÖÁöÑ<code>HotelController</code>‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ÊñπÊ≥ïÔºåÈÅµÂæ™‰∏ãÈù¢ÁöÑË¶ÅÊ±ÇÔºö</p><ul><li>ËØ∑Ê±ÇÊñπÂºèÔºö<code>POST</code></li><li>ËØ∑Ê±ÇË∑ØÂæÑÔºö<code>/hotel/filters</code></li><li>ËØ∑Ê±ÇÂèÇÊï∞Ôºö<code>RequestParams</code>Ôºå‰∏éÊêúÁ¥¢ÊñáÊ°£ÁöÑÂèÇÊï∞‰∏ÄËá¥</li><li>ËøîÂõûÂÄºÁ±ªÂûãÔºö<code>Map&lt;String, List&lt;String&gt;&gt;</code></li></ul><p>‰ª£Á†ÅÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">PostMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RequestBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(params);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËøôÈáåË∞ÉÁî®‰∫ÜIHotelService‰∏≠ÁöÑgetFiltersÊñπÊ≥ïÔºåÂ∞öÊú™ÂÆûÁé∞„ÄÇ</p><p>Âú®<code>cn.itcast.hotel.service.IHotelService</code>‰∏≠ÂÆö‰πâÊñ∞ÊñπÊ≥ïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Âú®<code>cn.itcast.hotel.service.impl.HotelService</code>‰∏≠ÂÆûÁé∞ËØ•ÊñπÊ≥ïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> params) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.1.query</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        buildBasicQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(params</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.2.ËÆæÁΩÆsize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.3.ËÅöÂêà</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        buildAggregation</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(request)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 3.ÂèëÂá∫ËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.Ëß£ÊûêÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Aggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> aggregations </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getAggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.1.Ê†πÊçÆÂìÅÁâåÂêçÁß∞ÔºåËé∑ÂèñÂìÅÁâåÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brandList </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getAggByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(aggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;brandAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂìÅÁâå&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, brandList);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.2.Ê†πÊçÆÂìÅÁâåÂêçÁß∞ÔºåËé∑ÂèñÂìÅÁâåÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> cityList </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getAggByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(aggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;cityAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÂüéÂ∏Ç&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, cityList);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.3.Ê†πÊçÆÂìÅÁâåÂêçÁß∞ÔºåËé∑ÂèñÂìÅÁâåÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> starList </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getAggByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(aggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;starAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        result</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ÊòüÁ∫ß&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, starList);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(e)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> buildAggregation</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aggregation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">AggregationBuilders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">terms</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brandAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">field</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aggregation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">AggregationBuilders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">terms</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cityAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">field</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;city&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">aggregation</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">AggregationBuilders</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">terms</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;starAgg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">field</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;starName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                 .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                                );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getAggByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Aggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> aggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> aggName) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.1.Ê†πÊçÆËÅöÂêàÂêçÁß∞Ëé∑ÂèñËÅöÂêàÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    Terms</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brandTerms </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> aggregations</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(aggName);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.2.Ëé∑Âèñbuckets</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> Terms</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Bucket</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> buckets </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> brandTerms</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBuckets</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // 4.3.ÈÅçÂéÜ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brandList </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Terms</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Bucket</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> bucket </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> buckets) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.4.Ëé∑Âèñkey</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> bucket</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getKeyAsString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        brandList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(key);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brandList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_2-Ëá™Âä®Ë°•ÂÖ®" tabindex="-1"><a class="header-anchor" href="#_2-Ëá™Âä®Ë°•ÂÖ®"><span>2.Ëá™Âä®Ë°•ÂÖ®</span></a></h1><p>ÂΩìÁî®Êà∑Âú®ÊêúÁ¥¢Ê°ÜËæìÂÖ•Â≠óÁ¨¶Êó∂ÔºåÊàë‰ª¨Â∫îËØ•ÊèêÁ§∫Âá∫‰∏éËØ•Â≠óÁ¨¶ÊúâÂÖ≥ÁöÑÊêúÁ¥¢È°πÔºåÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723204936367.png" alt="image-20210723204936367" tabindex="0" loading="lazy"><figcaption>image-20210723204936367</figcaption></figure><p>ËøôÁßçÊ†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑÂ≠óÊØçÔºåÊèêÁ§∫ÂÆåÊï¥ËØçÊù°ÁöÑÂäüËÉΩÔºåÂ∞±ÊòØËá™Âä®Ë°•ÂÖ®‰∫Ü„ÄÇ</p><p>Âõ†‰∏∫ÈúÄË¶ÅÊ†πÊçÆÊãºÈü≥Â≠óÊØçÊù•Êé®Êñ≠ÔºåÂõ†Ê≠§Ë¶ÅÁî®Âà∞ÊãºÈü≥ÂàÜËØçÂäüËÉΩ„ÄÇ</p><h2 id="_2-1-ÊãºÈü≥ÂàÜËØçÂô®" tabindex="-1"><a class="header-anchor" href="#_2-1-ÊãºÈü≥ÂàÜËØçÂô®"><span>2.1.ÊãºÈü≥ÂàÜËØçÂô®</span></a></h2><p>Ë¶ÅÂÆûÁé∞Ê†πÊçÆÂ≠óÊØçÂÅöË°•ÂÖ®ÔºåÂ∞±ÂøÖÈ°ªÂØπÊñáÊ°£ÊåâÁÖßÊãºÈü≥ÂàÜËØç„ÄÇÂú®GitHub‰∏äÊÅ∞Â•ΩÊúâelasticsearchÁöÑÊãºÈü≥ÂàÜËØçÊèí‰ª∂„ÄÇÂú∞ÂùÄÔºöhttps://github.com/medcl/elasticsearch-analysis-pinyin</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723205932746.png" alt="image-20210723205932746" tabindex="0" loading="lazy"><figcaption>image-20210723205932746</figcaption></figure><p>ËØæÂâçËµÑÊñô‰∏≠‰πüÊèê‰æõ‰∫ÜÊãºÈü≥ÂàÜËØçÂô®ÁöÑÂÆâË£ÖÂåÖÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723205722303.png" alt="image-20210723205722303" tabindex="0" loading="lazy"><figcaption>image-20210723205722303</figcaption></figure><p>ÂÆâË£ÖÊñπÂºè‰∏éIKÂàÜËØçÂô®‰∏ÄÊ†∑ÔºåÂàÜ‰∏âÊ≠•Ôºö</p><p>‚Äã ‚ë†Ëß£Âéã</p><p>‚Äã ‚ë°‰∏ä‰º†Âà∞ËôöÊãüÊú∫‰∏≠ÔºåelasticsearchÁöÑpluginÁõÆÂΩï</p><p>‚Äã ‚ë¢ÈáçÂêØelasticsearch</p><p>‚Äã ‚ë£ÊµãËØï</p><p>ËØ¶ÁªÜÂÆâË£ÖÊ≠•È™§ÂèØ‰ª•ÂèÇËÄÉIKÂàÜËØçÂô®ÁöÑÂÆâË£ÖËøáÁ®ã„ÄÇ</p><p>ÊµãËØïÁî®Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST¬†/_analyze</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Â¶ÇÂÆ∂ÈÖíÂ∫óËøò‰∏çÈîô&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;pinyin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÁªìÊûúÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723210126506.png" alt="image-20210723210126506" tabindex="0" loading="lazy"><figcaption>image-20210723210126506</figcaption></figure><h2 id="_2-2-Ëá™ÂÆö‰πâÂàÜËØçÂô®" tabindex="-1"><a class="header-anchor" href="#_2-2-Ëá™ÂÆö‰πâÂàÜËØçÂô®"><span>2.2.Ëá™ÂÆö‰πâÂàÜËØçÂô®</span></a></h2><p>ÈªòËÆ§ÁöÑÊãºÈü≥ÂàÜËØçÂô®‰ºöÂ∞ÜÊØè‰∏™Ê±âÂ≠óÂçïÁã¨ÂàÜ‰∏∫ÊãºÈü≥ÔºåËÄåÊàë‰ª¨Â∏åÊúõÁöÑÊòØÊØè‰∏™ËØçÊù°ÂΩ¢Êàê‰∏ÄÁªÑÊãºÈü≥ÔºåÈúÄË¶ÅÂØπÊãºÈü≥ÂàÜËØçÂô®ÂÅö‰∏™ÊÄßÂåñÂÆöÂà∂ÔºåÂΩ¢ÊàêËá™ÂÆö‰πâÂàÜËØçÂô®„ÄÇ</p><p>elasticsearch‰∏≠ÂàÜËØçÂô®ÔºàanalyzerÔºâÁöÑÁªÑÊàêÂåÖÂê´‰∏âÈÉ®ÂàÜÔºö</p><ul><li>character filtersÔºöÂú®tokenizer‰πãÂâçÂØπÊñáÊú¨ËøõË°åÂ§ÑÁêÜ„ÄÇ‰æãÂ¶ÇÂà†Èô§Â≠óÁ¨¶„ÄÅÊõøÊç¢Â≠óÁ¨¶</li><li>tokenizerÔºöÂ∞ÜÊñáÊú¨ÊåâÁÖß‰∏ÄÂÆöÁöÑËßÑÂàôÂàáÂâ≤ÊàêËØçÊù°ÔºàtermÔºâ„ÄÇ‰æãÂ¶ÇkeywordÔºåÂ∞±ÊòØ‰∏çÂàÜËØçÔºõËøòÊúâik_smart</li><li>tokenizer filterÔºöÂ∞ÜtokenizerËæìÂá∫ÁöÑËØçÊù°ÂÅöËøõ‰∏ÄÊ≠•Â§ÑÁêÜ„ÄÇ‰æãÂ¶ÇÂ§ßÂ∞èÂÜôËΩ¨Êç¢„ÄÅÂêå‰πâËØçÂ§ÑÁêÜ„ÄÅÊãºÈü≥Â§ÑÁêÜÁ≠â</li></ul><p>ÊñáÊ°£ÂàÜËØçÊó∂‰ºö‰æùÊ¨°Áî±Ëøô‰∏âÈÉ®ÂàÜÊù•Â§ÑÁêÜÊñáÊ°£Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723210427878.png" alt="image-20210723210427878" tabindex="0" loading="lazy"><figcaption>image-20210723210427878</figcaption></figure><p>Â£∞ÊòéËá™ÂÆö‰πâÂàÜËØçÂô®ÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">#Ëá™ÂÆö‰πâÂàÜËØçÂô®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT /test</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;my_analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;tokenizer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_max_word&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;filter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;py&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;filter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;pinyin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;keep_full_pinyin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;keep_joined_full_pinyin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;keep_original&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;limit_first_letter_length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;remove_duplicated_term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;none_chinese_pinyin_tokenize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;mappings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">   &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;my_analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;search_analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_smart&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÊµãËØïÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723211829150.png" alt="image-20210723211829150" tabindex="0" loading="lazy"><figcaption>image-20210723211829150</figcaption></figure><p>ÊÄªÁªìÔºö</p><p>Â¶Ç‰Ωï‰ΩøÁî®ÊãºÈü≥ÂàÜËØçÂô®Ôºü</p><ul><li><p>‚ë†‰∏ãËΩΩpinyinÂàÜËØçÂô®</p></li><li><p>‚ë°Ëß£ÂéãÂπ∂ÊîæÂà∞elasticsearchÁöÑpluginÁõÆÂΩï</p></li><li><p>‚ë¢ÈáçÂêØÂç≥ÂèØ</p></li></ul><p>Â¶Ç‰ΩïËá™ÂÆö‰πâÂàÜËØçÂô®Ôºü</p><ul><li><p>‚ë†ÂàõÂª∫Á¥¢ÂºïÂ∫ìÊó∂ÔºåÂú®settings‰∏≠ÈÖçÁΩÆÔºåÂèØ‰ª•ÂåÖÂê´‰∏âÈÉ®ÂàÜ</p></li><li><p>‚ë°character filter</p></li><li><p>‚ë¢tokenizer</p></li><li><p>‚ë£filter</p></li></ul><p>ÊãºÈü≥ÂàÜËØçÂô®Ê≥®ÊÑè‰∫ãÈ°πÔºü</p><ul><li>‰∏∫‰∫ÜÈÅøÂÖçÊêúÁ¥¢Âà∞ÂêåÈü≥Â≠óÔºåÊêúÁ¥¢Êó∂‰∏çË¶Å‰ΩøÁî®ÊãºÈü≥ÂàÜËØçÂô®</li></ul><h2 id="_2-3-Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_2-3-Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢"><span>2.3.Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢</span></a></h2><p>elasticsearchÊèê‰æõ‰∫Ü<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.6/search-suggesters.html" target="_blank" rel="noopener noreferrer">Completion Suggester</a>Êü•ËØ¢Êù•ÂÆûÁé∞Ëá™Âä®Ë°•ÂÖ®ÂäüËÉΩ„ÄÇËøô‰∏™Êü•ËØ¢‰ºöÂåπÈÖç‰ª•Áî®Êà∑ËæìÂÖ•ÂÜÖÂÆπÂºÄÂ§¥ÁöÑËØçÊù°Âπ∂ËøîÂõû„ÄÇ‰∏∫‰∫ÜÊèêÈ´òË°•ÂÖ®Êü•ËØ¢ÁöÑÊïàÁéáÔºåÂØπ‰∫éÊñáÊ°£‰∏≠Â≠óÊÆµÁöÑÁ±ªÂûãÊúâ‰∏Ä‰∫õÁ∫¶ÊùüÔºö</p><ul><li><p>ÂèÇ‰∏éË°•ÂÖ®Êü•ËØ¢ÁöÑÂ≠óÊÆµÂøÖÈ°ªÊòØcompletionÁ±ªÂûã„ÄÇ</p></li><li><p>Â≠óÊÆµÁöÑÂÜÖÂÆπ‰∏ÄËà¨ÊòØÁî®Êù•Ë°•ÂÖ®ÁöÑÂ§ö‰∏™ËØçÊù°ÂΩ¢ÊàêÁöÑÊï∞ÁªÑ„ÄÇ</p></li></ul><p>ÊØîÂ¶ÇÔºå‰∏Ä‰∏™ËøôÊ†∑ÁöÑÁ¥¢ÂºïÂ∫ìÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÂàõÂª∫Á¥¢ÂºïÂ∫ì</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT¬†test</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;mappings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;completion&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÁÑ∂ÂêéÊèíÂÖ•‰∏ãÈù¢ÁöÑÊï∞ÊçÆÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// Á§∫‰æãÊï∞ÊçÆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST¬†test/_doc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Sony&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;WH-1000XM3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST¬†test/_doc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;SK-II&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;PITERA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">POST¬†test/_doc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Nintendo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;switch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Êü•ËØ¢ÁöÑDSLËØ≠Âè•Â¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">GET¬†/test/_search</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†&quot;suggest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†&quot;title_suggest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;s&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†ÂÖ≥ÈîÆÂ≠ó</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†&quot;completion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†Ë°•ÂÖ®Êü•ËØ¢ÁöÑÂ≠óÊÆµ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;skip_duplicates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,¬†</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//¬†Ë∑≥ËøáÈáçÂ§çÁöÑ</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">¬†¬†¬†¬†¬†¬†¬†¬†&quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:¬†</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">¬†//¬†Ëé∑ÂèñÂâç10Êù°ÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">¬†¬†}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-4-ÂÆûÁé∞ÈÖíÂ∫óÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®" tabindex="-1"><a class="header-anchor" href="#_2-4-ÂÆûÁé∞ÈÖíÂ∫óÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®"><span>2.4.ÂÆûÁé∞ÈÖíÂ∫óÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®</span></a></h2><p>Áé∞Âú®ÔºåÊàë‰ª¨ÁöÑhotelÁ¥¢ÂºïÂ∫ìËøòÊ≤°ÊúâËÆæÁΩÆÊãºÈü≥ÂàÜËØçÂô®ÔºåÈúÄË¶Å‰øÆÊîπÁ¥¢ÂºïÂ∫ì‰∏≠ÁöÑÈÖçÁΩÆ„ÄÇ‰ΩÜÊòØÊàë‰ª¨Áü•ÈÅìÁ¥¢ÂºïÂ∫ìÊòØÊó†Ê≥ï‰øÆÊîπÁöÑÔºåÂè™ËÉΩÂà†Èô§ÁÑ∂ÂêéÈáçÊñ∞ÂàõÂª∫„ÄÇ</p><p>Âè¶Â§ñÔºåÊàë‰ª¨ÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™Â≠óÊÆµÔºåÁî®Êù•ÂÅöËá™Âä®Ë°•ÂÖ®ÔºåÂ∞Übrand„ÄÅsuggestion„ÄÅcityÁ≠âÈÉΩÊîæËøõÂéªÔºå‰Ωú‰∏∫Ëá™Âä®Ë°•ÂÖ®ÁöÑÊèêÁ§∫„ÄÇ</p><p>Âõ†Ê≠§ÔºåÊÄªÁªì‰∏Ä‰∏ãÔºåÊàë‰ª¨ÈúÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÂåÖÊã¨Ôºö</p><ol><li><p>‰øÆÊîπhotelÁ¥¢ÂºïÂ∫ìÁªìÊûÑÔºåËÆæÁΩÆËá™ÂÆö‰πâÊãºÈü≥ÂàÜËØçÂô®</p></li><li><p>‰øÆÊîπÁ¥¢ÂºïÂ∫ìÁöÑname„ÄÅallÂ≠óÊÆµÔºå‰ΩøÁî®Ëá™ÂÆö‰πâÂàÜËØçÂô®</p></li><li><p>Á¥¢ÂºïÂ∫ìÊ∑ªÂä†‰∏Ä‰∏™Êñ∞Â≠óÊÆµsuggestionÔºåÁ±ªÂûã‰∏∫completionÁ±ªÂûãÔºå‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÂàÜËØçÂô®</p></li><li><p>ÁªôHotelDocÁ±ªÊ∑ªÂä†suggestionÂ≠óÊÆµÔºåÂÜÖÂÆπÂåÖÂê´brand„ÄÅbusiness</p></li><li><p>ÈáçÊñ∞ÂØºÂÖ•Êï∞ÊçÆÂà∞hotelÂ∫ì</p></li></ol><h3 id="_2-4-1-‰øÆÊîπÈÖíÂ∫óÊò†Â∞ÑÁªìÊûÑ" tabindex="-1"><a class="header-anchor" href="#_2-4-1-‰øÆÊîπÈÖíÂ∫óÊò†Â∞ÑÁªìÊûÑ"><span>2.4.1.‰øÆÊîπÈÖíÂ∫óÊò†Â∞ÑÁªìÊûÑ</span></a></h3><p>‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ÈÖíÂ∫óÊï∞ÊçÆÁ¥¢ÂºïÂ∫ì</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">PUT /hotel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;text_anlyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;tokenizer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_max_word&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;filter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;py&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;completion_analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;tokenizer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;filter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;py&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;filter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;pinyin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;keep_full_pinyin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;keep_joined_full_pinyin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;keep_original&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;limit_first_letter_length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;remove_duplicated_term&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;none_chinese_pinyin_tokenize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;mappings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">    &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text_anlyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;search_analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_smart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;copy_to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;address&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;integer&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;integer&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;brand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;copy_to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;city&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;starName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;business&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;copy_to&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;all&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;location&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;geo_point&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;pic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keyword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text_anlyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">        &quot;search_analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ik_smart&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">      &quot;suggestion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;completion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">          &quot;analyzer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;completion_analyzer&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-2-‰øÆÊîπhoteldocÂÆû‰Ωì" tabindex="-1"><a class="header-anchor" href="#_2-4-2-‰øÆÊîπhoteldocÂÆû‰Ωì"><span>2.4.2.‰øÆÊîπHotelDocÂÆû‰Ωì</span></a></h3><p>HotelDoc‰∏≠Ë¶ÅÊ∑ªÂä†‰∏Ä‰∏™Â≠óÊÆµÔºåÁî®Êù•ÂÅöËá™Âä®Ë°•ÂÖ®ÔºåÂÜÖÂÆπÂèØ‰ª•ÊòØÈÖíÂ∫óÂìÅÁâå„ÄÅÂüéÂ∏Ç„ÄÅÂïÜÂúàÁ≠â‰ø°ÊÅØ„ÄÇÊåâÁÖßËá™Âä®Ë°•ÂÖ®Â≠óÊÆµÁöÑË¶ÅÊ±ÇÔºåÊúÄÂ•ΩÊòØËøô‰∫õÂ≠óÊÆµÁöÑÊï∞ÁªÑ„ÄÇ</p><p>Âõ†Ê≠§Êàë‰ª¨Âú®HotelDoc‰∏≠Ê∑ªÂä†‰∏Ä‰∏™suggestionÂ≠óÊÆµÔºåÁ±ªÂûã‰∏∫<code>List&lt;String&gt;</code>ÔºåÁÑ∂ÂêéÂ∞Übrand„ÄÅcity„ÄÅbusinessÁ≠â‰ø°ÊÅØÊîæÂà∞ÈáåÈù¢„ÄÇ</p><p>‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.pojo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.Data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> lombok.NoArgsConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.Arrays</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.Collections</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> java.util.List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">NoArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> address</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> price</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> score</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> city</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> starName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> business</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> location</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> pic</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> isAD</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> suggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Hotel</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">address</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">price</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">score</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getScore</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">brand</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBrand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">city</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getCity</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">starName</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getStarName</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">business</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getBusiness</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getLatitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;, &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getLongitude</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">pic</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getPic</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ÁªÑË£Ösuggestion</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">business</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">contains</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // businessÊúâÂ§ö‰∏™ÂÄºÔºåÈúÄË¶ÅÂàáÂâ≤</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">            String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">business</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            // Ê∑ªÂä†ÂÖÉÁ¥†</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">suggestion</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">suggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            Collections</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">suggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, arr);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">suggestion</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Arrays</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">asList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">brand</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">business</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-3-ÈáçÊñ∞ÂØºÂÖ•" tabindex="-1"><a class="header-anchor" href="#_2-4-3-ÈáçÊñ∞ÂØºÂÖ•"><span>2.4.3.ÈáçÊñ∞ÂØºÂÖ•</span></a></h3><p>ÈáçÊñ∞ÊâßË°å‰πãÂâçÁºñÂÜôÁöÑÂØºÂÖ•Êï∞ÊçÆÂäüËÉΩÔºåÂèØ‰ª•ÁúãÂà∞Êñ∞ÁöÑÈÖíÂ∫óÊï∞ÊçÆ‰∏≠ÂåÖÂê´‰∫ÜsuggestionÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723213546183.png" alt="image-20210723213546183" tabindex="0" loading="lazy"><figcaption>image-20210723213546183</figcaption></figure><h3 id="_2-4-4-Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢ÁöÑjavaapi" tabindex="-1"><a class="header-anchor" href="#_2-4-4-Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢ÁöÑjavaapi"><span>2.4.4.Ëá™Âä®Ë°•ÂÖ®Êü•ËØ¢ÁöÑJavaAPI</span></a></h3><p>‰πãÂâçÊàë‰ª¨Â≠¶‰π†‰∫ÜËá™Âä®Ë°•ÂÖ®Êü•ËØ¢ÁöÑDSLÔºåËÄåÊ≤°ÊúâÂ≠¶‰π†ÂØπÂ∫îÁöÑJavaAPIÔºåËøôÈáåÁªôÂá∫‰∏Ä‰∏™Á§∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723213759922.png" alt="image-20210723213759922" tabindex="0" loading="lazy"><figcaption>image-20210723213759922</figcaption></figure><p>ËÄåËá™Âä®Ë°•ÂÖ®ÁöÑÁªìÊûú‰πüÊØîËæÉÁâπÊÆäÔºåËß£ÊûêÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723213917524.png" alt="image-20210723213917524" tabindex="0" loading="lazy"><figcaption>image-20210723213917524</figcaption></figure><h3 id="_2-4-5-ÂÆûÁé∞ÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®" tabindex="-1"><a class="header-anchor" href="#_2-4-5-ÂÆûÁé∞ÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®"><span>2.4.5.ÂÆûÁé∞ÊêúÁ¥¢Ê°ÜËá™Âä®Ë°•ÂÖ®</span></a></h3><p>Êü•ÁúãÂâçÁ´ØÈ°µÈù¢ÔºåÂèØ‰ª•ÂèëÁé∞ÂΩìÊàë‰ª¨Âú®ËæìÂÖ•Ê°ÜÈîÆÂÖ•Êó∂ÔºåÂâçÁ´Ø‰ºöÂèëËµ∑ajaxËØ∑Ê±ÇÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723214021062.png" alt="image-20210723214021062" tabindex="0" loading="lazy"><figcaption>image-20210723214021062</figcaption></figure><p>ËøîÂõûÂÄºÊòØË°•ÂÖ®ËØçÊù°ÁöÑÈõÜÂêàÔºåÁ±ªÂûã‰∏∫<code>List&lt;String&gt;</code></p><p>1ÔºâÂú®<code>cn.itcast.hotel.web</code>ÂåÖ‰∏ãÁöÑ<code>HotelController</code>‰∏≠Ê∑ªÂä†Êñ∞Êé•Âè£ÔºåÊé•Êî∂Êñ∞ÁöÑËØ∑Ê±ÇÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;suggestion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getSuggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RequestParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> prefix) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSuggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(prefix);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ÔºâÂú®<code>cn.itcast.hotel.service</code>ÂåÖ‰∏ãÁöÑ<code>IhotelService</code>‰∏≠Ê∑ªÂä†ÊñπÊ≥ïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getSuggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> prefix)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>3ÔºâÂú®<code>cn.itcast.hotel.service.impl.HotelService</code>‰∏≠ÂÆûÁé∞ËØ•ÊñπÊ≥ïÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getSuggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> prefix) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SearchRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.ÂáÜÂ§áDSL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">suggest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> SuggestBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addSuggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">            &quot;suggestions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            SuggestBuilders</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">completionSuggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;suggestion&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(prefix)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">skipDuplicates</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        ));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 3.ÂèëËµ∑ËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        SearchResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">search</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.Ëß£ÊûêÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Suggest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> suggest </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSuggest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.1.Ê†πÊçÆË°•ÂÖ®Êü•ËØ¢ÂêçÁß∞ÔºåËé∑ÂèñË°•ÂÖ®ÁªìÊûú</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        CompletionSuggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> suggestions </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> suggest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getSuggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;suggestions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.2.Ëé∑Âèñoptions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">CompletionSuggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> options </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> suggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 4.3.ÈÅçÂéÜ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> list </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">CompletionSuggestion</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> option </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> options) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> text </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> option</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getText</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            list</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(text);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> list</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(e)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_3-Êï∞ÊçÆÂêåÊ≠•" tabindex="-1"><a class="header-anchor" href="#_3-Êï∞ÊçÆÂêåÊ≠•"><span>3.Êï∞ÊçÆÂêåÊ≠•</span></a></h1><p>elasticsearch‰∏≠ÁöÑÈÖíÂ∫óÊï∞ÊçÆÊù•Ëá™‰∫émysqlÊï∞ÊçÆÂ∫ìÔºåÂõ†Ê≠§mysqlÊï∞ÊçÆÂèëÁîüÊîπÂèòÊó∂Ôºåelasticsearch‰πüÂøÖÈ°ªË∑üÁùÄÊîπÂèòÔºåËøô‰∏™Â∞±ÊòØelasticsearch‰∏émysql‰πãÈó¥ÁöÑ<strong>Êï∞ÊçÆÂêåÊ≠•</strong>„ÄÇ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723214758392.png" alt="image-20210723214758392" tabindex="0" loading="lazy"><figcaption>image-20210723214758392</figcaption></figure><h2 id="_3-1-ÊÄùË∑ØÂàÜÊûê" tabindex="-1"><a class="header-anchor" href="#_3-1-ÊÄùË∑ØÂàÜÊûê"><span>3.1.ÊÄùË∑ØÂàÜÊûê</span></a></h2><p>Â∏∏ËßÅÁöÑÊï∞ÊçÆÂêåÊ≠•ÊñπÊ°àÊúâ‰∏âÁßçÔºö</p><ul><li>ÂêåÊ≠•Ë∞ÉÁî®</li><li>ÂºÇÊ≠•ÈÄöÁü•</li><li>ÁõëÂê¨binlog</li></ul><h3 id="_3-1-1-ÂêåÊ≠•Ë∞ÉÁî®" tabindex="-1"><a class="header-anchor" href="#_3-1-1-ÂêåÊ≠•Ë∞ÉÁî®"><span>3.1.1.ÂêåÊ≠•Ë∞ÉÁî®</span></a></h3><p>ÊñπÊ°à‰∏ÄÔºöÂêåÊ≠•Ë∞ÉÁî®</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723214931869.png" alt="image-20210723214931869" tabindex="0" loading="lazy"><figcaption>image-20210723214931869</figcaption></figure><p>Âü∫Êú¨Ê≠•È™§Â¶Ç‰∏ãÔºö</p><ul><li>hotel-demoÂØπÂ§ñÊèê‰æõÊé•Âè£ÔºåÁî®Êù•‰øÆÊîπelasticsearch‰∏≠ÁöÑÊï∞ÊçÆ</li><li>ÈÖíÂ∫óÁÆ°ÁêÜÊúçÂä°Âú®ÂÆåÊàêÊï∞ÊçÆÂ∫ìÊìç‰ΩúÂêéÔºåÁõ¥Êé•Ë∞ÉÁî®hotel-demoÊèê‰æõÁöÑÊé•Âè£Ôºå</li></ul><h3 id="_3-1-2-ÂºÇÊ≠•ÈÄöÁü•" tabindex="-1"><a class="header-anchor" href="#_3-1-2-ÂºÇÊ≠•ÈÄöÁü•"><span>3.1.2.ÂºÇÊ≠•ÈÄöÁü•</span></a></h3><p>ÊñπÊ°à‰∫åÔºöÂºÇÊ≠•ÈÄöÁü•</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723215140735.png" alt="image-20210723215140735" tabindex="0" loading="lazy"><figcaption>image-20210723215140735</figcaption></figure><p>ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ul><li>hotel-adminÂØπmysqlÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÂÆåÊàêÂ¢û„ÄÅÂà†„ÄÅÊîπÂêéÔºåÂèëÈÄÅMQÊ∂àÊÅØ</li><li>hotel-demoÁõëÂê¨MQÔºåÊé•Êî∂Âà∞Ê∂àÊÅØÂêéÂÆåÊàêelasticsearchÊï∞ÊçÆ‰øÆÊîπ</li></ul><h3 id="_3-1-3-ÁõëÂê¨binlog" tabindex="-1"><a class="header-anchor" href="#_3-1-3-ÁõëÂê¨binlog"><span>3.1.3.ÁõëÂê¨binlog</span></a></h3><p>ÊñπÊ°à‰∏âÔºöÁõëÂê¨binlog</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723215518541.png" alt="image-20210723215518541" tabindex="0" loading="lazy"><figcaption>image-20210723215518541</figcaption></figure><p>ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ul><li>ÁªômysqlÂºÄÂêØbinlogÂäüËÉΩ</li><li>mysqlÂÆåÊàêÂ¢û„ÄÅÂà†„ÄÅÊîπÊìç‰ΩúÈÉΩ‰ºöËÆ∞ÂΩïÂú®binlog‰∏≠</li><li>hotel-demoÂü∫‰∫écanalÁõëÂê¨binlogÂèòÂåñÔºåÂÆûÊó∂Êõ¥Êñ∞elasticsearch‰∏≠ÁöÑÂÜÖÂÆπ</li></ul><h3 id="_3-1-4-ÈÄâÊã©" tabindex="-1"><a class="header-anchor" href="#_3-1-4-ÈÄâÊã©"><span>3.1.4.ÈÄâÊã©</span></a></h3><p>ÊñπÂºè‰∏ÄÔºöÂêåÊ≠•Ë∞ÉÁî®</p><ul><li>‰ºòÁÇπÔºöÂÆûÁé∞ÁÆÄÂçïÔºåÁ≤óÊö¥</li><li>Áº∫ÁÇπÔºö‰∏öÂä°ËÄ¶ÂêàÂ∫¶È´ò</li></ul><p>ÊñπÂºè‰∫åÔºöÂºÇÊ≠•ÈÄöÁü•</p><ul><li>‰ºòÁÇπÔºö‰ΩéËÄ¶ÂêàÔºåÂÆûÁé∞ÈöæÂ∫¶‰∏ÄËà¨</li><li>Áº∫ÁÇπÔºö‰æùËµñmqÁöÑÂèØÈù†ÊÄß</li></ul><p>ÊñπÂºè‰∏âÔºöÁõëÂê¨binlog</p><ul><li>‰ºòÁÇπÔºöÂÆåÂÖ®Ëß£Èô§ÊúçÂä°Èó¥ËÄ¶Âêà</li><li>Áº∫ÁÇπÔºöÂºÄÂêØbinlogÂ¢ûÂä†Êï∞ÊçÆÂ∫ìË¥üÊãÖ„ÄÅÂÆûÁé∞Â§çÊùÇÂ∫¶È´ò</li></ul><h2 id="_3-2-ÂÆûÁé∞Êï∞ÊçÆÂêåÊ≠•" tabindex="-1"><a class="header-anchor" href="#_3-2-ÂÆûÁé∞Êï∞ÊçÆÂêåÊ≠•"><span>3.2.ÂÆûÁé∞Êï∞ÊçÆÂêåÊ≠•</span></a></h2><h3 id="_3-2-1-ÊÄùË∑Ø" tabindex="-1"><a class="header-anchor" href="#_3-2-1-ÊÄùË∑Ø"><span>3.2.1.ÊÄùË∑Ø</span></a></h3><p>Âà©Áî®ËØæÂâçËµÑÊñôÊèê‰æõÁöÑhotel-adminÈ°πÁõÆ‰Ωú‰∏∫ÈÖíÂ∫óÁÆ°ÁêÜÁöÑÂæÆÊúçÂä°„ÄÇÂΩìÈÖíÂ∫óÊï∞ÊçÆÂèëÁîüÂ¢û„ÄÅÂà†„ÄÅÊîπÊó∂ÔºåË¶ÅÊ±ÇÂØπelasticsearch‰∏≠Êï∞ÊçÆ‰πüË¶ÅÂÆåÊàêÁõ∏ÂêåÊìç‰Ωú„ÄÇ</p><p>Ê≠•È™§Ôºö</p><ul><li><p>ÂØºÂÖ•ËØæÂâçËµÑÊñôÊèê‰æõÁöÑhotel-adminÈ°πÁõÆÔºåÂêØÂä®Âπ∂ÊµãËØïÈÖíÂ∫óÊï∞ÊçÆÁöÑCRUD</p></li><li><p>Â£∞Êòéexchange„ÄÅqueue„ÄÅRoutingKey</p></li><li><p>Âú®hotel-admin‰∏≠ÁöÑÂ¢û„ÄÅÂà†„ÄÅÊîπ‰∏öÂä°‰∏≠ÂÆåÊàêÊ∂àÊÅØÂèëÈÄÅ</p></li><li><p>Âú®hotel-demo‰∏≠ÂÆåÊàêÊ∂àÊÅØÁõëÂê¨ÔºåÂπ∂Êõ¥Êñ∞elasticsearch‰∏≠Êï∞ÊçÆ</p></li><li><p>ÂêØÂä®Âπ∂ÊµãËØïÊï∞ÊçÆÂêåÊ≠•ÂäüËÉΩ</p></li></ul><h3 id="_3-2-2-ÂØºÂÖ•demo" tabindex="-1"><a class="header-anchor" href="#_3-2-2-ÂØºÂÖ•demo"><span>3.2.2.ÂØºÂÖ•demo</span></a></h3><p>ÂØºÂÖ•ËØæÂâçËµÑÊñôÊèê‰æõÁöÑhotel-adminÈ°πÁõÆÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723220237930.png" alt="image-20210723220237930" tabindex="0" loading="lazy"><figcaption>image-20210723220237930</figcaption></figure><p>ËøêË°åÂêéÔºåËÆøÈóÆ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>http://localhost:8099</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723220354464.png" alt="image-20210723220354464" tabindex="0" loading="lazy"><figcaption>image-20210723220354464</figcaption></figure><p>ÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÈÖíÂ∫óÁöÑCRUDÂäüËÉΩÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723220511090.png" alt="image-20210723220511090" tabindex="0" loading="lazy"><figcaption>image-20210723220511090</figcaption></figure><h3 id="_3-2-3-Â£∞Êòé‰∫§Êç¢Êú∫„ÄÅÈòüÂàó" tabindex="-1"><a class="header-anchor" href="#_3-2-3-Â£∞Êòé‰∫§Êç¢Êú∫„ÄÅÈòüÂàó"><span>3.2.3.Â£∞Êòé‰∫§Êç¢Êú∫„ÄÅÈòüÂàó</span></a></h3><p>MQÁªìÊûÑÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723215850307.png" alt="image-20210723215850307" tabindex="0" loading="lazy"><figcaption>image-20210723215850307</figcaption></figure><h4 id="_1-ÂºïÂÖ•‰æùËµñ" tabindex="-1"><a class="header-anchor" href="#_1-ÂºïÂÖ•‰æùËµñ"><span>1ÔºâÂºïÂÖ•‰æùËµñ</span></a></h4><p>Âú®hotel-admin„ÄÅhotel-demo‰∏≠ÂºïÂÖ•rabbitmqÁöÑ‰æùËµñÔºö</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">&lt;!--amqp--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter-amqp&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-Â£∞ÊòéÈòüÂàó‰∫§Êç¢Êú∫ÂêçÁß∞" tabindex="-1"><a class="header-anchor" href="#_2-Â£∞ÊòéÈòüÂàó‰∫§Êç¢Êú∫ÂêçÁß∞"><span>2ÔºâÂ£∞ÊòéÈòüÂàó‰∫§Êç¢Êú∫ÂêçÁß∞</span></a></h4><p>Âú®hotel-adminÂíåhotel-demo‰∏≠ÁöÑ<code>cn.itcast.hotel.constatnts</code>ÂåÖ‰∏ãÊñ∞Âª∫‰∏Ä‰∏™Á±ª<code>MqConstants</code>Ôºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.constatnts</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * ‰∫§Êç¢Êú∫</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> HOTEL_EXCHANGE </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;hotel.topic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * ÁõëÂê¨Êñ∞Â¢ûÂíå‰øÆÊîπÁöÑÈòüÂàó</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> HOTEL_INSERT_QUEUE </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;hotel.insert.queue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * ÁõëÂê¨Âà†Èô§ÁöÑÈòüÂàó</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> HOTEL_DELETE_QUEUE </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;hotel.delete.queue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * Êñ∞Â¢ûÊàñ‰øÆÊîπÁöÑRoutingKey</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> HOTEL_INSERT_KEY </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;hotel.insert&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * Âà†Èô§ÁöÑRoutingKey</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> HOTEL_DELETE_KEY </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;hotel.delete&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-Â£∞ÊòéÈòüÂàó‰∫§Êç¢Êú∫" tabindex="-1"><a class="header-anchor" href="#_3-Â£∞ÊòéÈòüÂàó‰∫§Êç¢Êú∫"><span>3ÔºâÂ£∞ÊòéÈòüÂàó‰∫§Êç¢Êú∫</span></a></h4><p>Âú®hotel-demo‰∏≠ÔºåÂÆö‰πâÈÖçÁΩÆÁ±ªÔºåÂ£∞ÊòéÈòüÂàó„ÄÅ‰∫§Êç¢Êú∫Ôºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.config</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cn.itcast.hotel.constants.MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.amqp.core.Binding</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.amqp.core.BindingBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.amqp.core.Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.amqp.core.TopicExchange</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.context.annotation.Bean</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.context.annotation.Configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MqConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> TopicExchange</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> topicExchange</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> TopicExchange</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HOTEL_EXCHANGE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Queue</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> insertQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HOTEL_INSERT_QUEUE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Queue</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> deleteQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Queue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HOTEL_DELETE_QUEUE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Binding</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> insertQueueBinding</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> BindingBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">insertQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">topicExchange</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HOTEL_INSERT_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Binding</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> deleteQueueBinding</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> BindingBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">deleteQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">topicExchange</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HOTEL_DELETE_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-4-ÂèëÈÄÅmqÊ∂àÊÅØ" tabindex="-1"><a class="header-anchor" href="#_3-2-4-ÂèëÈÄÅmqÊ∂àÊÅØ"><span>3.2.4.ÂèëÈÄÅMQÊ∂àÊÅØ</span></a></h3><p>Âú®hotel-admin‰∏≠ÁöÑÂ¢û„ÄÅÂà†„ÄÅÊîπ‰∏öÂä°‰∏≠ÂàÜÂà´ÂèëÈÄÅMQÊ∂àÊÅØÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723221843816.png" alt="image-20210723221843816" tabindex="0" loading="lazy"><figcaption>image-20210723221843816</figcaption></figure><h3 id="_3-2-5-Êé•Êî∂mqÊ∂àÊÅØ" tabindex="-1"><a class="header-anchor" href="#_3-2-5-Êé•Êî∂mqÊ∂àÊÅØ"><span>3.2.5.Êé•Êî∂MQÊ∂àÊÅØ</span></a></h3><p>hotel-demoÊé•Êî∂Âà∞MQÊ∂àÊÅØË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÂåÖÊã¨Ôºö</p><ul><li>Êñ∞Â¢ûÊ∂àÊÅØÔºöÊ†πÊçÆ‰º†ÈÄíÁöÑhotelÁöÑidÊü•ËØ¢hotel‰ø°ÊÅØÔºåÁÑ∂ÂêéÊñ∞Â¢û‰∏ÄÊù°Êï∞ÊçÆÂà∞Á¥¢ÂºïÂ∫ì</li><li>Âà†Èô§Ê∂àÊÅØÔºöÊ†πÊçÆ‰º†ÈÄíÁöÑhotelÁöÑidÂà†Èô§Á¥¢ÂºïÂ∫ì‰∏≠ÁöÑ‰∏ÄÊù°Êï∞ÊçÆ</li></ul><p>1ÔºâÈ¶ñÂÖàÂú®hotel-demoÁöÑ<code>cn.itcast.hotel.service</code>ÂåÖ‰∏ãÁöÑ<code>IHotelService</code>‰∏≠Êñ∞Â¢ûÊñ∞Â¢û„ÄÅÂà†Èô§‰∏öÂä°</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> deleteById</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> insertById</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ÔºâÁªôhotel-demo‰∏≠ÁöÑ<code>cn.itcast.hotel.service.impl</code>ÂåÖ‰∏ãÁöÑHotelService‰∏≠ÂÆûÁé∞‰∏öÂä°Ôºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> deleteById</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 1.ÂáÜÂ§áRequest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        DeleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> DeleteRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(e)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> insertById</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 0.Ê†πÊçÆidÊü•ËØ¢ÈÖíÂ∫óÊï∞ÊçÆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotel </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(id)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // ËΩ¨Êç¢‰∏∫ÊñáÊ°£Á±ªÂûã</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelDoc </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> HotelDoc</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(hotel)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 1.ÂáÜÂ§áRequestÂØπË±°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        IndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> IndexRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hotel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">hotel</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 2.ÂáÜÂ§áJsonÊñáÊ°£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toJSONString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(hotelDoc), </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">XContentType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // 3.ÂèëÈÄÅËØ∑Ê±Ç</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        client</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">RequestOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(e)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ÔºâÁºñÂÜôÁõëÂê¨Âô®</p><p>Âú®hotel-demo‰∏≠ÁöÑ<code>cn.itcast.hotel.mq</code>ÂåÖÊñ∞Â¢û‰∏Ä‰∏™Á±ªÔºö</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#C678DD;"> cn.itcast.hotel.mq</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cn.itcast.hotel.constants.MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cn.itcast.hotel.service.IHotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.amqp.rabbit.annotation.RabbitListener</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.beans.factory.annotation.Autowired</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> org.springframework.stereotype.Component</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> HotelListener</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IHotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * ÁõëÂê¨ÈÖíÂ∫óÊñ∞Â¢ûÊàñ‰øÆÊîπÁöÑ‰∏öÂä°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ÈÖíÂ∫óid</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RabbitListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">queues</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HOTEL_INSERT_QUEUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> listenHotelInsertOrUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">insertById</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * ÁõëÂê¨ÈÖíÂ∫óÂà†Èô§ÁöÑ‰∏öÂä°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> ÈÖíÂ∫óid</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">RabbitListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">queues</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> MqConstants</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">HOTEL_DELETE_QUEUE</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> listenHotelDelete</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        hotelService</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">deleteById</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_4-ÈõÜÁæ§" tabindex="-1"><a class="header-anchor" href="#_4-ÈõÜÁæ§"><span>4.ÈõÜÁæ§</span></a></h1><p>ÂçïÊú∫ÁöÑelasticsearchÂÅöÊï∞ÊçÆÂ≠òÂÇ®ÔºåÂøÖÁÑ∂Èù¢‰∏¥‰∏§‰∏™ÈóÆÈ¢òÔºöÊµ∑ÈáèÊï∞ÊçÆÂ≠òÂÇ®ÈóÆÈ¢ò„ÄÅÂçïÁÇπÊïÖÈöúÈóÆÈ¢ò„ÄÇ</p><ul><li>Êµ∑ÈáèÊï∞ÊçÆÂ≠òÂÇ®ÈóÆÈ¢òÔºöÂ∞ÜÁ¥¢ÂºïÂ∫ì‰ªéÈÄªËæë‰∏äÊãÜÂàÜ‰∏∫N‰∏™ÂàÜÁâáÔºàshardÔºâÔºåÂ≠òÂÇ®Âà∞Â§ö‰∏™ËäÇÁÇπ</li><li>ÂçïÁÇπÊïÖÈöúÈóÆÈ¢òÔºöÂ∞ÜÂàÜÁâáÊï∞ÊçÆÂú®‰∏çÂêåËäÇÁÇπÂ§á‰ªΩÔºàreplica Ôºâ</li></ul><p><strong>ESÈõÜÁæ§Áõ∏ÂÖ≥Ê¶ÇÂøµ</strong>:</p><ul><li><p>ÈõÜÁæ§ÔºàclusterÔºâÔºö‰∏ÄÁªÑÊã•ÊúâÂÖ±ÂêåÁöÑ cluster name ÁöÑ ËäÇÁÇπ„ÄÇ</p></li><li><!----> ÔºöÈõÜÁæ§‰∏≠ÁöÑ‰∏Ä‰∏™ Elasticearch ÂÆû‰æã</li><li><!---->ÔºöÁ¥¢ÂºïÂèØ‰ª•Ë¢´ÊãÜÂàÜ‰∏∫‰∏çÂêåÁöÑÈÉ®ÂàÜËøõË°åÂ≠òÂÇ®ÔºåÁß∞‰∏∫ÂàÜÁâá„ÄÇÂú®ÈõÜÁæ§ÁéØÂ¢É‰∏ãÔºå‰∏Ä‰∏™Á¥¢ÂºïÁöÑ‰∏çÂêåÂàÜÁâáÂèØ‰ª•ÊãÜÂàÜÂà∞‰∏çÂêåÁöÑËäÇÁÇπ‰∏≠<p>Ëß£ÂÜ≥ÈóÆÈ¢òÔºöÊï∞ÊçÆÈáèÂ§™Â§ßÔºåÂçïÁÇπÂ≠òÂÇ®ÈáèÊúâÈôêÁöÑÈóÆÈ¢ò„ÄÇ</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20200104124440086-5602723.png" alt="image-20200104124440086" tabindex="0" loading="lazy"><figcaption>image-20200104124440086</figcaption></figure><blockquote><p>Ê≠§Â§ÑÔºåÊàë‰ª¨ÊääÊï∞ÊçÆÂàÜÊàê3ÁâáÔºöshard0„ÄÅshard1„ÄÅshard2</p></blockquote></li><li><p>‰∏ªÂàÜÁâáÔºàPrimary shardÔºâÔºöÁõ∏ÂØπ‰∫éÂâØÊú¨ÂàÜÁâáÁöÑÂÆö‰πâ„ÄÇ</p></li><li><p>ÂâØÊú¨ÂàÜÁâáÔºàReplica shardÔºâÊØè‰∏™‰∏ªÂàÜÁâáÂèØ‰ª•Êúâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÂâØÊú¨ÔºåÊï∞ÊçÆÂíå‰∏ªÂàÜÁâá‰∏ÄÊ†∑„ÄÇ</p><p>‚Äã</p></li></ul><p>Êï∞ÊçÆÂ§á‰ªΩÂèØ‰ª•‰øùËØÅÈ´òÂèØÁî®Ôºå‰ΩÜÊòØÊØè‰∏™ÂàÜÁâáÂ§á‰ªΩ‰∏Ä‰ªΩÔºåÊâÄÈúÄË¶ÅÁöÑËäÇÁÇπÊï∞ÈáèÂ∞±‰ºöÁøª‰∏ÄÂÄçÔºåÊàêÊú¨ÂÆûÂú®ÊòØÂ§™È´ò‰∫ÜÔºÅ</p><p>‰∏∫‰∫ÜÂú®È´òÂèØÁî®ÂíåÊàêÊú¨Èó¥ÂØªÊ±ÇÂπ≥Ë°°ÔºåÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÂÅöÔºö</p><ul><li>È¶ñÂÖàÂØπÊï∞ÊçÆÂàÜÁâáÔºåÂ≠òÂÇ®Âà∞‰∏çÂêåËäÇÁÇπ</li><li>ÁÑ∂ÂêéÂØπÊØè‰∏™ÂàÜÁâáËøõË°åÂ§á‰ªΩÔºåÊîæÂà∞ÂØπÊñπËäÇÁÇπÔºåÂÆåÊàê‰∫íÁõ∏Â§á‰ªΩ</li></ul><p>ËøôÊ†∑ÂèØ‰ª•Â§ßÂ§ßÂáèÂ∞ëÊâÄÈúÄË¶ÅÁöÑÊúçÂä°ËäÇÁÇπÊï∞ÈáèÔºåÂ¶ÇÂõæÔºåÊàë‰ª¨‰ª•3ÂàÜÁâáÔºåÊØè‰∏™ÂàÜÁâáÂ§á‰ªΩ‰∏Ä‰ªΩ‰∏∫‰æãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20200104124551912.png" alt="image-20200104124551912" tabindex="0" loading="lazy"><figcaption>image-20200104124551912</figcaption></figure><p>Áé∞Âú®ÔºåÊØè‰∏™ÂàÜÁâáÈÉΩÊúâ1‰∏™Â§á‰ªΩÔºåÂ≠òÂÇ®Âú®3‰∏™ËäÇÁÇπÔºö</p><ul><li>node0Ôºö‰øùÂ≠ò‰∫ÜÂàÜÁâá0Âíå1</li><li>node1Ôºö‰øùÂ≠ò‰∫ÜÂàÜÁâá0Âíå2</li><li>node2Ôºö‰øùÂ≠ò‰∫ÜÂàÜÁâá1Âíå2</li></ul><h2 id="_4-1-Êê≠Âª∫esÈõÜÁæ§" tabindex="-1"><a class="header-anchor" href="#_4-1-Êê≠Âª∫esÈõÜÁæ§"><span>4.1.Êê≠Âª∫ESÈõÜÁæ§</span></a></h2><p>ÂèÇËÄÉËØæÂâçËµÑÊñôÁöÑÊñáÊ°£Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723222732427.png" alt="image-20210723222732427" tabindex="0" loading="lazy"><figcaption>image-20210723222732427</figcaption></figure><p>ÂÖ∂‰∏≠ÁöÑÁ¨¨ÂõõÁ´†ËäÇÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723222812619.png" alt="image-20210723222812619" tabindex="0" loading="lazy"><figcaption>image-20210723222812619</figcaption></figure><h2 id="_4-2-ÈõÜÁæ§ËÑëË£ÇÈóÆÈ¢ò" tabindex="-1"><a class="header-anchor" href="#_4-2-ÈõÜÁæ§ËÑëË£ÇÈóÆÈ¢ò"><span>4.2.ÈõÜÁæ§ËÑëË£ÇÈóÆÈ¢ò</span></a></h2><h3 id="_4-2-1-ÈõÜÁæ§ËÅåË¥£ÂàíÂàÜ" tabindex="-1"><a class="header-anchor" href="#_4-2-1-ÈõÜÁæ§ËÅåË¥£ÂàíÂàÜ"><span>4.2.1.ÈõÜÁæ§ËÅåË¥£ÂàíÂàÜ</span></a></h3><p>elasticsearch‰∏≠ÈõÜÁæ§ËäÇÁÇπÊúâ‰∏çÂêåÁöÑËÅåË¥£ÂàíÂàÜÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223008967.png" alt="image-20210723223008967" tabindex="0" loading="lazy"><figcaption>image-20210723223008967</figcaption></figure><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÈõÜÁæ§‰∏≠ÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ËäÇÁÇπÈÉΩÂêåÊó∂ÂÖ∑Â§á‰∏äËø∞ÂõõÁßçËßíËâ≤„ÄÇ</p><p>‰ΩÜÊòØÁúüÂÆûÁöÑÈõÜÁæ§‰∏ÄÂÆöË¶ÅÂ∞ÜÈõÜÁæ§ËÅåË¥£ÂàÜÁ¶ªÔºö</p><ul><li>masterËäÇÁÇπÔºöÂØπCPUË¶ÅÊ±ÇÈ´òÔºå‰ΩÜÊòØÂÜÖÂ≠òË¶ÅÊ±ÇÁ¨¨</li><li>dataËäÇÁÇπÔºöÂØπCPUÂíåÂÜÖÂ≠òË¶ÅÊ±ÇÈÉΩÈ´ò</li><li>coordinatingËäÇÁÇπÔºöÂØπÁΩëÁªúÂ∏¶ÂÆΩ„ÄÅCPUË¶ÅÊ±ÇÈ´ò</li></ul><p>ËÅåË¥£ÂàÜÁ¶ªÂèØ‰ª•ËÆ©Êàë‰ª¨Ê†πÊçÆ‰∏çÂêåËäÇÁÇπÁöÑÈúÄÊ±ÇÂàÜÈÖç‰∏çÂêåÁöÑÁ°¨‰ª∂ÂéªÈÉ®ÁΩ≤„ÄÇËÄå‰∏îÈÅøÂÖç‰∏öÂä°‰πãÈó¥ÁöÑ‰∫íÁõ∏Âπ≤Êâ∞„ÄÇ</p><p>‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑesÈõÜÁæ§ËÅåË¥£ÂàíÂàÜÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223629142.png" alt="image-20210723223629142" tabindex="0" loading="lazy"><figcaption>image-20210723223629142</figcaption></figure><h3 id="_4-2-2-ËÑëË£ÇÈóÆÈ¢ò" tabindex="-1"><a class="header-anchor" href="#_4-2-2-ËÑëË£ÇÈóÆÈ¢ò"><span>4.2.2.ËÑëË£ÇÈóÆÈ¢ò</span></a></h3><p>ËÑëË£ÇÊòØÂõ†‰∏∫ÈõÜÁæ§‰∏≠ÁöÑËäÇÁÇπÂ§±ËÅîÂØºËá¥ÁöÑ„ÄÇ</p><p>‰æãÂ¶Ç‰∏Ä‰∏™ÈõÜÁæ§‰∏≠Ôºå‰∏ªËäÇÁÇπ‰∏éÂÖ∂ÂÆÉËäÇÁÇπÂ§±ËÅîÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223804995.png" alt="image-20210723223804995" tabindex="0" loading="lazy"><figcaption>image-20210723223804995</figcaption></figure><p>Ê≠§Êó∂Ôºånode2Âíånode3ËÆ§‰∏∫node1ÂÆïÊú∫ÔºåÂ∞±‰ºöÈáçÊñ∞ÈÄâ‰∏ªÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723223845754.png" alt="image-20210723223845754" tabindex="0" loading="lazy"><figcaption>image-20210723223845754</figcaption></figure><p>ÂΩìnode3ÂΩìÈÄâÂêéÔºåÈõÜÁæ§ÁªßÁª≠ÂØπÂ§ñÊèê‰æõÊúçÂä°Ôºånode2Âíånode3Ëá™ÊàêÈõÜÁæ§Ôºånode1Ëá™ÊàêÈõÜÁæ§Ôºå‰∏§‰∏™ÈõÜÁæ§Êï∞ÊçÆ‰∏çÂêåÊ≠•ÔºåÂá∫Áé∞Êï∞ÊçÆÂ∑ÆÂºÇ„ÄÇ</p><p>ÂΩìÁΩëÁªúÊÅ¢Â§çÂêéÔºåÂõ†‰∏∫ÈõÜÁæ§‰∏≠Êúâ‰∏§‰∏™masterËäÇÁÇπÔºåÈõÜÁæ§Áä∂ÊÄÅÁöÑ‰∏ç‰∏ÄËá¥ÔºåÂá∫Áé∞ËÑëË£ÇÁöÑÊÉÖÂÜµÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723224000555.png" alt="image-20210723224000555" tabindex="0" loading="lazy"><figcaption>image-20210723224000555</figcaption></figure><p>Ëß£ÂÜ≥ËÑëË£ÇÁöÑÊñπÊ°àÊòØÔºåË¶ÅÊ±ÇÈÄâÁ•®Ë∂ÖËøá ( eligibleËäÇÁÇπÊï∞Èáè + 1 Ôºâ/ 2 ÊâçËÉΩÂΩìÈÄâ‰∏∫‰∏ªÔºåÂõ†Ê≠§eligibleËäÇÁÇπÊï∞ÈáèÊúÄÂ•ΩÊòØÂ•áÊï∞„ÄÇÂØπÂ∫îÈÖçÁΩÆÈ°πÊòØdiscovery.zen.minimum_master_nodesÔºåÂú®es7.0‰ª•ÂêéÔºåÂ∑≤ÁªèÊàê‰∏∫ÈªòËÆ§ÈÖçÁΩÆÔºåÂõ†Ê≠§‰∏ÄËà¨‰∏ç‰ºöÂèëÁîüËÑëË£ÇÈóÆÈ¢ò</p><p>‰æãÂ¶ÇÔºö3‰∏™ËäÇÁÇπÂΩ¢ÊàêÁöÑÈõÜÁæ§ÔºåÈÄâÁ•®ÂøÖÈ°ªË∂ÖËøá Ôºà3 + 1Ôºâ / 2 Ôºå‰πüÂ∞±ÊòØ2Á•®„ÄÇnode3ÂæóÂà∞node2Âíånode3ÁöÑÈÄâÁ•®ÔºåÂΩìÈÄâ‰∏∫‰∏ª„ÄÇnode1Âè™ÊúâËá™Â∑±1Á•®ÔºåÊ≤°ÊúâÂΩìÈÄâ„ÄÇÈõÜÁæ§‰∏≠‰æùÁÑ∂Âè™Êúâ1‰∏™‰∏ªËäÇÁÇπÔºåÊ≤°ÊúâÂá∫Áé∞ËÑëË£Ç„ÄÇ</p><h3 id="_4-2-3-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_4-2-3-Â∞èÁªì"><span>4.2.3.Â∞èÁªì</span></a></h3><p>master eligibleËäÇÁÇπÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºü</p><ul><li>ÂèÇ‰∏éÈõÜÁæ§ÈÄâ‰∏ª</li><li>‰∏ªËäÇÁÇπÂèØ‰ª•ÁÆ°ÁêÜÈõÜÁæ§Áä∂ÊÄÅ„ÄÅÁÆ°ÁêÜÂàÜÁâá‰ø°ÊÅØ„ÄÅÂ§ÑÁêÜÂàõÂª∫ÂíåÂà†Èô§Á¥¢ÂºïÂ∫ìÁöÑËØ∑Ê±Ç</li></ul><p>dataËäÇÁÇπÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºü</p><ul><li>Êï∞ÊçÆÁöÑCRUD</li></ul><p>coordinatorËäÇÁÇπÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πàÔºü</p><ul><li><p>Ë∑ØÁî±ËØ∑Ê±ÇÂà∞ÂÖ∂ÂÆÉËäÇÁÇπ</p></li><li><p>ÂêàÂπ∂Êü•ËØ¢Âà∞ÁöÑÁªìÊûúÔºåËøîÂõûÁªôÁî®Êà∑</p></li></ul><h2 id="_4-3-ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®" tabindex="-1"><a class="header-anchor" href="#_4-3-ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®"><span>4.3.ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®</span></a></h2><p>ÂΩìÊñ∞Â¢ûÊñáÊ°£Êó∂ÔºåÂ∫îËØ•‰øùÂ≠òÂà∞‰∏çÂêåÂàÜÁâáÔºå‰øùËØÅÊï∞ÊçÆÂùáË°°ÔºåÈÇ£‰πàcoordinating nodeÂ¶Ç‰ΩïÁ°ÆÂÆöÊï∞ÊçÆËØ•Â≠òÂÇ®Âà∞Âì™‰∏™ÂàÜÁâáÂë¢Ôºü</p><h3 id="_4-3-1-ÂàÜÁâáÂ≠òÂÇ®ÊµãËØï" tabindex="-1"><a class="header-anchor" href="#_4-3-1-ÂàÜÁâáÂ≠òÂÇ®ÊµãËØï"><span>4.3.1.ÂàÜÁâáÂ≠òÂÇ®ÊµãËØï</span></a></h3><p>ÊèíÂÖ•‰∏âÊù°Êï∞ÊçÆÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225006058.png" alt="image-20210723225006058" tabindex="0" loading="lazy"><figcaption>image-20210723225006058</figcaption></figure><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225034637.png" alt="image-20210723225034637" tabindex="0" loading="lazy"><figcaption>image-20210723225034637</figcaption></figure><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225112029.png" alt="image-20210723225112029" tabindex="0" loading="lazy"><figcaption>image-20210723225112029</figcaption></figure><p>ÊµãËØïÂèØ‰ª•ÁúãÂà∞Ôºå‰∏âÊù°Êï∞ÊçÆÂàÜÂà´Âú®‰∏çÂêåÂàÜÁâáÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225227928.png" alt="image-20210723225227928" tabindex="0" loading="lazy"><figcaption>image-20210723225227928</figcaption></figure><p>ÁªìÊûúÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225342120.png" alt="image-20210723225342120" tabindex="0" loading="lazy"><figcaption>image-20210723225342120</figcaption></figure><h3 id="_4-3-2-ÂàÜÁâáÂ≠òÂÇ®ÂéüÁêÜ" tabindex="-1"><a class="header-anchor" href="#_4-3-2-ÂàÜÁâáÂ≠òÂÇ®ÂéüÁêÜ"><span>4.3.2.ÂàÜÁâáÂ≠òÂÇ®ÂéüÁêÜ</span></a></h3><p>elasticsearch‰ºöÈÄöËøáhashÁÆóÊ≥ïÊù•ËÆ°ÁÆóÊñáÊ°£Â∫îËØ•Â≠òÂÇ®Âà∞Âì™‰∏™ÂàÜÁâáÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723224354904.png" alt="image-20210723224354904" tabindex="0" loading="lazy"><figcaption>image-20210723224354904</figcaption></figure><p>ËØ¥ÊòéÔºö</p><ul><li>_routingÈªòËÆ§ÊòØÊñáÊ°£ÁöÑid</li><li>ÁÆóÊ≥ï‰∏éÂàÜÁâáÊï∞ÈáèÊúâÂÖ≥ÔºåÂõ†Ê≠§Á¥¢ÂºïÂ∫ì‰∏ÄÊó¶ÂàõÂª∫ÔºåÂàÜÁâáÊï∞Èáè‰∏çËÉΩ‰øÆÊîπÔºÅ</li></ul><p>Êñ∞Â¢ûÊñáÊ°£ÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225436084.png" alt="image-20210723225436084" tabindex="0" loading="lazy"><figcaption>image-20210723225436084</figcaption></figure><p>Ëß£ËØªÔºö</p><ul><li>1ÔºâÊñ∞Â¢û‰∏Ä‰∏™id=1ÁöÑÊñáÊ°£</li><li>2ÔºâÂØπidÂÅöhashËøêÁÆóÔºåÂÅáÂ¶ÇÂæóÂà∞ÁöÑÊòØ2ÔºåÂàôÂ∫îËØ•Â≠òÂÇ®Âà∞shard-2</li><li>3Ôºâshard-2ÁöÑ‰∏ªÂàÜÁâáÂú®node3ËäÇÁÇπÔºåÂ∞ÜÊï∞ÊçÆË∑ØÁî±Âà∞node3</li><li>4Ôºâ‰øùÂ≠òÊñáÊ°£</li><li>5ÔºâÂêåÊ≠•Áªôshard-2ÁöÑÂâØÊú¨replica-2ÔºåÂú®node2ËäÇÁÇπ</li><li>6ÔºâËøîÂõûÁªìÊûúÁªôcoordinating-nodeËäÇÁÇπ</li></ul><h2 id="_4-4-ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÊü•ËØ¢" tabindex="-1"><a class="header-anchor" href="#_4-4-ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÊü•ËØ¢"><span>4.4.ÈõÜÁæ§ÂàÜÂ∏ÉÂºèÊü•ËØ¢</span></a></h2><p>elasticsearchÁöÑÊü•ËØ¢ÂàÜÊàê‰∏§‰∏™Èò∂ÊÆµÔºö</p><ul><li><p>scatter phaseÔºöÂàÜÊï£Èò∂ÊÆµÔºåcoordinating node‰ºöÊääËØ∑Ê±ÇÂàÜÂèëÂà∞ÊØè‰∏Ä‰∏™ÂàÜÁâá</p></li><li><p>gather phaseÔºöËÅöÈõÜÈò∂ÊÆµÔºåcoordinating nodeÊ±áÊÄªdata nodeÁöÑÊêúÁ¥¢ÁªìÊûúÔºåÂπ∂Â§ÑÁêÜ‰∏∫ÊúÄÁªàÁªìÊûúÈõÜËøîÂõûÁªôÁî®Êà∑</p></li></ul><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225809848.png" alt="image-20210723225809848" tabindex="0" loading="lazy"><figcaption>image-20210723225809848</figcaption></figure><h2 id="_4-5-ÈõÜÁæ§ÊïÖÈöúËΩ¨Áßª" tabindex="-1"><a class="header-anchor" href="#_4-5-ÈõÜÁæ§ÊïÖÈöúËΩ¨Áßª"><span>4.5.ÈõÜÁæ§ÊïÖÈöúËΩ¨Áßª</span></a></h2><p>ÈõÜÁæ§ÁöÑmasterËäÇÁÇπ‰ºöÁõëÊéßÈõÜÁæ§‰∏≠ÁöÑËäÇÁÇπÁä∂ÊÄÅÔºåÂ¶ÇÊûúÂèëÁé∞ÊúâËäÇÁÇπÂÆïÊú∫Ôºå‰ºöÁ´ãÂç≥Â∞ÜÂÆïÊú∫ËäÇÁÇπÁöÑÂàÜÁâáÊï∞ÊçÆËøÅÁßªÂà∞ÂÖ∂ÂÆÉËäÇÁÇπÔºåÁ°Æ‰øùÊï∞ÊçÆÂÆâÂÖ®ÔºåËøô‰∏™Âè´ÂÅöÊïÖÈöúËΩ¨Áßª„ÄÇ</p><p>1Ôºâ‰æãÂ¶Ç‰∏Ä‰∏™ÈõÜÁæ§ÁªìÊûÑÂ¶ÇÂõæÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723225945963.png" alt="image-20210723225945963" tabindex="0" loading="lazy"><figcaption>image-20210723225945963</figcaption></figure><p>Áé∞Âú®Ôºånode1ÊòØ‰∏ªËäÇÁÇπÔºåÂÖ∂ÂÆÉ‰∏§‰∏™ËäÇÁÇπÊòØ‰ªéËäÇÁÇπ„ÄÇ</p><p>2ÔºâÁ™ÅÁÑ∂Ôºånode1ÂèëÁîü‰∫ÜÊïÖÈöúÔºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723230020574.png" alt="image-20210723230020574" tabindex="0" loading="lazy"><figcaption>image-20210723230020574</figcaption></figure><p>ÂÆïÊú∫ÂêéÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÔºåÈúÄË¶ÅÈáçÊñ∞ÈÄâ‰∏ªÔºå‰æãÂ¶ÇÈÄâ‰∏≠‰∫Ünode2Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723230055974.png" alt="image-20210723230055974" tabindex="0" loading="lazy"><figcaption>image-20210723230055974</figcaption></figure><p>node2Êàê‰∏∫‰∏ªËäÇÁÇπÂêéÔºå‰ºöÊ£ÄÊµãÈõÜÁæ§ÁõëÊéßÁä∂ÊÄÅÔºåÂèëÁé∞Ôºöshard-1„ÄÅshard-0Ê≤°ÊúâÂâØÊú¨ËäÇÁÇπ„ÄÇÂõ†Ê≠§ÈúÄË¶ÅÂ∞Ünode1‰∏äÁöÑÊï∞ÊçÆËøÅÁßªÂà∞node2„ÄÅnode3Ôºö</p><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/SpringCloud/elasticsearch/image-20210723230216642.png" alt="image-20210723230216642" tabindex="0" loading="lazy"><figcaption>image-20210723230216642</figcaption></figure></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/skxndbzu/JackChenBlogs/edit/main/src/posts/Êï∞ÊçÆÂ∫ì/elasticsearch.md" aria-label="Âú® GitHub ‰∏äÁºñËæëÊ≠§È°µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Âú® GitHub ‰∏äÁºñËæëÊ≠§È°µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">‰∏äÊ¨°ÁºñËæë‰∫é: </span><!----></div><div class="contributors"><span class="vp-meta-label">Ë¥°ÁåÆËÄÖ: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 615880048@qq.com">ÈôàÈì≠Èπ§</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a class="route-link auto-link next" href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" aria-label="MySQL"><div class="hint">‰∏ã‰∏ÄÈ°µ<span class="arrow end"></span></div><div class="link">MySQL<span class="font-icon icon iconfont icon-pen-to-square" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">ÂçÉÈáå‰πãË°å Âßã‰∫éË∂≥‰∏ã</div><div class="vp-copyright">Copyright ¬© 2024 Jack-Chen </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DIfhtWs6.js" defer></script>
  </body>
</html>
