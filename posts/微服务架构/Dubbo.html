<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.50" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/posts/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/Dubbo.html"><meta property="og:site_name" content="麻花的小站"><meta property="og:title" content="Dubbo"><meta property="og:description" content="Dubbo 分布式简要说明 Dubbo是用于分布式系统的框架所以我们要先了解什么是分布式 分布式系统是若干独立 计算机的集合，这些计算机对于用户来说就像单个相关系统。 老式系统(单一应用架构)就是把一个系统，统一放到一个服务器当中然后每一个服务器上放一个系统，如果说要更新代码的话，每一个服务器上的系统都要重新去部署十分的麻烦。 而分布式系统就是将一个完..."><meta property="og:type" content="article"><meta property="og:image" content="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610124652869.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-10-23T09:26:56.000Z"><meta property="article:author" content="Jack-Chen"><meta property="article:tag" content="负载均衡"><meta property="article:tag" content="服务发现"><meta property="article:published_time" content="2023-01-06T00:00:00.000Z"><meta property="article:modified_time" content="2024-10-23T09:26:56.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Dubbo","image":["https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610124652869.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613161517225.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610151507780.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610151528657.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180812112.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610152020688.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70-1699019322741-1.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70-1699019322741-2.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610170317960.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70-1699019322741-3.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610173149263.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610173356318.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610173644649.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612083918324.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610175513207.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610175909584.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610180201513.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610180358177.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610195718980.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610200218369.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610202411878.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200611154037439.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200611161058593.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200611161736122.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/2020061208334559.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612083732691.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612084630745.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612085158389.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612085805476.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612085845218.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612152443622.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612143106487.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612143122487.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612152343133.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612160853853.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612163440781.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612163456305.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612163603598.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180908789.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180928170.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180951468.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612181007825.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613170846919.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171108394.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171138127.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171217369.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171327533.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171545504.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171614614.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171741579.png","https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171806762.png"],"datePublished":"2023-01-06T00:00:00.000Z","dateModified":"2024-10-23T09:26:56.000Z","author":[{"@type":"Person","name":"Jack-Chen","url":"https://chemnminghe.top"}]}</script><title>Dubbo | 麻花的小站</title><meta name="description" content="Dubbo 分布式简要说明 Dubbo是用于分布式系统的框架所以我们要先了解什么是分布式 分布式系统是若干独立 计算机的集合，这些计算机对于用户来说就像单个相关系统。 老式系统(单一应用架构)就是把一个系统，统一放到一个服务器当中然后每一个服务器上放一个系统，如果说要更新代码的话，每一个服务器上的系统都要重新去部署十分的麻烦。 而分布式系统就是将一个完...">
    <link rel="preload" href="/assets/style-Tnuk6l9P.css" as="style"><link rel="stylesheet" href="/assets/style-Tnuk6l9P.css">
    <link rel="modulepreload" href="/assets/app-Pz-t-dus.js"><link rel="modulepreload" href="/assets/Dubbo.html-0SAzCtNS.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-PK-09Xw5.js" as="script"><link rel="prefetch" href="/assets/intro.html-C8q-8jNU.js" as="script"><link rel="prefetch" href="/assets/index.html-N-eXL4nl.js" as="script"><link rel="prefetch" href="/assets/index.html-CTPhZyCz.js" as="script"><link rel="prefetch" href="/assets/北京中科软.html-wDJull8K.js" as="script"><link rel="prefetch" href="/assets/北京鑫万家科技.html-DpiZ0zIQ.js" as="script"><link rel="prefetch" href="/assets/南京中科软.html-BBu-pHEL.js" as="script"><link rel="prefetch" href="/assets/博彦科技.html-CY_Gas9V.js" as="script"><link rel="prefetch" href="/assets/天津函数视界.html-CG628V4R.js" as="script"><link rel="prefetch" href="/assets/安硕信息(东北部).html-BhDb4EpW.js" as="script"><link rel="prefetch" href="/assets/安硕信息(南方部).html-D4Wr18S9.js" as="script"><link rel="prefetch" href="/assets/梦响科技.html-DsKXCS1L.js" as="script"><link rel="prefetch" href="/assets/甘肃中工国际.html-Csz4Rm_f.js" as="script"><link rel="prefetch" href="/assets/index.html-Btea6s-Y.js" as="script"><link rel="prefetch" href="/assets/index.html-C_d7_9nu.js" as="script"><link rel="prefetch" href="/assets/disable.html-MO10cuyo.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-CsYA21ha.js" as="script"><link rel="prefetch" href="/assets/layout.html-UPZ56fOz.js" as="script"><link rel="prefetch" href="/assets/markdown.html-CRFfXtSo.js" as="script"><link rel="prefetch" href="/assets/page.html-D366aon3.js" as="script"><link rel="prefetch" href="/assets/我的大学生涯.html-PsG8sExs.js" as="script"><link rel="prefetch" href="/assets/我的实习生涯.html-0yZ8Sy3t.js" as="script"><link rel="prefetch" href="/assets/我的工作生涯(未完结).html-B8R-qVwY.js" as="script"><link rel="prefetch" href="/assets/JUC.html-2RxuejZZ.js" as="script"><link rel="prefetch" href="/assets/JVM.html-CtYZdpOE.js" as="script"><link rel="prefetch" href="/assets/JavaSE.html-C3GQ11my.js" as="script"><link rel="prefetch" href="/assets/JavaWeb.html-BydSG0zT.js" as="script"><link rel="prefetch" href="/assets/vue.html-ByUXYpFB.js" as="script"><link rel="prefetch" href="/assets/Spring.html-C6vR0J7q.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-xsfAYSjp.js" as="script"><link rel="prefetch" href="/assets/SpringMVC.html-x_kPQ5vc.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-DqsgNoWz.js" as="script"><link rel="prefetch" href="/assets/Docker.html-CIZde1o-.js" as="script"><link rel="prefetch" href="/assets/Git.html-2jAFddv3.js" as="script"><link rel="prefetch" href="/assets/Gradle.html-YoSKgYvy.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-DF3lBJv7.js" as="script"><link rel="prefetch" href="/assets/maven.html-DJJVb4sb.js" as="script"><link rel="prefetch" href="/assets/2.html-BrkBXs0N.js" as="script"><link rel="prefetch" href="/assets/zookeeper.html-6mATc7_a.js" as="script"><link rel="prefetch" href="/assets/2.html-DCqzlz5W.js" as="script"><link rel="prefetch" href="/assets/3.html-zPPO3FMe.js" as="script"><link rel="prefetch" href="/assets/项目介绍.html-BHDyykGz.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-9CfT3aON.js" as="script"><link rel="prefetch" href="/assets/elasticsearch.html-CNtyQFZD.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-BBRjwA0-.js" as="script"><link rel="prefetch" href="/assets/RocketMQ.html-CaACSvZq.js" as="script"><link rel="prefetch" href="/assets/1.html--01U1AxF.js" as="script"><link rel="prefetch" href="/assets/2.html-C2ZXXv2b.js" as="script"><link rel="prefetch" href="/assets/3.html-HBv3BM32.js" as="script"><link rel="prefetch" href="/assets/Linux.html-Ca5xArE3.js" as="script"><link rel="prefetch" href="/assets/操作系统.html-BY54XvRE.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-CBYELmWK.js" as="script"><link rel="prefetch" href="/assets/1.html-SvHzF-kG.js" as="script"><link rel="prefetch" href="/assets/2.html-DhjVJ3-d.js" as="script"><link rel="prefetch" href="/assets/3.html-zGI_zzcW.js" as="script"><link rel="prefetch" href="/assets/1.html-DPCRQHzF.js" as="script"><link rel="prefetch" href="/assets/2.html-BsdZGdnc.js" as="script"><link rel="prefetch" href="/assets/3.html-CDZwo0q8.js" as="script"><link rel="prefetch" href="/assets/1.html-BOqy1FaN.js" as="script"><link rel="prefetch" href="/assets/2.html-DyjXUXQ4.js" as="script"><link rel="prefetch" href="/assets/3.html-DopfZOQA.js" as="script"><link rel="prefetch" href="/assets/原理篇.html-B01yCLxb.js" as="script"><link rel="prefetch" href="/assets/基础篇.html-g0I9yxu_.js" as="script"><link rel="prefetch" href="/assets/实战篇.html-D8YEckaR.js" as="script"><link rel="prefetch" href="/assets/高级篇.html-CeQD3Ar4.js" as="script"><link rel="prefetch" href="/assets/404.html-CYm060Qq.js" as="script"><link rel="prefetch" href="/assets/index.html-D8TCU6JE.js" as="script"><link rel="prefetch" href="/assets/index.html-BwhEc7_Z.js" as="script"><link rel="prefetch" href="/assets/index.html-sI_TZzX7.js" as="script"><link rel="prefetch" href="/assets/index.html-CpL8_Pq2.js" as="script"><link rel="prefetch" href="/assets/index.html-CKFkKWlt.js" as="script"><link rel="prefetch" href="/assets/index.html-rfu2hqWU.js" as="script"><link rel="prefetch" href="/assets/index.html-DnSA22Sv.js" as="script"><link rel="prefetch" href="/assets/index.html-DnS9uChv.js" as="script"><link rel="prefetch" href="/assets/index.html-Cz4bFBOT.js" as="script"><link rel="prefetch" href="/assets/index.html-C_djIFu0.js" as="script"><link rel="prefetch" href="/assets/index.html-CqUE1WiI.js" as="script"><link rel="prefetch" href="/assets/index.html-C6u1uQMS.js" as="script"><link rel="prefetch" href="/assets/index.html-DgP3S4Wh.js" as="script"><link rel="prefetch" href="/assets/index.html-C5Hflvdq.js" as="script"><link rel="prefetch" href="/assets/index.html-DaTn0NR8.js" as="script"><link rel="prefetch" href="/assets/index.html-Cb3QSvTX.js" as="script"><link rel="prefetch" href="/assets/index.html-Crb_jjTx.js" as="script"><link rel="prefetch" href="/assets/index.html-O14qCV3i.js" as="script"><link rel="prefetch" href="/assets/index.html-CcBxxjP5.js" as="script"><link rel="prefetch" href="/assets/index.html-DCnKHT91.js" as="script"><link rel="prefetch" href="/assets/index.html-CZoKVjo1.js" as="script"><link rel="prefetch" href="/assets/index.html-CXMWtb7O.js" as="script"><link rel="prefetch" href="/assets/index.html-DPiSMfhV.js" as="script"><link rel="prefetch" href="/assets/index.html-BLGcaPVq.js" as="script"><link rel="prefetch" href="/assets/index.html-BN1ncyox.js" as="script"><link rel="prefetch" href="/assets/index.html-BeXJ1I5z.js" as="script"><link rel="prefetch" href="/assets/index.html-FizUe055.js" as="script"><link rel="prefetch" href="/assets/index.html-BJbs75qr.js" as="script"><link rel="prefetch" href="/assets/index.html-Di9rwYwa.js" as="script"><link rel="prefetch" href="/assets/index.html-J8FbTfp7.js" as="script"><link rel="prefetch" href="/assets/index.html-CV9-lWjw.js" as="script"><link rel="prefetch" href="/assets/index.html-C_79TuDt.js" as="script"><link rel="prefetch" href="/assets/index.html-TPZ5rVr_.js" as="script"><link rel="prefetch" href="/assets/index.html-CFE3KIef.js" as="script"><link rel="prefetch" href="/assets/index.html-CoIdRwM8.js" as="script"><link rel="prefetch" href="/assets/index.html-DdKgh2BY.js" as="script"><link rel="prefetch" href="/assets/index.html-CzDrQ9k6.js" as="script"><link rel="prefetch" href="/assets/index.html-qyksM-dc.js" as="script"><link rel="prefetch" href="/assets/index.html-DDF0fELj.js" as="script"><link rel="prefetch" href="/assets/index.html-i2GG9JIc.js" as="script"><link rel="prefetch" href="/assets/index.html-Bl-NQuPb.js" as="script"><link rel="prefetch" href="/assets/index.html-D8kagni3.js" as="script"><link rel="prefetch" href="/assets/index.html-DQbhRGx0.js" as="script"><link rel="prefetch" href="/assets/index.html-Dx0dKKte.js" as="script"><link rel="prefetch" href="/assets/index.html-B7p7RQ06.js" as="script"><link rel="prefetch" href="/assets/index.html-iRjAqGrO.js" as="script"><link rel="prefetch" href="/assets/index.html-G5dLnvKB.js" as="script"><link rel="prefetch" href="/assets/index.html-C57dqCAe.js" as="script"><link rel="prefetch" href="/assets/index.html-BpuE9Y2l.js" as="script"><link rel="prefetch" href="/assets/index.html-Di7s592M.js" as="script"><link rel="prefetch" href="/assets/index.html-DJT2hrK3.js" as="script"><link rel="prefetch" href="/assets/index.html-CFNLZxf4.js" as="script"><link rel="prefetch" href="/assets/index.html-cvRZlUwQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Ddr3Y0jY.js" as="script"><link rel="prefetch" href="/assets/index.html-CrCAE1Ha.js" as="script"><link rel="prefetch" href="/assets/index.html-DAZBalOb.js" as="script"><link rel="prefetch" href="/assets/index.html-CRtFMY0h.js" as="script"><link rel="prefetch" href="/assets/index.html-DINglPXA.js" as="script"><link rel="prefetch" href="/assets/index.html-BkNGt8Y0.js" as="script"><link rel="prefetch" href="/assets/index.html-Bepephi_.js" as="script"><link rel="prefetch" href="/assets/index.html-Cb6IqBeu.js" as="script"><link rel="prefetch" href="/assets/index.html-CVY212y6.js" as="script"><link rel="prefetch" href="/assets/index.html-DaR7RRPX.js" as="script"><link rel="prefetch" href="/assets/index.html-BEFLn42J.js" as="script"><link rel="prefetch" href="/assets/index.html-CO-1m9Eh.js" as="script"><link rel="prefetch" href="/assets/index.html-D6UWzhY5.js" as="script"><link rel="prefetch" href="/assets/index.html-7LXPUCH_.js" as="script"><link rel="prefetch" href="/assets/index.html-5U7tT_aI.js" as="script"><link rel="prefetch" href="/assets/index.html-u8fIKpPg.js" as="script"><link rel="prefetch" href="/assets/index.html-CpbF95Rm.js" as="script"><link rel="prefetch" href="/assets/index.html-D6XBKJDw.js" as="script"><link rel="prefetch" href="/assets/index.html-CGvjWseT.js" as="script"><link rel="prefetch" href="/assets/index.html-BqTJ6Ob0.js" as="script"><link rel="prefetch" href="/assets/index.html-DysjCydG.js" as="script"><link rel="prefetch" href="/assets/index.html-w-WA9AoQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DaSpKbhn.js" as="script"><link rel="prefetch" href="/assets/index.html-DYn_nyHy.js" as="script"><link rel="prefetch" href="/assets/index.html-BKv_lAHZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BBn2ROpV.js" as="script"><link rel="prefetch" href="/assets/index.html-KOfXJhV5.js" as="script"><link rel="prefetch" href="/assets/index.html-DlUqAXi8.js" as="script"><link rel="prefetch" href="/assets/index.html-DGavVzWR.js" as="script"><link rel="prefetch" href="/assets/index.html-5GYQYOGP.js" as="script"><link rel="prefetch" href="/assets/index.html-DdrA5Iod.js" as="script"><link rel="prefetch" href="/assets/index.html-D06d3u7e.js" as="script"><link rel="prefetch" href="/assets/index.html-CIE7p_vB.js" as="script"><link rel="prefetch" href="/assets/index.html-DQW0GODo.js" as="script"><link rel="prefetch" href="/assets/index.html-Co9cRdsn.js" as="script"><link rel="prefetch" href="/assets/index.html-CY-0RaqQ.js" as="script"><link rel="prefetch" href="/assets/index.html-BIhRozwi.js" as="script"><link rel="prefetch" href="/assets/index.html-oqwab_3N.js" as="script"><link rel="prefetch" href="/assets/index.html-DhjMvSSC.js" as="script"><link rel="prefetch" href="/assets/index.html-C9uFwfYY.js" as="script"><link rel="prefetch" href="/assets/index.html-s3YW3iOJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BAZ3WCMN.js" as="script"><link rel="prefetch" href="/assets/index.html-B7qy6WXM.js" as="script"><link rel="prefetch" href="/assets/index.html-BAZEOlDp.js" as="script"><link rel="prefetch" href="/assets/index.html-Deh4klsT.js" as="script"><link rel="prefetch" href="/assets/index.html-DUM6cK_Q.js" as="script"><link rel="prefetch" href="/assets/index.html-BzCwGaTS.js" as="script"><link rel="prefetch" href="/assets/index.html-DIY-hU0G.js" as="script"><link rel="prefetch" href="/assets/index.html-cv0P58kH.js" as="script"><link rel="prefetch" href="/assets/index.html-Ozl34OWU.js" as="script"><link rel="prefetch" href="/assets/index.html-g6BXgjOf.js" as="script"><link rel="prefetch" href="/assets/index.html-Dbz9NDwU.js" as="script"><link rel="prefetch" href="/assets/index.html-C1RVDo7u.js" as="script"><link rel="prefetch" href="/assets/index.html-Cc2bqaTI.js" as="script"><link rel="prefetch" href="/assets/index.html-B9lrJxVf.js" as="script"><link rel="prefetch" href="/assets/index.html-DQ8A7OAP.js" as="script"><link rel="prefetch" href="/assets/index.html-CqfuOevq.js" as="script"><link rel="prefetch" href="/assets/index.html-CVnMJQ5o.js" as="script"><link rel="prefetch" href="/assets/index.html-B5gbyc6H.js" as="script"><link rel="prefetch" href="/assets/index.html-DAQcjL4K.js" as="script"><link rel="prefetch" href="/assets/index.html-DnKWTRTC.js" as="script"><link rel="prefetch" href="/assets/index.html-BU75JZrV.js" as="script"><link rel="prefetch" href="/assets/index.html-BgQE85Fc.js" as="script"><link rel="prefetch" href="/assets/index.html-CE2kNUme.js" as="script"><link rel="prefetch" href="/assets/index.html-BcN8v1mW.js" as="script"><link rel="prefetch" href="/assets/index.html-BeoB5X2l.js" as="script"><link rel="prefetch" href="/assets/index.html-Ba6nRIXm.js" as="script"><link rel="prefetch" href="/assets/index.html-BA2DB0R6.js" as="script"><link rel="prefetch" href="/assets/index.html-DQukeo6g.js" as="script"><link rel="prefetch" href="/assets/index.html-C8EzOZi1.js" as="script"><link rel="prefetch" href="/assets/index.html-c_y8MFel.js" as="script"><link rel="prefetch" href="/assets/index.html-x644TFbf.js" as="script"><link rel="prefetch" href="/assets/index.html-mfNkDVBy.js" as="script"><link rel="prefetch" href="/assets/index.html-BeXRIlCs.js" as="script"><link rel="prefetch" href="/assets/index.html-tiWtoDZG.js" as="script"><link rel="prefetch" href="/assets/index.html-C6IJHaGI.js" as="script"><link rel="prefetch" href="/assets/index.html-DvHK4omx.js" as="script"><link rel="prefetch" href="/assets/index.html-D2662G68.js" as="script"><link rel="prefetch" href="/assets/index.html-BnCVSIrj.js" as="script"><link rel="prefetch" href="/assets/index.html-pvma7uPP.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/touxiang/vue-color-avatar3.png" alt><!----><span class="vp-site-name hide-in-pad">麻花的小站</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="首页"><!--[--><span class="font-icon icon iconfont icon-shouye" style=""></span><!--]-->首页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/posts/" aria-label="学习笔记"><!--[--><span class="font-icon icon iconfont icon-xuexibiji" style=""></span><!--]-->学习笔记<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/interviewExperience/" aria-label="面试专栏"><!--[--><span class="font-icon icon iconfont icon-flow-interview" style=""></span><!--]-->面试专栏<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/softwareTutorial/" aria-label="软件教程"><!--[--><span class="font-icon icon iconfont icon-ruanjianjiaocheng1" style=""></span><!--]-->软件教程<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/aboutMe/" aria-label="关于我"><!--[--><span class="font-icon icon iconfont icon-guanyuzuozhe" style=""></span><!--]-->关于我<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/skxndbzu/JackChenBlogs" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="首页"><!--[--><span class="font-icon icon iconfont icon-shouye" style=""></span><!--]-->首页<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-meiribikan" style=""></span><span class="vp-sidebar-title">必看</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-zhenrenmianshi" style=""></span><span class="vp-sidebar-title">面试专栏</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-application--web" style=""></span><span class="vp-sidebar-title">计算机基础</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-xitongsheji" style=""></span><span class="vp-sidebar-title">系统设计</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-jurassic_data" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="数据库"><!---->数据库<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-kaifagongju" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/developmentTool/" aria-label="开发工具"><!---->开发工具<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-yemiankuangjia_o" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="常用框架"><!---->常用框架<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon iconfont icon-yemiankuangjia_o" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="微服务架构"><!---->微服务架构<!----></a><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/posts/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/Dubbo.html" aria-label="Dubbo"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->Dubbo<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/zookeeper.html" aria-label="zookeeper"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->zookeeper<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/2.html" aria-label="香蕉 2"><!--[--><span class="font-icon icon iconfont icon-pen-to-square" style=""></span><!--]-->香蕉 2<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-qianduan" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="前端"><!---->前端<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-qianduan" style=""></span><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/demo/" aria-label="消息中间件"><!---->消息中间件<!----></a><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="介绍页"><!--[--><span class="font-icon icon iconfont icon-fenxiangdingqijieshao" style=""></span><!--]-->介绍页<!----></a></li><li><a class="auto-link external-link vp-sidebar-link" href="https://plugin-md-enhance.vuejs.press/zh/guide/content/revealjs/demo.html" aria-label="幻灯片" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-huandengpian-04" style=""></span><!--]-->幻灯片<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>Dubbo</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://chemnminghe.top" target="_blank" rel="noopener noreferrer">Jack-Chen</a></span><span property="author" content="Jack-Chen"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-01-06T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 28 分钟</span><meta property="timeRequired" content="PT28M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">注册中心</span><!--]--><meta property="articleSection" content="注册中心"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">负载均衡</span><span class="page-tag-item color1 clickable" role="navigation">服务发现</span><!--]--><meta property="keywords" content="负载均衡,服务发现"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分布式简要说明">分布式简要说明</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo核心概念">Dubbo核心概念</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo特性一览">Dubbo特性一览</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo的特性">Dubbo的特性</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo环境搭建-zookeeper注册中心">dubbo环境搭建 ZooKeeper注册中心</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo环境搭建-创建提供者、消费者项目">Dubbo环境搭建，创建提供者、消费者项目</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo-monitor-simple简易监控中心">dubbo-monitor-simple简易监控中心</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo与springboot整合">Dubbo与SpringBoot整合</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo配置">Dubbo配置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#高可用">高可用</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#整合hystrix-服务熔断与降级处理">整合hystrix，服务熔断与降级处理</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo原理">dubbo原理</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#netty通信原理">netty通信原理</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#dubbo原理-1">dubbo原理</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="dubbo" tabindex="-1"><a class="header-anchor" href="#dubbo"><span>Dubbo</span></a></h1><h3 id="分布式简要说明" tabindex="-1"><a class="header-anchor" href="#分布式简要说明"><span>分布式简要说明</span></a></h3><p><strong>Dubbo是用于分布式系统的框架所以我们要先了解什么是分布式</strong> 分布式系统是若干独立 计算机的集合，这些计算机对于用户来说就像单个相关系统。</p><p>老式系统(单一应用架构)就是把一个系统，统一放到一个服务器当中然后每一个服务器上放一个系统，如果说要更新代码的话，每一个服务器上的系统都要重新去部署十分的麻烦。</p><p>而分布式系统就是将一个完整的系统拆分成多个不同的服务，然后在将每一个服务单独的放到一个服务器当中。(三个臭皮匠赛过诸葛亮)</p><h4 id="应用架构及发展演变" tabindex="-1"><a class="header-anchor" href="#应用架构及发展演变"><span>应用架构及发展演变</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610124652869.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h4 id="dubbo和springcloud对比" tabindex="-1"><a class="header-anchor" href="#dubbo和springcloud对比"><span>Dubbo和SpringCloud对比</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613161517225.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h4 id="发展演变" tabindex="-1"><a class="header-anchor" href="#发展演变"><span>发展演变</span></a></h4><p><strong>ORM</strong><strong>单一应用架构</strong>：一个项目装到一个服务器当中，也可以运行多个服务器每一个服务器当中都装一个项目。 缺点：1.如果要添加某一个功能的话就要把一个项目重新打包，在分别部署到每一个服务器当中去。2.如果后期项目越来越大的话单台服务器跑一个项目压力会很大的。会不利于维护，开发和程序的性能。 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610151507780.png" alt="img" loading="lazy"><strong>MVC</strong><strong>垂直应用架构</strong>：将应用切割成几个互不相干的小应用，在将每个小应用独立放到一个服务器上，如果哪一个应用的访问数量多就多加几台服务器。 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610151528657.png" alt="在这里插入图片描述" loading="lazy"><strong>分布式服务架构</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180812112.png" alt="在这里插入图片描述" loading="lazy"></p><h4 id="rpc简介" tabindex="-1"><a class="header-anchor" href="#rpc简介"><span>RPC简介</span></a></h4><p><strong>分布式应用架构(远程过程调用)</strong>：当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610152020688.png" alt="在这里插入图片描述" loading="lazy"><strong>什么叫RPC</strong></p><ol><li><strong>RPC [ Remote Procedure Call]*<em>是指*<em>远程过程调用</em></em>，是一种进程问通信方式，他是一种</strong>技术的思想**，而不是规范。它允许程序调用另一个地址空间(通常是共享网络的另一台机器上)的过程或函数，而不用程序员显式编码这个远程调用的细节。即程序员无论是调用本地的还是远程的函数，本质上编写的调用代码基本相同。</li><li><strong>RPC（Remote Procedure Call）—远程过程调用</strong>，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。也就是说两台服务器A，B，一个应用部署在A服务器上，想要调用B服务器上应用提供的方法，由于不在一个内存空间，不能直接调用，需要通过网络来表达调用的语义和传达调用的数据。</li></ol><p><strong>RPC工作原理</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70.png" alt="在这里插入图片描述" loading="lazy"></p><ol><li>Client像调用本地服务似的调用远程服务；</li><li>Client stub接收到调用后，将方法、参数序列化</li><li>客户端通过sockets将消息发送到服务端</li><li>Server stub 收到消息后进行解码（将消息对象反序列化）</li><li>Server stub 根据解码结果调用本地的服务</li><li>本地服务执行(对于服务端来说是本地执行)并将结果返回给Server stub</li><li>Server stub将返回结果打包成消息（将结果消息对象序列化）</li><li>服务端通过sockets将消息发送到客户端</li><li>Client stub接收到结果消息，并进行解码（将结果消息发序列化）</li><li>客户端得到最终结果。</li></ol><p><strong>RPC 调用分以下两种：</strong><strong>同步调用</strong>：客户方等待调用执行完成并返回结果。 <strong>异步调用</strong>：客户方调用后不用等待执行结果返回，但依然可以通过回调通知等方式获取返回结果。若客户方不关心调用返回结果，则变成单向异步调用，单向调用不用返回结果。</p><p><strong>RPC步骤解析</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70-1699019322741-1.png" alt="在这里插入图片描述" loading="lazy"> RPC相关资料可访问博客： http://blog.csdn.net/smartbetter/article/details/100360835</p><p><strong>SOA</strong><strong>流动计算架构</strong>：在分布式应用架构的基础上增加了一个<strong>调度、治理中心</strong>基于访问压力实时管理集群容量、提高集群的利用率，用于提高机器利用率的 资源调度和治理中心(SOA) 是关键 <strong>(不浪费计算机资源)</strong></p><h3 id="dubbo核心概念" tabindex="-1"><a class="header-anchor" href="#dubbo核心概念"><span>Dubbo核心概念</span></a></h3><p>Dubbo官网: http://dubbo.apache.org/en-us/index.html</p><p>Dubbo 是一款高性能、轻量级的开源Java RPC框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，服务自动注册和发现。分布式系统是将一个系统拆分为多个不同的服务</p><h3 id="dubbo特性一览" tabindex="-1"><a class="header-anchor" href="#dubbo特性一览"><span>Dubbo特性一览</span></a></h3><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70-1699019322741-2.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h4 id="dubbo设计架构" tabindex="-1"><a class="header-anchor" href="#dubbo设计架构"><span>dubbo设计架构</span></a></h4><p><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610170317960.png" alt="在这里插入图片描述" loading="lazy"> 该图来自Dubbo官网，描述了服务注册中心、服务提供方、服务消费方、服务监控中心之间的调用关系。</p><p><strong>服务提供者（Provider）</strong>：暴露服务的服务提供方，服务提供者在启动时，向注册中心注册自己提供的服务。 <strong>服务消费者（Consumer）</strong>: 调用远程服务的服务消费方，服务消费者在启动时，向注册中心订阅自己所需的服务，服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。 <strong>注册中心（Registry）</strong>：注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。 <strong>监控中心（Monitor）</strong>：服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。</p><h3 id="dubbo的特性" tabindex="-1"><a class="header-anchor" href="#dubbo的特性"><span>Dubbo的特性</span></a></h3><p><strong>（1）服务注册中心</strong></p><ul><li>相比Hessian类RPC框架，Dubbo有自己的服务中心， 写好的服务可以注册到服务中心， 客户端从服务中心寻找服务，然后再到相应的服务提供者机器获取服务。通过服务中心可以实现集群、负载均衡、高可用(容错) 等重要功能。</li><li>服务中心一般使用zookeeper实现，也有redis和其他一些方式。以使用zookeeper作为服务中心为例，服务提供者启动后会在zookeeper的/dubbo节点下创建提供的服务节点，包含服务提供者ip、port等信息。服务提供者关闭时会从zookeeper中移除对应的服务。</li><li>服务使用者会从注册中心zookeeper中寻找服务，同一个服务可能会有多个提供者，Dubbo会帮我们找到合适的服务提供者，也就是针对服务提供者的负载均衡。</li></ul><p><strong>（2）负载均衡</strong></p><ul><li>当同一个服务有多个提供者在提供服务时，客户端如何正确的选择提供者实 现负载均衡呢？dubbo也给我们提供了几种方案： <ul><li>random <code>随机</code>选提供者，并可以给提供者设置权重</li><li>roundrobin <code>轮询</code>选择提供者</li><li>leastactive 最少活跃调用数，相同活跃数的随机，活跃数：指调用前后计数差。使慢的提供者收到更少请求，因为越慢的提供者的调用前后计数差会越大。</li><li>consistenthash 一致性hash，相同参数的请求发到同一台机器上。</li></ul></li></ul><p><strong>（3）简化测试，允许直连提供者</strong> 在开发阶段为了方便测试，通常系统客户端能指定调用某个服务提供者，那么可以在引用服务时加一个url参数去指定服务提供者。 配置如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span> &lt;dubbo:reference id=&quot;xxxService&quot;interface=&quot;com.alibaba.xxx.XxxService&quot;url=&quot;dubbo://localhost:20890&quot;/&gt;</span></span>
<span class="line"><span>1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>（4）服务版本，服务分组</strong> 在Dubbo配置文件中可以通过制定版本实现连接制定提供者，也就是通过服务版本可以控制服务的不兼容升级；当同一个服务有多种实现时，可以使用服务分组进行区分。</p><h3 id="dubbo环境搭建-zookeeper注册中心" tabindex="-1"><a class="header-anchor" href="#dubbo环境搭建-zookeeper注册中心"><span>dubbo环境搭建 <a href="https://so.csdn.net/so/search?q=ZooKeeper&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">ZooKeeper</a>注册中心</span></a></h3><h4 id="搭建zookeeper注册中心环境" tabindex="-1"><a class="header-anchor" href="#搭建zookeeper注册中心环境"><span>搭建zookeeper注册中心环境</span></a></h4><p>Dubbo官方文档: http://dubbo.apache.org/en-us/docs/user/quick-start.html 在zookeeper官网下载zookeeper http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.14/ <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/watermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTU3NTg4%2Csize_16%2Ccolor_FFFFFF%2Ct_70-1699019322741-3.png" alt="在这里插入图片描述" loading="lazy"> 在bin文件下，启动zkServer.cmd会有报错，处理需要在condif文件中将zoo_sample.cfg文件复制一份，将名字改为zoo.cfg。 <code>在zookeeper的文件夹下创建data文件夹，打开zoo.cfg，修改datadir，将dataDir数据保存为我们自定义的文件中</code>(此步骤可省略) <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610173149263.png" alt="在这里插入图片描述" loading="lazy"> 配置完毕后，我们再次在conf下启动zkServer.cmd，这次可以成功启动 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610173356318.png" alt="在这里插入图片描述" loading="lazy"> 继续运行zkCli.cmd，可以连接到zookeeper的服务器。 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610173644649.png" alt="在这里插入图片描述" loading="lazy"><strong>此时，我们zookeeper的注册中心及环境以及搭建完毕。</strong></p><h4 id="zookeeper监控中心的配置" tabindex="-1"><a class="header-anchor" href="#zookeeper监控中心的配置"><span>zookeeper监控中心的配置</span></a></h4><p><strong>1、下载dubbo-admin</strong></p><p>dubbo-admin下载地址 ：https://github.com/apache/dubbo-admin/tree/master <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612083918324.png" alt="在这里插入图片描述" loading="lazy"><strong>2、解压后进入目录修改指定zookeeper地址</strong> 进入如下地址：dubbo-admin-master\dubbo-admin\src\main\resources\application.properties&quot; 将zookeeper的监控中心的地址配置为本地端口</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>#注册中心的地址</span></span>
<span class="line"><span>dubbo.registry.address=zookeeper://127.0.0.1:2181</span></span>
<span class="line"><span>12</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610175513207.png" alt="在这里插入图片描述" loading="lazy"> 配置完毕后，我们在dubo-zookeeper\dubbo-admin-master\dubbo-admin文件夹下cmd打包测试下。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mvn clean package</span></span>
<span class="line"><span>1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>在target文件中打包完成的jar包 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610175909584.png" alt="在这里插入图片描述" loading="lazy"> cmd命令 <code>java -jar dubbo-admin-0.0.1-SNAPSHOT.jar</code>运行打包好的jar包 启动成功后，可以看到一个7001的端口 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610180201513.png" alt="在这里插入图片描述" loading="lazy"> 此时我们的zookeeper的服务都为启动状态，在浏览器中访问 localhost:7001，访问到注册中心，输入账号密码root。 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610180358177.png" alt="在这里插入图片描述" loading="lazy"> 此时，我们zookeeper监控中心的配置完成。注意，要访问到监控中心，一定要启动zookeeper注册中心的启动类</p><h3 id="dubbo环境搭建-创建提供者、消费者项目" tabindex="-1"><a class="header-anchor" href="#dubbo环境搭建-创建提供者、消费者项目"><span>Dubbo环境搭建，创建提供者、消费者项目</span></a></h3><p>基于以下图实现服务 提供者、消费者 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610195718980.png" alt="在这里插入图片描述" loading="lazy"></p><h4 id="dubbo服务提供消费者接口搭建" tabindex="-1"><a class="header-anchor" href="#dubbo服务提供消费者接口搭建"><span>Dubbo服务提供消费者接口搭建</span></a></h4><p><strong>创建Maven项目=&gt; <code>user-service-provider</code> 服务提供者</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610200218369.png" alt="在这里插入图片描述" loading="lazy"><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200610202411878.png" alt="在这里插入图片描述" loading="lazy"><strong>UserAddress</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>public class UserAddress implements Serializable{</span></span>
<span class="line"><span>    private Integer id;</span></span>
<span class="line"><span>    private String userAddress; //用户地址</span></span>
<span class="line"><span>    private String userId; //用户id</span></span>
<span class="line"><span>    private String consignee; //收货人</span></span>
<span class="line"><span>    private String phoneNum; //电话号码</span></span>
<span class="line"><span>    private String isDefault; //是否为默认地址    Y-是     N-否</span></span>
<span class="line"><span>    //get     set </span></span>
<span class="line"><span>    //有参构造  无参构造</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>12345678910</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>UserService</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>//用户服务</span></span>
<span class="line"><span>public interface UserService {</span></span>
<span class="line"><span>	/**</span></span>
<span class="line"><span>	 * 按照用户id返回所有的收货地址</span></span>
<span class="line"><span>	 * @param userId</span></span>
<span class="line"><span>	 * @return</span></span>
<span class="line"><span>	 */</span></span>
<span class="line"><span>	public List&lt;UserAddress&gt; getUserAddressList(String userId);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>123456789</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>UserServiceImpl</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>public class UserServiceImpl implements UserService {</span></span>
<span class="line"><span>	public List&lt;UserAddress&gt; getUserAddressList(String userId) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		UserAddress address1 = new UserAddress(1, &quot;河南省郑州巩义市宋陵大厦2F&quot;, &quot;1&quot;, &quot;安然&quot;, &quot;150360313x&quot;, &quot;Y&quot;);</span></span>
<span class="line"><span>		UserAddress address2 = new UserAddress(2, &quot;北京市昌平区沙河镇沙阳路&quot;, &quot;1&quot;, &quot;情话&quot;, &quot;1766666395x&quot;, &quot;N&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		return Arrays.asList(address1,address2);</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>123456789</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>创建Maven项目=&gt; <code>order-service-consumer</code> 服务消费者(订单服务)</strong></p><p><strong>OrderService</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>public interface OrderService {</span></span>
<span class="line"><span>    /**</span></span>
<span class="line"><span>     * 初始化订单</span></span>
<span class="line"><span>     * @param userID</span></span>
<span class="line"><span>     */</span></span>
<span class="line"><span>    public void initOrder(String userID);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>1234567</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>OrderServiceImpl</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>public class OrderServiceImpl implements OrderService {</span></span>
<span class="line"><span>    public void initOrder(String userID) {</span></span>
<span class="line"><span>        //查询用户的收货地址</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>因服务消费者要拿到提供者的方法</strong> 将 服务提供者 中的 实体类 及 UserService 复制到当前消费者同级文件中。</p><p><strong>OrderServiceImpl</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>public class OrderServiceImpl implements OrderService {</span></span>
<span class="line"><span>    public UserService userService;</span></span>
<span class="line"><span>    public void initOrder(String userID) {</span></span>
<span class="line"><span>        //查询用户的收货地址</span></span>
<span class="line"><span>        List&lt;UserAddress&gt; userAddressList = userService.getUserAddressList(userID);</span></span>
<span class="line"><span>        System.out.println(userAddressList);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>12345678</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时我们调用userservice肯定是要报错的。这种面向接口的方式，我们这里只是调到了接口，而接口实际是在另外一个项目中，如果我们两个项目工程都创建共同的实体类，太过于麻烦了，我们可以将服务接口，服务模型等单独放在一个项目中，更为方便调用。</p><p><strong>创建Maven项目=&gt; gmail-interface 用于存放共同的服务接口</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200611154037439.png" alt="在这里插入图片描述" loading="lazy"> 将 提供者 和 消费者 项目中的所有实体类复制到当前相关的文件包下，删除原有的实体类包及service包，也就是将实体类及service放在了当前公共的项目中。</p><p>把服务提供者和消费者项目中引入以下依赖，引入后项目不在报错.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>	&lt;dependency&gt;</span></span>
<span class="line"><span>		&lt;groupId&gt;com.lemon.gmail&lt;/groupId&gt;</span></span>
<span class="line"><span>		&lt;artifactId&gt;gmail-interface&lt;/artifactId&gt;</span></span>
<span class="line"><span>		&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span></span>
<span class="line"><span>	&lt;/dependency&gt;</span></span>
<span class="line"><span>12345</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="服务提供者配置及测试" tabindex="-1"><a class="header-anchor" href="#服务提供者配置及测试"><span>服务提供者配置及测试</span></a></h4><p>在 <code>user-service-provider</code> 服务提供者项目中引入依赖</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>	 &lt;!--dubbo--&gt;</span></span>
<span class="line"><span>    &lt;dependency&gt;</span></span>
<span class="line"><span>        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span></span>
<span class="line"><span>        &lt;artifactId&gt;dubbo&lt;/artifactId&gt;</span></span>
<span class="line"><span>        &lt;version&gt;2.6.2&lt;/version&gt;</span></span>
<span class="line"><span>    &lt;/dependency&gt;</span></span>
<span class="line"><span>    &lt;!--注册中心是 zookeeper，引入zookeeper客户端--&gt;</span></span>
<span class="line"><span>    &lt;dependency&gt;</span></span>
<span class="line"><span>        &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;</span></span>
<span class="line"><span>        &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;</span></span>
<span class="line"><span>        &lt;version&gt;2.12.0&lt;/version&gt;</span></span>
<span class="line"><span>    &lt;/dependency&gt;</span></span>
<span class="line"><span>123456789101112</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>resource</code>文件中创建<code>provider.xml</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span>&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span></span>
<span class="line"><span>       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span>       xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span>
<span class="line"><span>       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span>
<span class="line"><span>		http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd</span></span>
<span class="line"><span>		http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;&gt;</span></span>
<span class="line"><span>    &lt;!--1、指定当前服务/应用的名字(同样的服务名字相同，不要和别的服务同名)--&gt;</span></span>
<span class="line"><span>   &lt;dubbo:application name=&quot;user-service-provider&quot;&gt;&lt;/dubbo:application&gt;</span></span>
<span class="line"><span>    &lt;!--2、指定注册中心的位置--&gt;</span></span>
<span class="line"><span>    &lt;!--&lt;dubbo:registry address=&quot;zookeeper://127.0.0.1:2181&quot;&gt;&lt;/dubbo:registry&gt;--&gt;</span></span>
<span class="line"><span>    &lt;dubbo:registry protocol=&quot;zookeeper&quot; address=&quot;127.0.0.1:2181&quot;&gt;&lt;/dubbo:registry&gt;</span></span>
<span class="line"><span>    &lt;!--3、指定通信规则（通信协议? 服务端口）--&gt;</span></span>
<span class="line"><span>    &lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20880&quot;&gt;&lt;/dubbo:protocol&gt;</span></span>
<span class="line"><span>    &lt;!--4、暴露服务 让别人调用 ref指向服务的真正实现对象--&gt;</span></span>
<span class="line"><span>    &lt;dubbo:service interface=&quot;com.lemon.gmail.service.UserService&quot; ref=&quot;userServiceImpl&quot;&gt;&lt;/dubbo:service&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    &lt;!--服务的实现--&gt;</span></span>
<span class="line"><span>    &lt;bean id=&quot;userServiceImpl&quot; class=&quot;com.lemon.gmail.service.impl.UserServiceImpl&quot;&gt;&lt;/bean&gt;</span></span>
<span class="line"><span>&lt;/beans&gt;</span></span>
<span class="line"><span>1234567891011121314151617181920</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编写一个<code>ProviderApplication</code>启动类程序，运行测试配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>public class MailApplication {</span></span>
<span class="line"><span>    public static void main(String[] args) throws IOException {</span></span>
<span class="line"><span>        ClassPathXmlApplicationContext applicationContext= new ClassPathXmlApplicationContext(&quot;provider.xml&quot;);</span></span>
<span class="line"><span>        applicationContext.start();</span></span>
<span class="line"><span>        System.in.read();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>1234567</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200611161058593.png" alt="在这里插入图片描述" loading="lazy">启动zookeeper注册中心的的zkServer.cmd、和zkCli.cmd服务 在dubbo-admin target中cmd运行 java -jar dubbo-admin-0.0.1-SNAPSHOT.jar 再次启动项目，我们可以看到在zookeeper中已经发现服务提供者。 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200611161736122.png" alt="在这里插入图片描述" loading="lazy"><strong>服务提供者的配置和测试完成</strong></p><h4 id="服务消费者配置及测试" tabindex="-1"><a class="header-anchor" href="#服务消费者配置及测试"><span>服务消费者配置及测试</span></a></h4><p>在 <code>order-service-consumer</code> 服务消费者项目中引入依赖</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>  &lt;!--dubbo--&gt;</span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;dubbo&lt;/artifactId&gt;</span></span>
<span class="line"><span>            &lt;version&gt;2.6.2&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span>        &lt;!--注册中心是 zookeeper，引入zookeeper客户端--&gt;</span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;</span></span>
<span class="line"><span>            &lt;version&gt;2.12.0&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span>123456789101112</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建<code>consumer.xml</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span>
<span class="line"><span>&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span></span>
<span class="line"><span>       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span>       xmlns:dubbo=&quot;http://dubbo.apache.org/schema/dubbo&quot;</span></span>
<span class="line"><span>       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span></span>
<span class="line"><span>       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span>
<span class="line"><span>		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd</span></span>
<span class="line"><span>		http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd</span></span>
<span class="line"><span>		http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd&quot;&gt;</span></span>
<span class="line"><span>   &lt;!--包扫描--&gt;</span></span>
<span class="line"><span>    &lt;context:component-scan base-package=&quot;com.lemon.gmail.service.impl&quot;/&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    &lt;!--指定当前服务/应用的名字(同样的服务名字相同，不要和别的服务同名)--&gt;</span></span>
<span class="line"><span>    &lt;dubbo:application name=&quot;order-service-consumer&quot;&gt;&lt;/dubbo:application&gt;</span></span>
<span class="line"><span>    &lt;!--指定注册中心的位置--&gt;</span></span>
<span class="line"><span>    &lt;dubbo:registry address=&quot;zookeeper://127.0.0.1:2181&quot;&gt;&lt;/dubbo:registry&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    &lt;!--调用远程暴露的服务，生成远程服务代理--&gt;</span></span>
<span class="line"><span>    &lt;dubbo:reference interface=&quot;com.lemon.gmail.service.UserService&quot; id=&quot;userService&quot;&gt;&lt;/dubbo:reference&gt;</span></span>
<span class="line"><span>&lt;/beans&gt;</span></span>
<span class="line"><span>1234567891011121314151617181920</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把当前OrderServiceImpl实现类中加上注解</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@Service</span></span>
<span class="line"><span>public class OrderServiceImpl implements OrderService {</span></span>
<span class="line"><span>    @Autowired</span></span>
<span class="line"><span>    public UserService userService;</span></span>
<span class="line"><span>    public void initOrder(String userID) {</span></span>
<span class="line"><span>        //查询用户的收货地址</span></span>
<span class="line"><span>        List&lt;UserAddress&gt; userAddressList = userService.getUserAddressList(userID);</span></span>
<span class="line"><span>        </span></span>
<span class="line"><span>        //为了直观的看到得到的数据，以下内容也可不写</span></span>
<span class="line"><span>        System.out.println(&quot;当前接收到的userId=&gt; &quot;+userID);</span></span>
<span class="line"><span>        System.out.println(&quot;**********&quot;);</span></span>
<span class="line"><span>        System.out.println(&quot;查询到的所有地址为：&quot;);</span></span>
<span class="line"><span>        for (UserAddress userAddress : userAddressList) {</span></span>
<span class="line"><span>            //打印远程服务地址的信息</span></span>
<span class="line"><span>            System.out.println(userAddress.getUserAddress());</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        </span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>12345678910111213141516171819</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编写一个<code>ConsumerApplication</code>启动类程序，运行测试配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>public class ConsumerApplication {</span></span>
<span class="line"><span>    public static void main(String[] args) {</span></span>
<span class="line"><span>        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;consumer.xml&quot;);</span></span>
<span class="line"><span>        OrderService orderService = applicationContext.getBean(OrderService.class);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        //调用方法查询出数据</span></span>
<span class="line"><span>        orderService.initOrder(&quot;1&quot;);</span></span>
<span class="line"><span>        System.out.println(&quot;调用完成...&quot;);</span></span>
<span class="line"><span>	    System.in.read();</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>1234567891011</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：消费者的运行测试需要先启动提供者。 启动服务提供者、消费者。及zookeeper的和dubbo-admin，查看监控信息。 localhost:7001 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/2020061208334559.png" alt="在这里插入图片描述" loading="lazy">此时可以看到一个提供者，一个消费者的信息监控信息。</p><h3 id="dubbo-monitor-simple简易监控中心" tabindex="-1"><a class="header-anchor" href="#dubbo-monitor-simple简易监控中心"><span>dubbo-monitor-simple简易监控中心</span></a></h3><p>进入dubbo-monitor-simple文件，执行cmd命令，mvn package打包成jar包 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612083732691.png" alt="在这里插入图片描述" loading="lazy"><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612084630745.png" alt="在这里插入图片描述" loading="lazy">将 <code>dubbo-monitor-simple-2.0.0-assembly.tar.gz</code> 压缩包解压至当前文件夹，解压后config文件查看properties的配置是否是本地的zookeeper。 打开解压后的 <code>assembly.bin</code> 文件，<code>start.bat</code> 启动<code>dubbo-monitor-simple监控中心</code><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612085158389.png" alt="在这里插入图片描述" loading="lazy">在浏览器 <code>localhost:8080</code> ，可以看到一个监控中心。 在服务提供者和消费者的xml中配置以下内容，再次启动服务提供和消费者启动类。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>    &lt;!--dubbo-monitor-simple监控中心发现的配置--&gt;</span></span>
<span class="line"><span>    &lt;dubbo:monitor protocol=&quot;registry&quot;&gt;&lt;/dubbo:monitor&gt;</span></span>
<span class="line"><span>    &lt;!--&lt;dubbo:monitor address=&quot;127.0.0.1:7070&quot;&gt;&lt;/dubbo:monitor&gt;--&gt;</span></span>
<span class="line"><span>123</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612085805476.png" alt="在这里插入图片描述" loading="lazy">可以看到，这个监控中心也捕获到了服务提供和消费者信息 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612085845218.png" alt="在这里插入图片描述" loading="lazy"></p><h3 id="dubbo与springboot整合" tabindex="-1"><a class="header-anchor" href="#dubbo与springboot整合"><span>Dubbo与SpringBoot整合</span></a></h3><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612152443622.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h4 id="boot-user-service-provider-服务提供者" tabindex="-1"><a class="header-anchor" href="#boot-user-service-provider-服务提供者"><span>boot-user-service-provider 服务提供者</span></a></h4><p><strong>创建Maven项目 <code>boot-user-service-provider</code></strong> 服务提供者 导入以下依赖</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;parent&gt;</span></span>
<span class="line"><span>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span></span>
<span class="line"><span>        &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;relativePath /&gt;</span></span>
<span class="line"><span>    &lt;/parent&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    &lt;dependencies&gt;</span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;com.lemon.gmail&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;gmail-interface&lt;/artifactId&gt;</span></span>
<span class="line"><span>            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;</span></span>
<span class="line"><span>            &lt;version&gt;0.2.0&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span>    &lt;/dependencies&gt;</span></span>
<span class="line"><span>12345678910111213141516171819202122232425</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把 <code>user-service-provider</code> 中的service拿到此项目中。 注意，以此方法为返回的需要更改 interface包中的void为 List</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@Service//dubbo的服务暴露</span></span>
<span class="line"><span>@Component</span></span>
<span class="line"><span>public class UserServiceImpl implements UserService {</span></span>
<span class="line"><span>	public List&lt;UserAddress&gt; getUserAddressList(String userId) {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		UserAddress address1 = new UserAddress(1, &quot;河南省郑州巩义市宋陵大厦2F&quot;, &quot;1&quot;, &quot;安然&quot;, &quot;150360313x&quot;, &quot;Y&quot;);</span></span>
<span class="line"><span>		UserAddress address2 = new UserAddress(2, &quot;北京市昌平区沙河镇沙阳路&quot;, &quot;1&quot;, &quot;情话&quot;, &quot;1766666395x&quot;, &quot;N&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		return Arrays.asList(address1,address2);</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>1234567891011</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 <code>application.properties</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>dubbo.application.name=boot-user-service-provider</span></span>
<span class="line"><span>dubbo.registry.address=127.0.0.1:2181</span></span>
<span class="line"><span>dubbo.registry.protocol=zookeeper</span></span>
<span class="line"><span></span></span>
<span class="line"><span>dubbo.protocol.name=dubbo</span></span>
<span class="line"><span>dubbo.protocol.port=20880</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#连接监控中心</span></span>
<span class="line"><span>dubbo.monitor.protocol=registry</span></span>
<span class="line"><span>123456789</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>BootProviderApplication 启动类配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@EnableDubbo //开启基于注解的dubbo功能</span></span>
<span class="line"><span>@SpringBootApplication</span></span>
<span class="line"><span>public class BootProviderApplication {</span></span>
<span class="line"><span>    public static void main(String[] args) {</span></span>
<span class="line"><span>        SpringApplication.run(BootProviderApplication.class, args);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>12345678</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动注册中心，启动当前服务提供者，可以在浏览器看到一个服务提供者。</p><h4 id="boot-order-service-consumer-服务消费者" tabindex="-1"><a class="header-anchor" href="#boot-order-service-consumer-服务消费者"><span>boot-order-service-consumer 服务消费者</span></a></h4><p><strong>创建Maven项目 <code>boot-order-service-consumer</code></strong> 服务消费者 导入以下依赖</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;parent&gt;</span></span>
<span class="line"><span>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span></span>
<span class="line"><span>        &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;</span></span>
<span class="line"><span>    &lt;/parent&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    &lt;dependencies&gt;</span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;com.lemon.gmail&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;gmail-interface&lt;/artifactId&gt;</span></span>
<span class="line"><span>            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        &lt;dependency&gt;</span></span>
<span class="line"><span>            &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt;</span></span>
<span class="line"><span>            &lt;artifactId&gt;dubbo-spring-boot-starter&lt;/artifactId&gt;</span></span>
<span class="line"><span>            &lt;version&gt;0.2.0&lt;/version&gt;</span></span>
<span class="line"><span>        &lt;/dependency&gt;</span></span>
<span class="line"><span>    &lt;/dependencies&gt;</span></span>
<span class="line"><span>12345678910111213141516171819202122232425</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把order-service-consumer项目中的service复制到当前项目。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@Service</span></span>
<span class="line"><span>public class OrderServiceImpl implements OrderService {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @Reference//引用远程提供者服务</span></span>
<span class="line"><span>    UserService userService;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public List&lt;UserAddress&gt; initOrder(String userID) {</span></span>
<span class="line"><span>        //查询用户的收货地址</span></span>
<span class="line"><span>        List&lt;UserAddress&gt; userAddressList = userService.getUserAddressList(userID);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        System.out.println(&quot;当前接收到的userId=&gt; &quot;+userID);</span></span>
<span class="line"><span>        System.out.println(&quot;**********&quot;);</span></span>
<span class="line"><span>        System.out.println(&quot;查询到的所有地址为：&quot;);</span></span>
<span class="line"><span>        for (UserAddress userAddress : userAddressList) {</span></span>
<span class="line"><span>            //打印远程服务地址的信息</span></span>
<span class="line"><span>            System.out.println(userAddress.getUserAddress());</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        return userAddressList;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>1234567891011121314151617181920</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建 OrderController 控制器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@Controller</span></span>
<span class="line"><span>public class OrderController {</span></span>
<span class="line"><span>    @Autowired</span></span>
<span class="line"><span>    OrderService orderService;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @RequestMapping(&quot;/initOrder&quot;)</span></span>
<span class="line"><span>    @ResponseBody</span></span>
<span class="line"><span>    public List&lt;UserAddress&gt; initOrder(@RequestParam(&quot;uid&quot;)String userId) {</span></span>
<span class="line"><span>        return orderService.initOrder(userId);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>1234567891011</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建application.properties 配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>server.port=8081</span></span>
<span class="line"><span>dubbo.application.name=boot-order-service-consumer</span></span>
<span class="line"><span>dubbo.registry.address=zookeeper://127.0.0.1:2181</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#连接监控中心 注册中心协议</span></span>
<span class="line"><span>dubbo.monitor.protocol=registry</span></span>
<span class="line"><span>123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>BootConsumerApplication</strong> 启动类创建</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@EnableDubbo //开启基于注解的dubbo功能</span></span>
<span class="line"><span>@SpringBootApplication</span></span>
<span class="line"><span>public class BootConsumerApplication {</span></span>
<span class="line"><span>    public static void main(String[] args){</span></span>
<span class="line"><span>        SpringApplication.run(BootConsumerApplication.class,args);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>1234567</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置完毕，此时启动zookeeper注册中心及监控。 启动springboot配置的服务提供者和消费者 在浏览器输入 localhost:7001 查看结果 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612143106487.png" alt="在这里插入图片描述" loading="lazy">http://localhost:8081/initOrder?uid=1 查询到地址信息 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612143122487.png" alt="在这里插入图片描述" loading="lazy">duboo的springboot整合配置完成。</p><h3 id="dubbo配置" tabindex="-1"><a class="header-anchor" href="#dubbo配置"><span>Dubbo配置</span></a></h3><p>dubbo配置官网参考：http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-service.html <strong>1、配置原则</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612152343133.png" alt="在这里插入图片描述" loading="lazy"> JVM 启动 -D 参数优先，这样可以使用户在部署和启动时进行参数重写，比如在启动时需改变协议的端口。 XML 次之，如果在 XML 中有配置，则 dubbo.properties 中的相应配置项无效。 Properties 最后，相当于缺省值，只有 XML 没有配置时，dubbo.properties 的相应配置项才会生效，通常用于共享公共配置，比如应用名。 <strong>2、启动时检查</strong> Dubbo 缺省会在启动时检查依赖的服务是否可用，不可用时会抛出异常，阻止 Spring 初始化完成，以便上线时，能及早发现问题，默认 check=“true”。</p><p>可以通过 check=“false” 关闭检查，比如，测试时，有些服务不关心，或者出现了循环依赖，必须有一方先启动。</p><p>另外，如果你的 Spring 容器是懒加载的，或者通过 API 编程延迟引用服务，请关闭 check，否则服务临时不可用时，会抛出异常，拿到 null 引用，如果 check=“false”，总是会返回引用，当服务恢复时，能自动连上。</p><p>以<code>order-service-consumer</code>消费者为例，在consumer.xml中添加配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;!--配置当前消费者的统一规则,当前所有的服务都不启动时检查--&gt;</span></span>
<span class="line"><span> &lt;dubbo:consumer check=&quot;false&quot;&gt;&lt;/dubbo:consumer&gt;</span></span>
<span class="line"><span>12</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加后，即使服务提供者不启动，启动当前的消费者，也不会出现错误。 <strong>3、全局超时配置</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>全局超时配置</span></span>
<span class="line"><span>&lt;dubbo:provider timeout=&quot;5000&quot; /&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>指定接口以及特定方法超时配置</span></span>
<span class="line"><span>&lt;dubbo:provider interface=&quot;com.foo.BarService&quot; timeout=&quot;2000&quot;&gt;</span></span>
<span class="line"><span>    &lt;dubbo:method name=&quot;sayHello&quot; timeout=&quot;3000&quot; /&gt;</span></span>
<span class="line"><span>&lt;/dubbo:provider&gt;</span></span>
<span class="line"><span>1234567</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>配置原则</strong> dubbo推荐在Provider上尽量多配置Consumer端属性</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>1、作服务的提供者，比服务使用方更清楚服务性能参数，如调用的超时时间，合理的重试次数，等等</span></span>
<span class="line"><span>2、在Provider配置后，Consumer不配置则会使用Provider的配置值，即Provider配置可以作为Consumer的缺省值。否则，Consumer会使用Consumer端的全局设置，这对于Provider不可控的，并且往往是不合理的</span></span>
<span class="line"><span>12</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置的覆盖规则：</p><ol><li>方法级配置别优于接口级别，即小Scope优先</li><li>Consumer端配置 优于 Provider配置 优于 全局配置，</li><li>最后是Dubbo Hard Code的配置值（见配置文档） <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612160853853.png" alt="在这里插入图片描述" loading="lazy"><strong>多版本控制</strong><a href="http://dubbo.apache.org/zh-cn/docs/user/demos/multi-versions.html" target="_blank" rel="noopener noreferrer"> http://dubbo.apache.org/zh-cn/docs/user/demos/multi-versions.html</a> 在服务提供者中复制多个impl。起不同的名字</li></ol><p><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612163440781.png" alt="在这里插入图片描述" loading="lazy"><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612163456305.png" alt="在这里插入图片描述" loading="lazy">配置多个文件的路径及信息。 服务消费者调用时，可自由配置版本 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612163603598.png" alt="在这里插入图片描述" loading="lazy"></p><h4 id="dubbo与springboot整合的三种方式" tabindex="-1"><a class="header-anchor" href="#dubbo与springboot整合的三种方式"><span>dubbo与springboot整合的三种方式</span></a></h4><p>1、将服务提供者注册到注册中心(如何暴露服务) 1.1导入Dubbo的依赖 和 zookeeper 客户端</p><p>2、让服务消费者去注册中心订阅服务提供者的服务地址 Springboot与Dubbo整合的三种方式 2.1导入dubbo-starter。在application.properties配置属性，使用@Service【暴露服务】，使用@Reference【引用服务】 2.2保留Dubbo 相关的xml配置文件 导入dubbo-starter，使用@ImportResource导入Dubbo的xml配置文件</p><p>3、使用 注解API的方式 将每一个组件手动配置到容器中,让dubbo来扫描其他的组件</p><h3 id="高可用" tabindex="-1"><a class="header-anchor" href="#高可用"><span>高可用</span></a></h3><p>zookeeper宕机与dubbo直连 现象：zookeeper注册中心宕机，还可以消费dubbo暴露的服务。 原因：</p><p>健壮性↓</p><ul><li>监控中心宕掉不影响使用，只是丢失部分采样数据</li><li>数据库宕掉后，注册中心仍能通过缓存提供服务列表查询，但不能注册新服务</li><li>注册中心对等集群，任意一台宕掉后，将自动切换到另一台</li><li>注册中心全部宕掉后，服务提供者和服务消费者仍能通过本地缓存通讯</li><li>服务提供者无状态，任意一台宕掉后，不影响使用</li><li>服务提供者全部宕掉后，服务消费者应用将无法使用，并无限次重连等待服务提供者恢复 高可用：通过设计，减少系统不能提供服务的时间；</li></ul><h4 id="集群下dubbo负载均衡配置" tabindex="-1"><a class="header-anchor" href="#集群下dubbo负载均衡配置"><span>集群下dubbo负载均衡配置</span></a></h4><p>在集群负载均衡时，Dubbo 提供了多种均衡策略，缺省为 random 随机调用。</p><p><strong>负载均衡策略如下</strong></p><p><strong>Random LoadBalance 基于权重的随机负载均衡机制</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180908789.png" alt="在这里插入图片描述" loading="lazy"><code>随机，按权重设置随机概率。 在一个截面上碰撞的概率高，但调用量越大分布越均匀，而且按概率使用权重后也比较均匀，有利于动态调整提供者权重。</code></p><p><strong>RoundRobin LoadBalance 基于权重的轮询负载均衡机制</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180928170.png" alt="在这里插入图片描述" loading="lazy"><code>轮循，按公约后的权重设置轮循比率。 存在慢的提供者累积请求的问题，比如：第二台机器很慢，但没挂，当请求调到第二台时就卡在那，久而久之，所有请求都卡在调到第二台上。</code></p><p><strong>LeastActive LoadBalance最少活跃数负载均衡机制</strong><code>最少活跃调用数，相同活跃数的随机，活跃数指调用前后计数差。 使慢的提供者收到更少请求，因为越慢的提供者的调用前后计数差会越大。</code><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612180951468.png" alt="在这里插入图片描述" loading="lazy"><strong>ConsistentHash LoadBalance一致性hash 负载均衡机制</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200612181007825.png" alt="在这里插入图片描述" loading="lazy"><code>一致性 Hash，相同参数的请求总是发到同一提供者。 当某一台提供者挂时，原本发往该提供者的请求，基于虚拟节点，平摊到其它提供者，不会引起剧烈变动。算法参见：http://en.wikipedia.org/wiki/Consistent_hashing 缺省只对第一个参数 Hash，如果要修改，请配置 &lt;dubbo:parameter key=&quot;hash.arguments&quot; value=&quot;0,1&quot; /&gt; 缺省用 160 份虚拟节点，如果要修改，请配置 &lt;dubbo:parameter key=&quot;hash.nodes&quot; value=&quot;320&quot; /&gt;</code></p><h3 id="整合hystrix-服务熔断与降级处理" tabindex="-1"><a class="header-anchor" href="#整合hystrix-服务熔断与降级处理"><span>整合hystrix，服务熔断与降级处理</span></a></h3><h4 id="服务降级" tabindex="-1"><a class="header-anchor" href="#服务降级"><span>服务降级</span></a></h4><p><strong>当服务器压力剧增的情况下，根据实际业务情况及流量，对一些服务和页面有策略的不处理或换种简单的方式处理，从而释放服务器资源以保证核心交易正常运作或高效运作。</strong> 可以通过服务降级功能临时屏蔽某个出错的非关键服务，并定义降级后的返回策略。 向注册中心写入动态配置覆盖规则：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>RegistryFactory registryFactory = ExtensionLoader.getExtensionLoader(RegistryFactory.class).getAdaptiveExtension();</span></span>
<span class="line"><span>Registry registry = registryFactory.getRegistry(URL.valueOf(&quot;zookeeper://10.20.153.10:2181&quot;));</span></span>
<span class="line"><span>registry.register(URL.valueOf(&quot;override://0.0.0.0/com.foo.BarService?category=configurators&amp;dynamic=false&amp;application=foo&amp;mock=force:return+null&quot;));</span></span>
<span class="line"><span>123</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>其中：</strong> mock=force:return null 表示消费方对该服务的方法调用都直接返回 null 值，不发起远程调用。用来屏蔽不重要服务不可用时对调用方的影响。 还可以改为 mock=fail:return null 表示消费方对该服务的方法调用在失败后，再返回 null 值，不抛异常。用来容忍不重要服务不稳定时对调用方的影响。</p><h4 id="集群容错" tabindex="-1"><a class="header-anchor" href="#集群容错"><span>集群容错</span></a></h4><p>在集群调用失败时，Dubbo 提供了多种容错方案，缺省为 failover 重试。 <strong>集群容错模式</strong></p><p><strong>Failover Cluster</strong> 失败自动切换，当出现失败，重试其它服务器。通常用于读操作，但重试会带来更长延迟。可通过 retries=“2” 来设置重试次数(不含第一次)。</p><p>重试次数配置如下： &lt;dubbo:service retries=“2” /&gt; 或 &lt;dubbo:reference retries=“2” /&gt; 或 dubbo:reference &lt;dubbo:method name=“findFoo” retries=“2” /&gt; &lt;/dubbo:reference&gt;</p><p><strong>Failfast Cluster</strong> 快速失败，只发起一次调用，失败立即报错。通常用于非幂等性的写操作，比如新增记录。</p><p><strong>Failsafe Cluster</strong> 失败安全，出现异常时，直接忽略。通常用于写入审计日志等操作。</p><p><strong>Failback Cluster</strong> 失败自动恢复，后台记录失败请求，定时重发。通常用于消息通知操作。</p><p><strong>Forking Cluster</strong> 并行调用多个服务器，只要一个成功即返回。通常用于实时性要求较高的读操作，但需要浪费更多服务资源。可通过 forks=“2” 来设置最大并行数。</p><p><strong>Broadcast Cluster</strong> 广播调用所有提供者，逐个调用，任意一台报错则报错 [2]。通常用于通知所有提供者更新缓存或日志等本地资源信息。</p><p><strong>集群模式配置</strong> 按照以下示例在服务提供方和消费方配置集群模式 &lt;dubbo:service cluster=“failsafe” /&gt; 或 &lt;dubbo:reference cluster=“failsafe” /&gt;</p><h4 id="整合hystrix" tabindex="-1"><a class="header-anchor" href="#整合hystrix"><span>整合hystrix</span></a></h4><p>服务熔断错处理配置参考=&gt; https://www.cnblogs.com/xc-xinxue/p/12459861.html</p><p>Hystrix 旨在通过控制那些访问远程系统、服务和第三方库的节点，从而对延迟和故障提供更强大的容错能力。Hystrix具备拥有回退机制和断路器功能的线程和信号隔离，请求缓存和请求打包，以及监控和配置等功能 <strong>配置spring-cloud-starter-netflix-hystrix</strong> spring boot官方提供了对hystrix的集成，直接在pom.xml里加入依赖：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span> &lt;dependency&gt;</span></span>
<span class="line"><span>     &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span>
<span class="line"><span>      &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;</span></span>
<span class="line"><span>      &lt;version&gt;1.4.4.RELEASE&lt;/version&gt;</span></span>
<span class="line"><span>&lt;/dependency&gt;</span></span>
<span class="line"><span>12345</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后在Application类上增加@EnableHystrix来启用hystrix starter：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@SpringBootApplication</span></span>
<span class="line"><span>@EnableHystrix //开启服务容错功能</span></span>
<span class="line"><span>public class ProviderApplication {</span></span>
<span class="line"><span>	...启动方法</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>12345</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>配置Provider端</strong> 在Dubbo的Provider上增加@HystrixCommand配置，这样子调用就会经过Hystrix代理。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@Service(version = &quot;1.0.0&quot;)</span></span>
<span class="line"><span>public class HelloServiceImpl implements HelloService {</span></span>
<span class="line"><span>    @HystrixCommand(commandProperties = {</span></span>
<span class="line"><span>     @HystrixProperty(name = &quot;circuitBreaker.requestVolumeThreshold&quot;, value = &quot;10&quot;),</span></span>
<span class="line"><span>     @HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;2000&quot;) })</span></span>
<span class="line"><span>    @Override</span></span>
<span class="line"><span>    public String sayHello(String name) {</span></span>
<span class="line"><span>        // System.out.println(&quot;async provider received: &quot; + name);</span></span>
<span class="line"><span>        // return &quot;annotation: hello, &quot; + name;</span></span>
<span class="line"><span>        throw new RuntimeException(&quot;Exception to show hystrix enabled.&quot;);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>123456789101112</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>配置Consumer端</strong> 对于Consumer端，则可以增加一层method调用，并在method上配置@HystrixCommand。当调用出错时，会走到fallbackMethod = &quot;reliable&quot;的调用里。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>@Reference(version = &quot;1.0.0&quot;)</span></span>
<span class="line"><span>    private HelloService demoService;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    @HystrixCommand(fallbackMethod = &quot;reliable&quot;)</span></span>
<span class="line"><span>    public String doSayHello(String name) {</span></span>
<span class="line"><span>        return demoService.sayHello(name);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    public String reliable(String name) {</span></span>
<span class="line"><span>        return &quot;hystrix fallback value&quot;;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>12345678910</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dubbo原理" tabindex="-1"><a class="header-anchor" href="#dubbo原理"><span>dubbo原理</span></a></h3><h4 id="rpc原理" tabindex="-1"><a class="header-anchor" href="#rpc原理"><span>RPC原理</span></a></h4><p><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613170846919.png" alt="在这里插入图片描述" loading="lazy"> 一次完整的RPC调用流程（同步调用，异步另说）如下：</p><ol><li><strong>服务消费方（client）调用以本地调用方式调用服务；</strong></li><li>client stub接收到调用后负责将方法、参数等组装成能够进行网络传输的消息体；</li><li>client stub找到服务地址，并将消息发送到服务端；</li><li>server stub收到消息后进行解码；</li><li>server stub根据解码结果调用本地的服务；</li><li>本地服务执行并将结果返回给server stub；</li><li>server stub将返回结果打包成消息并发送至消费方；</li><li>client stub接收到消息，并进行解码；</li><li><strong>服务消费方得到最终结果。</strong></li></ol><p>dubbo只用了两步1和8，中间的过程是透明的看不到的。RPC框架的目标就是要2~8这些步骤都封装起来，这些细节对用户来说是透明的，不可见的。</p><h3 id="netty通信原理" tabindex="-1"><a class="header-anchor" href="#netty通信原理"><span>netty通信原理</span></a></h3><p>Netty是一个异步事件驱动的网络应用程序框架， 用于快速开发可维护的高性能协议服务器和客户端。它极大地简化并简化了TCP和UDP套接字服务器等网络编程。 <strong>BIO：(Blocking IO)</strong><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171108394.png" alt="在这里插入图片描述" loading="lazy">NIO (Non-Blocking IO) <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171138127.png" alt="在这里插入图片描述" loading="lazy">Selector 一般称 为选择器 ，也可以翻译为 多路复用器， Connect（连接就绪）、Accept（接受就绪）、Read（读就绪）、Write（写就绪）</p><p><strong>Netty基本原理：</strong> netty基本原理，可参考https://www.sohu.com/a/272879207_463994 <img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171217369.png" alt="在这里插入图片描述" loading="lazy"></p><h3 id="dubbo原理-1" tabindex="-1"><a class="header-anchor" href="#dubbo原理-1"><span>dubbo原理</span></a></h3><h4 id="_1-dubbo原理-框架设计" tabindex="-1"><a class="header-anchor" href="#_1-dubbo原理-框架设计"><span>1.dubbo原理 -框架设计</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171327533.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><ul><li>config 配置层：对外配置接口，以 ServiceConfig, ReferenceConfig 为中心，可以直接初始化配置类，也可以通过 spring 解析配置生成配置类</li><li>proxy 服务代理层：服务接口透明代理，生成服务的客户端 Stub 和服务器端 Skeleton, 以 ServiceProxy 为中心，扩展接口为 ProxyFactory</li><li>registry 注册中心层：封装服务地址的注册与发现，以服务 URL 为中心，扩展接口为 RegistryFactory, Registry, RegistryService</li><li>cluster 路由层：封装多个提供者的路由及负载均衡，并桥接注册中心，以 Invoker 为中心，扩展接口为 Cluster, Directory, Router, LoadBalance</li><li>monitor 监控层：RPC 调用次数和调用时间监控，以 Statistics 为中心，扩展接口为 MonitorFactory, Monitor, MonitorService</li><li>protocol 远程调用层：封装 RPC 调用，以 Invocation, Result 为中心，扩展接口为 Protocol, Invoker, Exporter</li><li>exchange 信息交换层：封装请求响应模式，同步转异步，以 Request, Response 为中心，扩展接口为 Exchanger, ExchangeChannel, ExchangeClient, ExchangeServer</li><li>transport 网络传输层：抽象 mina 和 netty 为统一接口，以 Message 为中心，扩展接口为 Channel, Transporter, Client, Server, Codec</li><li>serialize 数据序列化层：可复用的一些工具，扩展接口为 Serialization, ObjectInput, ObjectOutput, ThreadPool</li></ul><h4 id="_2-dubbo原理-启动解析、加载配置信息" tabindex="-1"><a class="header-anchor" href="#_2-dubbo原理-启动解析、加载配置信息"><span>2.dubbo原理 -启动解析、加载配置信息</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171545504.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h4 id="_3-dubbo原理-服务暴露" tabindex="-1"><a class="header-anchor" href="#_3-dubbo原理-服务暴露"><span>3.dubbo原理 -服务暴露</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171614614.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h4 id="_4-dubbo原理-服务引用" tabindex="-1"><a class="header-anchor" href="#_4-dubbo原理-服务引用"><span>4.dubbo原理 -服务引用</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171741579.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h4 id="_5-dubbo原理-服务调用" tabindex="-1"><a class="header-anchor" href="#_5-dubbo原理-服务调用"><span>5.dubbo原理 -服务调用</span></a></h4><figure><img src="https://jackchen-note.oss-cn-beijing.aliyuncs.com/Java/dubbo/20200613171806762.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/skxndbzu/JackChenBlogs/edit/main/src/posts/微服务架构/Dubbo.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 615880048@qq.com">陈铭鹤</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a class="route-link auto-link next" href="/posts/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/zookeeper.html" aria-label="zookeeper"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">zookeeper<span class="font-icon icon iconfont icon-pen-to-square" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">千里之行 始于足下</div><div class="vp-copyright">Copyright © 2024 Jack-Chen </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Pz-t-dus.js" defer></script>
  </body>
</html>
